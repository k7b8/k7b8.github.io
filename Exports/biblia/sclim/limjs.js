/*
 LIM 5.5
 Libro Interactivo Multimeda
 Fran Macias , http://educalim.org
 CC 3.0  BY SA
*/
function clasificar(x){var M={textos:"",caixas:"",txcaixas:"",modo:""};this.crear=function(){function e(e,t,r){v++,e.style.zIndex=v;for(var n,i=parseInt(e.id),a=e.id.substring(e.id.length-1),o=0;o<l;o++){if(n=o+1,LIM.ratosobre(e,m[o],t,r,!1)){d[i]=a==n?1:0;break}d[i]=0}}M=LIM.prc(M,x);var t=x.properties.trnsimf||[],r=x.properties.imfondo||[],n=x.properties.textos,i=x.properties.caixas,a=x.properties.modo||"0",o=-1<x.properties.txcaixas.indexOf(",")?x.properties.txcaixas.split(","):x.properties.txcaixas,s=n.length,l=o.length;0==l&&(l=r.length);var c=LIM.crearbase(x),p=LIM.paxina(),d=Array(s),m=Array(l),u=0,f="dst",h="";f=0;var v=1100;null==x.donde&&LIM.comunes(c,x.txcabe,x.txpe,x.properties.ison,x.properties.autoson,x.properties.txliga,x.properties.paxliga),LIM.addEventSimple(LIM.esactividad(c,!0),"click",function(){-1<d.toString().indexOf(0)?LIM.poneravaliacion(c,x.properties.mensamal,!1,x.properties.ffinal,x.num):LIM.poneravaliacion(c,x.properties.mensaben,!0,x.properties.ffinal,x.num)}),h="clclas-ca clclas-borde","1"==a&&(h="clclas-ca"),2<l&&(h+=" clclas-camin"),a=LIM.creardom("div",c,"","clclas-u1",-1,-1);var g=LIM.creardom("div",c,"","clclas-u2",-1,-1);for(u=0;u<l;u++){var b=LIM.creardom("div",g,u+"caixa"+p,h,-1,-1);o[u]&&(b.innerHTML=o[u]),r[u]&&(b.style.backgroundImage="url("+r[u]+")",t[u]&&LIM.transparencia(b,t[u])),m[u]=b,1==u&&(f=-1),f++}for(12<s&&(dime=50),u=0,f="etq",h="",t=LIM.desordena(s),dHeight=51*s+20,u=r=0;u<s;u++)h=(r=t[u])+f+p+i[r],o=LIM.creardom("div",a,h,"clclas-etq",-1,-1),50<n[r].length&&(o.style.fontSize="12px"),o.innerHTML=n[r],LIM.drag(o,c,e),d[r]=0}}function clasificarimx(y){var I={textos:[],caixas:[],txcaixas:[],imaxes:[],imaxeAltText:[],profondo:[],imfondo:[],mensaben:"",mensamal:""};I=LIM.qhtml(y.donde,I),this.crear=function(){function e(e,t,r){g++,e.style.zIndex=g,t=parseInt(e.id),r=e.id.substring(e.id.length-1);for(var n,i=0;i<m;i++){if(n=i+1,LIM.estasobre(e,v[i],!1)){h[t]=r==n?1:0;break}h[t]=0}}var t=(y=LIM.prc(I,y)).properties.textos||[],r=y.properties.caixas||[],n=y.properties.txcaixas||[],i=y.properties.trnsimf||[],a=y.properties.imfondo||[],o=y.properties.imaxes,s=y.properties.imaxeAltText||[],l=y.properties.cfondo||"",c=y.properties.cadro||"",p=y.properties.modo||"0",d=o.length,m=n.length;0==m&&(m=a.length);var u=LIM.crearbase(y),f=LIM.paxina(),h=Array(d),v=Array(m),g=1100,b=null;null==y.donde&&LIM.comunes(u,y.txcabe,y.txpe,y.properties.ison,y.properties.autoson,y.properties.txliga,y.properties.paxliga),LIM.addEventSimple(LIM.esactividad(u,!0),"click",function(){-1<h.toString().indexOf(0)?LIM.poneravaliacion(u,y.properties.mensamal,!1,y.properties.ffinal,y.num):LIM.poneravaliacion(u,y.properties.mensaben,!0,y.properties.ffinal,y.num)}),b="clclaimx-cx clclaimx-borde","1"==p&&(b="clclaimx-cx"),3<m&&(b+=" clclaimx-cmin"),p=LIM.creardom("div",u,"","clclaimx-u1",-1,-1);for(var x=LIM.creardom("div",u,"","clclaimx-u2",-1,-1),M=0;M<m;M++){var L=LIM.creardom("div",x,M+"caixa"+f,b,-1,-1);n[M]&&(L.innerHTML=n[M]),a[M]&&(L.style.backgroundImage="url("+a[M]+")",i[M]&&LIM.transparencia(L,i[M])),v[M]=L,1==M&&0,0}for(M=0,a="",n=LIM.desordena(d),M=i=0;M<d;M++)a=(i=n[M])+"metq"+f+r[i],a=LIM.creardom("div",p,a,"clclaimx-cad",-1,-1),""!=l&&(a.style.backgroundColor="#"+l),"1"==c&&(a.style.borderWidth="1px"),(b=LIM.crearimaxe({pai:a,name:M+"imx"+f,cssclass:"",posx:1,posy:1,alttext:s[i]})).style.visibility="hidden",LIM.cargaimaxe(b,o[i],148,138,"",!0,!0),LIM.drag(a,u,e),h[i]=0,""!=y.properties.textos&&""!=t[i]&&((a=LIM.creardom("div",a,M+"txt"+f,"bandat",0,104)).style.width="150px",a.style.height="34px",a.innerHTML=t[i])}}function completar(f){var h={};this.crear=function(){h=LIM.prc(h,f);for(var i=f.properties.modo||"1",e=[],t=[],r=[],a=f.properties.textos.length,n=0;n<a;n++)arretq=f.properties.textos[n].split("||"),e[n]=arretq[0],t[n]=arretq[1],r[n]=arretq[2];var o,s=LIM.crearbase(f),l=LIM.paxina(),c=Array(a),p=Array(a);for(n=0,null==f.donde&&LIM.comunes(s,f.txcabe,f.txpe,f.properties.ison,f.properties.autoson,f.properties.txliga,f.properties.paxliga),LIM.addEventSimple(LIM.esactividad(s,!0),"click",function(){for(var e,t,r=!0,n=0;n<a;n++)e=c[n],valtx="1"==i?(t=e.value,p[n]):(t=LIM.ttrim(e.value.toLowerCase()),p[n].toLowerCase()),valtx==t?e.style.backgroundColor="#F2F5A9":r=!(e.style.backgroundColor="#E6E6E6");r?LIM.poneravaliacion(s,f.properties.mensaben,!0,f.properties.ffinal,f.num):LIM.poneravaliacion(s,f.properties.mensamal,!1,f.properties.ffinal,f.num)}),n=o=n=0;n<a;n++)t[n].length>o&&(o=t[n].length);if(o*=14,"3"==i){var d=t.slice();LIM.revolve(d)}var m=LIM.creardom("div",s,"","clcomp-cadro");for(n=0;n<a;n++){var u=LIM.creardom("div",m,"","clcomp-base");e[n]&&((o=LIM.creardom("span",u,"","clcomp-txt")).innerHTML=e[n]),""!=t[n]&&(o="3"==i?LIM.crearselect(u,n+"dstum"+l,"clcomp-in",-5,0,d):LIM.crearinput({pai:u,name:n+"dstum"+l,cssclass:"clcomp-in",pholder:h.pholder}),p[n]=t[n],c[n]=o),""!=r[n]&&null!=r[n]&&((o=LIM.creardom("span",u,"","clcomp-txt")).innerHTML=r[n])}"2"==i&&((u=LIM.creardom("div",s,"","clcomp-axu")).innerHTML=t.toString().split(",").join(" | "))}}function cuadros(g){var b={};b=LIM.qhtml(g.donde,b),this.crear=function(){function e(e,t,r){for(var n=null,i=[],a=0,o=0;o<t.length;o++)for(var s=0;s<t[o].length;s++)n=document.createElement("DIV"),e.appendChild(n),n.style.backgroundColor="transparent",i[a]=n,0<t[o][s]&&r?(n.style.backgroundColor=l[t[o][s]-1],n.className="clsime-cadro clsime-cor"):n.className="clsime-cadro",r||(n.onclick=function(){"transparent"!=this.style.backgroundColor?(this.style.backgroundColor="transparent",this.className="clsime-cadro"):(this.style.backgroundColor=c,this.className="clsime-cadro clsime-cor")}),a++;return i}function t(e){e=e.split("");for(var t=0;t<e.length;t++)0!=e[t]?e[t]=0:e[t]=1;return e.join("")}Element.prototype.hasClassName=function(e){return new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)").test(this.className)},Element.prototype.addClassName=function(e){this.hasClassName(e)||(this.className=[this.className,e].join(" "))},Element.prototype.removeClassName=function(e){this.hasClassName(e)&&(this.className=this.className.replace(new RegExp("(?:^|\\s+)"+e+"(?:\\s+|$)","g")," "))},Element.prototype.toggleClassName=function(e){this[this.hasClassName(e)?"removeClassName":"addClassName"](e)};var l="#ff0000 #00ff00 #0000ff #ff8000 #ffff00 #C8A2C8 #ffffff #000000".split(" "),c=l[0],r=null;b=LIM.prc(b,g);var n=g.properties.valor||"0",i=g.properties.forma||"0",a=g.properties.cadros||[];if("0"==(g.properties.modo||"0")){var o=1;"1"==n&&(o=10);for(var s=n="",p=s=0;p<7;p++){n="";for(var d=0;d<8;d++)7<(s=Math.floor(Math.random()*(+o+1)))&&(s=0),n+=s=s.toString();a[p]=n}}var m=LIM.crearbase(g);LIM.paxina(),p="",LIM.addEventSimple(LIM.esactividad(m,!0),"click",function(){for(var e,t=!0,r="",n=0;n<h.length;n++)e=(e=(e=v[n].style.backgroundColor).match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):"",r+=e=NaN==Number(e)?0:l.indexOf(e)+1;for(r=r.match(/.{1,8}/g),n=0;n<u;n++)r[n]!=f[n]&&(t=!1);t?LIM.poneravaliacion(m,g.properties.mensaben,!0,g.properties.ffinal,g.num):LIM.poneravaliacion(m,g.properties.mensamal,!1,g.properties.ffinal,g.num)});var u=a.length,f=[];if(0==i)for(p=0;p<u;p++)f.push(a[p]);else if("1"==i)for(p=0;p<u;p++)f[p]=t(a[p]);else if("2"==i)for(p=0;p<u;p++)f[p]=a[p].split("").reverse().join("");else if("3"==i)for(p=0;p<u;p++)f[p]="0"+a[p].substr(0,7);(i=document.createElement("DIV")).className="clsime-base",m.appendChild(i);var h=e(i,a,!0);(i=document.createElement("DIV")).className="clsime-base",m.appendChild(i);var v=e(i,a);for(a=null,(i=document.createElement("DIV")).className="clsime-colores",m.appendChild(i),o=0;o<l.length;o++)(a=document.createElement("DIV")).className="clsime-color",a.style.backgroundColor=l[o],i.appendChild(a),a.onclick=function(){c=this.style.backgroundColor,this.addClassName("clsime-sel"),r.removeClassName("clsime-sel"),r=this},0==o&&(r=a).addClassName("clsime-sel");(a=document.createElement("DIV")).className="clsime-del",i.appendChild(a),a.onclick=function(){for(var e=0;e<v.length;e++)v[e].style.backgroundColor="transparent",v[e].className="clsime-cadro"},a.innerHTML="X"}}function dictado(m){var u={};u=LIM.qhtml(m.donde,u),this.crear=function(){var e=(m=LIM.prc(u,m)).properties.texto,t=m.properties.son||"",i=m.properties.modo||"0",r=m.properties.forma||"0",a=e.replace(/ +(?= )/g,""),o=a.split(/<br>| /),s=LIM.crearbase(m),n=LIM.creardom("div",s,"","cldic-base");if(LIM.paxina(),LIM.addEventSimple(LIM.esactividad(s,!0),"click",function(){var e=c.value.replace(/(?:\r\n|\r|\n)/g,"<br>").replace(/ +(?= )/g,""),t=e.split(/<br>| /),r="";if("1"==i)for(var n=0;n<t.length;n++)r=t[n]!=o[n]?r+"<span>"+t[n]+"</span> ":r+(t[n]+" ");a==e?LIM.poneravaliacion(s,m.properties.mensaben,!0,m.properties.ffinal,m.num):(LIM.poneravaliacion(s,m.properties.mensamal,!1,m.properties.ffinal,m.num),"1"==i&&(d.innerHTML=r,p.style.display="block"))}),"1"==r&&(LIM.creardom("div",n,"","cldic-or").innerHTML=e),""!=t){e=LIM.creardom("div",n,"","cldic-bts");var l=LIM.creardom("audio",e,"","cldic-au");l.controls=!0,l.src=t,(t=document.createElement("button")).className="cldic-bot",t.title=LIM.td("Pausa"),e.appendChild(t),t.innerHTML="-3",LIM.addEventSimple(t,"click",function(){l.pause(),l.currentTime-=3,l.pause()})}var c=document.createElement("TEXTAREA");c.className="cldic-txt",n.appendChild(c);var p=LIM.creardom("div",n,"","cldic-dvc");n=LIM.creardom("button",p,"","cldic-btc",-1,-1);var d=LIM.creardom("div",p,"","cldic-cor",-1,-1);n.innerHTML="x",n.setAttribute("aria-label",LIM.td("Cerrar")),n.setAttribute("title",LIM.td("Cerrar")),LIM.addEventSimple(n,"click",function(){this.parentNode.style.display="none"})}}function esquema(i){var a={texto:""};a=LIM.qhtml(i.donde,a),this.crear=function(){function u(e,t){function r(e,t){e.Nodes||(e.Nodes=[]);var r=e.Nodes.length;e.Nodes[r]={},t.Action||(t.Action=""),e.Nodes[r].Action=t.Action,e.Nodes[r].Content=t.texto,e.Nodes[r].Pai=t.pai}var n=JSON.parse(e),i=n.esquema[0].texto,a="";0<i.indexOf("]")&&(a=i.substring(i.lastIndexOf("[")+1,i.lastIndexOf("]")),i=i.split("["+stacti+"]").join("")),i={Content:i,Action:a,Nodes:[]},a=[-1,-1,-1,-1,-1,-1,-1,-1];for(var o=1;o<n.esquema.length;o++)switch(n.esquema[o].nivel){case"1":r(i,n.esquema[o]),a[1]++,a[2]=-1,a[3]=-1;break;case"2":r(i.Nodes[a[1]],n.esquema[o]),a[2]++,a[3]=-1;break;case"3":r(i.Nodes[a[1]].Nodes[a[2]],n.esquema[o]),a[3]++;break;case"4":r(i.Nodes[a[1]].Nodes[a[2]].Nodes[a[3]],n.esquema[o]),a[4]++;break;case"5":r(i.Nodes[a[1]].Nodes[a[2]].Nodes[a[3]].Nodes[a[4]],n.esquema[o]),a[5]++;break;case"6":r(i.Nodes[a[1]].Nodes[a[2]].Nodes[a[3]].Nodes[a[4]].Nodes[a[5]],n.esquema[o]),a[6]++}!function(e){(function e(t,r,n,i,a){null==r&&(r=0);null==n&&(n=null);null==i&&(i=null);null==a&&(a=[]);t.Level=r;t.ParentNode=n;t.LeftNode=i;if(!t.Collapsed&&t.Nodes&&0<t.Nodes.length)for(n=0;n<t.Nodes.length;n++)i=null,0==n&&null!=a[r]&&(i=a[r]),0<n&&(i=t.Nodes[n-1]),n==t.Nodes.length-1&&(a[r]=t.Nodes[n]),e(t.Nodes[n],r+1,t,i,a)})(e.RootNode),("Vertical"==e.Layout?function e(t,r){var n=r.height?r.height:100,i=r.width?r.width:100,a=5;if(!t.Collapsed&&t.Nodes&&0<t.Nodes.length)for(var o=0;o<t.Nodes.length;o++)e(t.Nodes[o],r);!t.Collapsed&&t.Nodes&&0<t.Nodes.length?(a=t.Nodes[0].Top+(t.Nodes[t.Nodes.length-1].Top+t.Nodes[t.Nodes.length-1].Height-t.Nodes[0].Top)/2-n/2,t.LeftNode&&t.LeftNode.Top+t.LeftNode.Height+20>a&&(o=t.LeftNode.Top+t.LeftNode.Height+20,d(t.Nodes,o-a),a=o)):t.LeftNode&&(a=t.LeftNode.Top+t.LeftNode.Height+20);t.Top=a;t.Left=5+30*t.Level+i*t.Level;t.Height=n;t.Width=i;g.style.height=2*(t.Top+t.Height)+"px";i=t.Left+i;t.ChildrenConnectorPoint={X:i,Y:a+n/2,Layout:"Vertical"};i=t.Left;t.ParentConnectorPoint={X:i,Y:a+n/2,Layout:"Vertical"}}:function e(t,r){var n=r.height?r.height:30,i=r.width?r.width:100,a=5;if(!t.Collapsed&&t.Nodes&&0<t.Nodes.length)for(var o=0;o<t.Nodes.length;o++)e(t.Nodes[o],r);!t.Collapsed&&t.Nodes&&0<t.Nodes.length?(a=t.Nodes[0].Left+(t.Nodes[t.Nodes.length-1].Left+t.Nodes[t.Nodes.length-1].Width-t.Nodes[0].Left)/2-i/2,t.LeftNode&&t.LeftNode.Left+t.LeftNode.Width+30>a&&(o=t.LeftNode.Left+t.LeftNode.Width+30,p(t.Nodes,o-a),a=o)):t.LeftNode&&(a=t.LeftNode.Left+t.LeftNode.Width+30);t.Left=a;t.Top=5+50*t.Level+n*t.Level;t.Height=n;t.Width=i;g.style.height=3*(t.Top+t.Height)+"px";n=t.Top+n;t.ChildrenConnectorPoint={X:a+i/2,Y:n,Layout:"Horizontal"};n=t.Top;t.ParentConnectorPoint={X:a+i/2,Y:n,Layout:"Horizontal"}})(e.RootNode,e),e.Container.innerHTML="",function e(t,r,n){if(""!=t.Action&&"o"!=t.Action){var i=document.createElement("a");i.href='javascript:LIM.salto("'+t.Action+'")',i.title="link: "+t.Action}else i=document.createElement("div");i.style.top=t.Top+"px";i.style.left=t.Left+"px";i.style.width=t.Width+"px";i.style.height=t.Height+"px";if(t.Collapsed)i.className=" clesq-nodeco";else if("o"==t.Action)i.className="clesq-node clesq-oc",i.innerHTML="?",i.cnt=t.Content,i.Pai=t.Pai,f.push(t.Content),h.push(t.Pai);else if(i.className="clesq-node",""!=t.Action){var a=document.createElement("div");a.className="clesq-lnk",i.appendChild(a)}t.Class&&(i.className=t.Class);t.Content&&(a=document.createElement("div"),a.className="clesq-nodec",i.appendChild(a),"o"!=t.Action&&(a.innerHTML+=t.Content));t.ToolTip&&i.setAttribute("title",t.ToolTip);i.Node=t;n.OnNodeClick&&(i.onclick=n.OnNodeClick);n.OnNodeDoubleClick&&(i.ondblclick=n.OnNodeDoubleClick);r.appendChild(i);i.style.zIndex="200";if(!t.Collapsed&&t.Nodes&&0<t.Nodes.length)for(i=0;i<t.Nodes.length;i++)e(t.Nodes[i],r,n)}(e.RootNode,e.Container,e),function e(t,r){if(!t.Collapsed&&t.Nodes&&0<t.Nodes.length)for(var n=0;n<t.Nodes.length;n++){if("Vertical"==t.ChildrenConnectorPoint.Layout){var i=r,a=t.ChildrenConnectorPoint,o=t.Nodes[n].ParentConnectorPoint,s=a.X+(o.X-a.X)/2;c(i,a.X,a.Y,s,a.Y,1),c(i,s,a.Y<o.Y?a.Y:o.Y,s,a.Y>o.Y?a.Y:o.Y,1),c(i,s,o.Y,o.X,o.Y,1)}else i=r,a=t.ChildrenConnectorPoint,o=t.Nodes[n].ParentConnectorPoint,s=a.Y+(o.Y-a.Y)/2,c(i,a.X,a.Y,a.X,s,1),c(i,a.X<o.X?a.X:o.X,s,a.X>o.X?a.X:o.X,s,1),c(i,o.X,s,o.X,o.Y,1);e(t.Nodes[n],r)}}(e.RootNode,e.Container);var t=f,r=h,n=e.Container,i=e.RootNode.Width;e=e.RootNode.Height;for(var a=LIM.desordena(t.length),o=0;o<t.length;o++){var s=document.createElement("div");s.innerHTML=t[a[o]],s.className="clesq-drag",s.style.width=i,s.style.height=e,s.cnt="0";var l=n.parentNode.parentNode;l.appendChild(s),s.npai=r[a[o]],LIM.drag(s,l,m)}}({Container:t,RootNode:i,Layout:s,width:l,height:v}),t.style.width="auto"}function c(e,t,r,n,i,a){var o=document.createElement("div");o.style.top=r+"px",o.style.left=t+"px",t==n?(o.style.width=a+"px",o.style.height=i-r+"px"):(o.style.width=n-t+"px",o.style.height=a+"px"),o.className="clesq-li",e.appendChild(o)}function p(e,t){for(var r=0;r<e.length;r++)e[r].Left+=t,e[r].ParentConnectorPoint&&(e[r].ParentConnectorPoint.X+=t),e[r].ChildrenConnectorPoint&&(e[r].ChildrenConnectorPoint.X+=t),e[r].Nodes&&p(e[r].Nodes,t)}function d(e,t){for(var r=0;r<e.length;r++)e[r].Top+=t,e[r].ParentConnectorPoint&&(e[r].ParentConnectorPoint.Y+=t),e[r].ChildrenConnectorPoint&&(e[r].ChildrenConnectorPoint.Y+=t),e[r].Nodes&&d(e[r].Nodes,t)}function m(e,t,r){e.cnt="0",e.style.visibility="hidden",t=document.elementFromPoint(t,r),e.style.visibility="visible",-1<t.className.indexOf("clesq-oc")&&(e.style.left=t.style.left,e.style.top=t.offsetTop+t.parentNode.offsetTop+"px",e.npai==t.Pai&&(e.cnt="1"))}var e=(i=LIM.prc(a,i)).properties.dim||["0","0"],t=Number(i.properties.forma)||0,r=i.properties.texto||"";0<r.indexOf("|")?(tmodo=2,r.split("|")):'"'==r.charAt(0)?r.slice(1,-1).split(" "):(r.split(""),tmodo=1);var n=LIM.crearbase(i);LIM.paxina();var f=[],h=[];null==i.donde&&LIM.comunes(n,i.txcabe,i.txpe,i.properties.ison,i.properties.autoson,i.properties.txliga,i.properties.paxliga),(-1<r.indexOf("[o]")||-1<r.indexOf("[?]"))&&LIM.addEventSimple(LIM.esactividad(n,!0),"click",function(){for(var e=!0,t=n.querySelectorAll(".clesq-drag"),r=0;r<t.length;r++)"1"!=t[r].cnt&&(e=!1);0==e?LIM.poneravaliacion(n,i.properties.mensamal,!1,i.properties.ffinal,i.num):LIM.poneravaliacion(n,i.properties.mensaben,!0,i.properties.ffinal,i.num)}),e=e.map(Number);var s="Vertical";1==t?(s="Horizontal",0==e[0]&&(e[0]=120)):0==e[0]&&(e[0]=140),0==e[1]&&(e[1]=60);var l=e[0],v=e[1];(t=document.createElement("div")).setAttribute("class","clesq-base"),n.appendChild(t),(e=document.createElement("div")).setAttribute("class","clesq-cmov"),t.appendChild(e);var g=document.createElement("div");g.setAttribute("class","clesq-cnodes"),t.appendChild(g),function(e,t,r){function n(e){for(var t=0;t<e.length;t++)if("*"!=e[t]&&"\t"!=e[t])return t;return e.length}var i=[0,0,0,0,0,0,0,0],a=e.split("|"),o=0;if(-1<e.indexOf("[?]"))for(e=0;e<a.length;e++)0<a[e].search("[?]")&&(a[e]=a[e].replace("[?]",r[o]+"[o]"),o++);var s,l,c,p,d="",m="";for(r=-1,e=o=0;e<a.length;e++)-1<(m=n(a[e]))&&(m!=o&&(r=o,o=m),d+=(m=(s=a[e],l=m,c=e,p=r,p="",s=s.slice(l),i[l]=c,0<s.indexOf("]")&&(p=s.substring(s.lastIndexOf("[")+1,s.lastIndexOf("]")),s=s.split("["+p+"]").join("")),s.replace(/\s+$/,""),s='{"texto":"'+(s=s.replace(/"/g,'\\"'))+'","num":"'+c+'","nivel":"'+l+'","pai":"'+i[l-1]+'","Action":"'+p+'","liga":""}',JSON.stringify(s),{datjs:s}).datjs)+",");u(a='{"esquema":['+d.substring(0,d.length-1)+"]}",t)}(r,g,[])}}function etiquetas(y){var I={};I=LIM.qhtml(y.donde,I),this.crear=function(){function e(e,t,r){h++,e.style.zIndex=h,t=parseInt(e.id);for(var n=m[t]=0;n<p;n++)if(r=u[n],LIM.estasobre(e,r,!1)){console.log(e.valor+"----"+r.valor),e.valor==r.valor?(console.log("si"),m[t]=1):m[t]=0;break}}I=LIM.prc(I,y);for(var r=y.properties.modo||"1",t=y.properties.imaxe||"",n=[],i=[],a=[],o=[],s=[],l=y.properties.etiquetas.length,c=0;c<l;c++)n=y.properties.etiquetas[c].split("||"),i[c]=n[0],a[c]=n[1],o[c]=n[2];"7"==r&&(s=i);var p=i.length,d=LIM.crearbase(y);n=LIM.paxina();var m=Array(p),u=Array(p),f=Array(p);c=0;var h=1100;null==y.donde&&LIM.comunes(d,y.txcabe,y.txpe,y.properties.ison,y.properties.autoson,y.properties.txliga,y.properties.paxliga),-1<"2379".indexOf(r)&&LIM.addEventSimple(LIM.esactividad(d,!0),"click",function(){var e=-1==m.toString().indexOf("0");if("9"==r){for(e=0;e<p;e++){var t=u[e];m[e]=f[e]==t.value?1:0}e=-1==m.toString().indexOf("0")}else if("2"==r){for(e=0;e<p;e++)t=u[e],f[e]==LIM.ttrim(t.value.toLowerCase())?m[e]=1:m[e]=0;e=-1==m.toString().indexOf("0")}"7"==r&&(e=!1,i.toString()==m.toString()&&(e=!0)),e?LIM.poneravaliacion(d,y.properties.mensaben,!0,y.properties.ffinal,y.num):LIM.poneravaliacion(d,y.properties.mensamal,!1,y.properties.ffinal,y.num)}),""!=t&&((c=LIM.crearimaxe({pai:d,name:"imaxclasifica"+n,"":"",posx:0,posy:26,alttext:y.properties.alttext})).src=t,c.style.position="relative",c.addEventListener("load",function(){this.parentNode.parentNode.style.minWidth=(this.offsetWidth+50).toString()+"px"})),t=LIM.desordena(p),l=0;var v=LIM.creardom("div",d,"","cletq-marco");if("9"==r){var g=i.slice();LIM.revolve(g)}else if("5"==r){var b=LIM.creardom("div",d,"","cletq-ver");b.innerHTML=""}var x="cletq-punto";for("6"==r&&(x="cletq-lab"),c=0;c<p;c++){l="9"==r||"3"==r?t[c]:c;var M="7"==r?LIM.crearlink({pai:d,name:c+"etqpnt"+n,text:"",url:"javascript:;",cssclass:"cletq-punto",posx:a[c],posy:20+Number(o[c]),alttext:LIM.td("Seleccionar")}):LIM.creardom("div",d,c+"etqpnt"+n,x,a[c],20+Number(o[c]));switch(M.innerHTML=c+1,m[l]=0,r){case"1":b=LIM.creardom("div",v,"","cletq-base");var L=LIM.creardom("span",b,"","cletq-num");L.innerHTML=c+1,(M=LIM.creardom("span",b,"","cletq-txt")).innerHTML=i[l];break;case"2":b=LIM.creardom("div",v,"","cletq-base"),(L=LIM.creardom("span",b,"","cletq-num")).innerHTML=c+1,M=LIM.crearinput({pai:b,name:c+"input"+n,cssclass:"cletq-txt",posx:0,posy:-2,dimw:174,dimh:24,pholder:I.pholder}),u[c]=M,f[c]=i[c].toLowerCase();break;case"3":(u[l]=M).valor=i[c],M=LIM.creardom("div",v,l+"baseetq"+n,"cletq-drag"),L=LIM.creardom("div",M,"","cletq-tri"),b=LIM.creardom("div",M,"","cletq-dragtxt"),M.style.cursor="pointer",LIM.drag(M,d,e),b.innerHTML=i[l],f[l]=i[l],M.valor=i[l];break;case"5":M.valor="<p>"+(c+1)+"- "+i[c]+"</p>",M.son=s[c],M.onmouseover=function(){b.innerHTML=this.valor},M.onmouseout=function(){b.innerHTML=""},M.onclick=function(){LIM.sonar(this.son)},M.style.cursor="pointer";break;case"6":M.innerHTML=i[c];break;case"7":M.valor=i[c],M.num=c,M.style.backgroundColor="yellow",M.onclick=function(){var e=this.num;"0"==m[e]?(m[e]="1",this.style.backgroundColor="red"):(m[e]="0",this.style.backgroundColor="yellow")},M.style.cursor="pointer";break;case"8":M.valor=i[c],M.onclick=function(){LIM.salto(this.valor)},M.style.cursor="pointer";break;case"9":f[l]=i[c],b=LIM.creardom("div",v,"","cletq-base"),(L=LIM.creardom("span",b,"","cletq-num")).innerHTML=c+1,M=LIM.crearselect(b,l+"baseetq"+n,"cletq-list",-1,0,g),u[l]=M}}}}function etiquetastxt(y){var I={};I=LIM.qhtml(y.donde,I),this.crear=function(){function e(e,t,r,n,i,a){var o=r.offsetLeft+r.offsetWidth;r=r.offsetTop+r.offsetHeight/2;var s=n.offsetTop+n.offsetHeight/2,l=n.offsetLeft-o,c=l/parseInt(2*Math.random()+2);n=o+c-i,l-=c,(o=LIM.creardom("div",e,t+"1l","",o,r)).style.position="absolute",o.style.width=c+"px",o.style.height=i+"px",o.style.backgroundColor=a,o.name="lina",r=s<r?((o=LIM.creardom("div",e,t+"2l","",n,s)).style.height=r-s+"px",s):((o=LIM.creardom("div",e,t+"2l","",n,r)).style.height=s-r+"px",r+s-r),o.style.width=i+"px",o.style.position="absolute",o.style.backgroundColor=a,o.name="lina",(o=LIM.creardom("div",e,t+"2l","",n,r)).style.width=i+l+"px",o.style.height=i+"px",o.style.position="absolute",o.style.backgroundColor=a,o.name="lina"}function t(e,t,r){b++,e.style.zIndex=b,t=parseInt(e.id);for(var n=0;n<u;n++){if(r=v[n],LIM.estasobre(e,r,!0)){h[t]=g[n]==e.id[0]?1:0;break}h[t]=0}}I=LIM.prc(I,y);for(var r=y.properties.modo||"0",n=y.properties.tam||"14",i=y.properties.imaxe||"",a=y.properties.posx||0,o=y.properties.posy||0,s=[],l=[],c=[],p=[],d=y.properties.etiquetas.length,m=0;m<d;m++)s=y.properties.etiquetas[m].split("||"),l[m]=s[0],c[m]=s[1],p[m]=s[2];var u=l.length,f=LIM.crearbase(y);s=LIM.paxina();var h=Array(u),v=Array(u),g=Array(u);d=n+"px",m=0;var b=1100,x="#ff00ff #000000 #0000ff #fff000 #00ff00 #777777".split(" ");for(null==y.donde&&LIM.comunes(f,y.txcabe,y.txpe,y.properties.ison,y.properties.autoson,y.properties.txliga,y.properties.paxliga),"0"!=r&&LIM.addEventSimple(LIM.esactividad(f,!0),"click",function(){if("1"==r)for(var e=0;e<u;e++)g[e]==LIM.ttrim(v[e].value.toLowerCase())?h[e]=1:h[e]=0;-1<h.toString().indexOf(0)?LIM.poneravaliacion(f,y.properties.mensamal,!1,y.properties.ffinal,y.num):LIM.poneravaliacion(f,y.properties.mensaben,!0,y.properties.ffinal,y.num)}),""!=i&&((m=LIM.crearimaxe({pai:f,name:"imaxclasifica"+s,"":"",posx:Number(a),posy:Number(o)+26,alttext:y.properties.alttext})).addEventListener("load",function(){var e=this.width+50;this.parentNode.parentNode.style.minWidth=e.toString()+"px","2"==r&&(M.style.marginLeft=e+"px")}),m.src=i,m.style.position="relative"),i=LIM.desordena(u),m=o=a=0;m<u;m++)o=Math.max(o,l[m].length);if(o*=n-parseInt(n/2.6),"2"==r)var M=LIM.creardom("div",f,"","cletq2-marco");for(m=0;m<u;m++){if(a="0"==r?m:i[m],"4"!=r){var L=LIM.creardom("div",f,m+"punto"+s,"cletq2-txt",c[m],20+Number(p[m]));L.style.fontSize=d}switch(h[a]=0,r){case"0":L.innerHTML=l[m];break;case"1":n=LIM.crearinput({pai:f,name:m+"input"+s,cssclass:"cletq2-in",posx:c[m],posy:20+Number(p[m]),dimw:o+10,pholder:y.properties.pholder}),v[m]=n,g[m]=l[m].toLowerCase(),n.style.fontSize=d;break;case"2":L.innerHTML="&nbsp;",L.style.width=o+"px",v[a]=L,(n=LIM.creardom("div",M,a+"baseetq"+s,"cletq2-drag",592,10+40*m)).style.fontSize=d,n.style.width=o+"px",LIM.drag(n,f,t),n.innerHTML=l[a],g[a]=m;break;case"4":L.style.width="10px",L.style.height="14px",(v[a]=L).style.backgroundColor=x[m],(n=LIM.creardom("div",f,m+"baseetq"+s,"cletiqueta",592,60*m)).style.position="absolute",n.innerHTML=l[m],g[a]=m,e(f,m+"baseetq"+s,L,n,2,x[m])}}}}function externa(i){var a={};a=LIM.qhtml(i.donde,a),this.crear=function(){var e=(i=LIM.prc(a,i)).properties.externa||"",t=i.properties.dimx||"0",r=LIM.crearbase(i);if(r=LIM.creardom("div",r,"","clext-base"),r=LIM.creardom("div",r,"",""),0<e.indexOf("iframe"))r.innerHTML=e;else{var n="clext-frm";0==t&&(n+=" clext-dim"),r.innerHTML='<iframe src="'+e+'" class="'+n+'" width="'+i.properties.dimx+'" height="'+i.properties.dimy+'" >'+e+"</iframe>"}}}function formulas(u){var f={};this.crear=function(){var e=(u=LIM.prc(f,u)).properties.etiquetas||[""],t=u.properties.texto||"",r=e.length;if(0<r){t=[];for(var n=[],i=[],a=0;a<r;a++)arretq=e[a].split("||"),t[a]=arretq[0]||"",n[a]=arretq[1]||"",i[a]=arretq[2]||"";a=i[0].length}var o=LIM.crearbase(u);LIM.paxina(),null==u.donde&&LIM.comunes(o,u.txcabe,u.txpe,u.properties.ison,u.properties.autoson,u.properties.txliga,u.properties.paxliga),LIM.addEventSimple(LIM.esactividad(o,!0),"click",function(){for(var e=!0,t=s.length,r=0;r<t;r++)s[r]!=l[r].value&&(e=!1,l[r].value="");e?LIM.poneravaliacion(o,u.properties.mensaben,!0,u.properties.ffinal,u.num):LIM.poneravaliacion(o,u.properties.mensamal,!1,u.properties.ffinal,u.num)});var s=[],l=[];(e=document.createElement("div")).setAttribute("class","clfor-b"),o.appendChild(e);for(var c=0;c<r;c++){var p=document.createElement("div");p.setAttribute("class","clfor-l"),e.appendChild(p);for(var d=0;d<a;d++){if("1"==i[c][d]){var m=document.createElement("div");m.setAttribute("class","clfor-c"),null!=t[c][d]&&(m.innerHTML=t[c][d])}else(m=document.createElement("INPUT")).setAttribute("type","text"),m.setAttribute("maxlength","1"),m.setAttribute("class","clfor-c clfor-in"),s.push(t[c][d]),l.push(m);"s"==n[c][d]&&m.setAttribute("class",m.className+" clfor-sup"),"i"==n[c][d]&&m.setAttribute("class",m.className+" clfor-ind"),p.appendChild(m)}}}}function fraccion(I){var N={texto:"",imaxe:"",altimaxe:"",palabras:"",letras:""};this.crear=function(){function e(e,t,r){for(var n=1;n<r;n+=2)e=74*n,t=n-1,(y=LIM.creardom("div",h,"","clfrac-cx",e,64)).innerHTML=o[t],LIM.creardom("div",h,"","clfrac-se",e,135),t=n,(y=LIM.creardom("div",h,"","clfrac-cx",e,144)).innerHTML=o[t];for(n=1;n<r/3;n++)e=74*n+74,u?(y=LIM.creardom("div",h,"","clfrac-cx",e,103)).innerHTML=l:"="==l&&(m=LIM.creardom("input",h,"","clfrac-cx",e,103))}function t(e,t,r,n,i){v=t*e+t,(y=LIM.creardom("div",r,"","clfrac-cx",v,103)).innerHTML="=",v=t*(e+1)+t,LIM.creardom("div",r,"","clfrac-se",v,135),y=LIM.creardom("input",r,"","clfrac-cx clfrac-re",v,64),n&&(y.value=n),m=LIM.creardom("input",r,"","clfrac-cx clfrac-re",v,144),i&&(m.value=i)}function r(e){var t=Math.pow(10,e)-1;return e=10*(e-1),document.getElementById("demo"),Math.floor(Math.random()*(t-e)+e)+1}var o=(I=LIM.prc(N,I)).properties.numeros||[""],s=I.properties.resp||[""],n=I.properties.imaxe||"",i=I.properties.altimaxe||"",l=I.properties.forma||"+",a=I.properties.valor||"";if("1"==(I.properties.alea||"")){var c=Number(o[0]),p=Number(o[1]);o[0]=r(c),o[1]=r(p),o[2]=r(c),"1"==a?(o[3]=o[1],"-"==l&&o[0]==o[2]&&(o[0]+=1)):o[3]=r(p)}c=o.length;var d=LIM.crearbase(I);LIM.paxina();var m,u=!1,f="=";"r"!=l&&"p"!=l&&"="!=l&&(u=!0),null==I.donde&&LIM.comunes(d,I.txcabe,I.txpe,I.properties.ison,I.properties.autoson,I.properties.txliga,I.properties.paxliga),LIM.addEventSimple(LIM.esactividad(d,!0),"click",function(){var e,t=!1;if(u){var r=y.value,n=m.value;if(s[0])if("s"==s[0]){var i=g;for(e=b;0!==e;){var a=e;e=i%e,i=a}i=g/(e=i),e=b/e,i==r&&e==n&&(t=!0)}else Number(s[0])==r&&Number(s[1])==n&&(t=!0);else r/n==g/b&&(t=!0)}"="==l&&m.value==f&&(t=!0),"p"==l&&d.querySelectorAll(".clfrac-sel").length==x&&(t=!0),"r"==l&&(r=y.value,n=m.value,r==Number(o[0])&&n==Number(o[1])&&(t=!0)),t?LIM.poneravaliacion(d,I.properties.mensaben,!0,I.properties.ffinal,I.num):LIM.poneravaliacion(d,I.properties.mensamal,!1,I.properties.ffinal,I.num)}),(a=document.createElement("div")).setAttribute("class","clfrac-cim"),n&&((p=document.createElement("img")).setAttribute("src",n),p.setAttribute("class","clim-adx"),p.setAttribute("alt",i),a.appendChild(p)),d.appendChild(a);var h=LIM.creardom("div",d,"","");switch(i=c/2+1,l){case"+":var g=Number(o[0])*Number(o[3])+Number(o[1])*Number(o[2]),b=Number(o[1])*Number(o[3]);e(74,h,c),t(i,74,h);break;case"-":g=Number(o[0])*Number(o[3])-Number(o[1])*Number(o[2]),b=Number(o[1])*Number(o[3]),e(74,h,c),t(i,74,h);break;case"x":g=Number(o[0])*Number(o[2]),b=Number(o[1])*Number(o[3]),e(74,h,c),t(i,74,h);break;case"/":g=Number(o[0])*Number(o[3]),b=Number(o[1])*Number(o[2]),e(74,h,c),t(i,74,h);break;case"=":g=Number(o[0])/Number(o[1]),(b=Number(o[1])/Number(o[2]))<g&&(f="<"),g<b&&(f=">"),e(74,h,c);break;case"r":if(""==n){"1"==o[1]&&(o[1]="2"),n=Number(o[0]),c=Number(o[1]);var x=n;if((p=c)<n){for(var M=parseInt(n/c),L=0;L<M;L++){var y=LIM.creardom("div",a,"","clfrac-en");y.innerHTML="u"}LIM.creardom("p",a,"","clfrac-l"),x=n%c}for(L=0;L<x;L++)y=LIM.creardom("div",a,"","clfrac-pt clfrac-sel");for(L=0;L<p-x;L++)y=LIM.creardom("div",a,"","clfrac-pt")}t(i-2,74,h);break;case"p":if("1"==o[1]&&(o[1]="2"),""==n){if(n=Number(o[0]),(p=c=Number(o[1]))<(x=n)){for(M=parseInt(n/c),L=0;L<M;L++)(y=LIM.creardom("div",a,"","clfrac-en")).innerHTML="u";LIM.creardom("p",a,"","clfrac-l"),x=n%c}for(L=0;L<p;L++)(y=LIM.creardom("div",a,"","clfrac-pt")).addEventListener("click",function(){this.classList.toggle("clfrac-sel")})}e(74,h,2)}h.className="clfrac-base"}}function frases(f){this.crear=function(){var e=f.properties.imaxes||[],t=f.properties.textos||[],n=f.properties.respuestas||[],r=f.properties.sons||[],i=f.properties.modo||0;if(e=LIM.addrecu(e),r=LIM.addrecu(r),1==i&&(t=n),0<e.length)var a=e.length;else 0<n.length&&(a=n.length);var o=e.length,s=LIM.crearbase(f),l=LIM.paxina();null==f.donde&&LIM.comunes(s,f.properties.txcabe,f.properties.txpe,f.properties.ison,f.properties.autoson,f.properties.txliga,f.properties.paxliga),1!=i&&LIM.addEventSimple(LIM.esactividad(s,!0),"click",function(){for(var e,t=!0,r=0;r<a;r++)c[r].value==n[r]?e="1px":t=!(e="5px"),c[r].style="border-width:"+e;t?LIM.poneravaliacion(s,f.properties.mensaben,!0,f.properties.ffinal,f.num):LIM.poneravaliacion(s,f.properties.mensamal,!1,f.properties.ffinal,f.num)}),(o=Array(o)).fill(0)||o.join("0").split("").map(parseFloat);for(var c=[],p=LIM.creardom("div",s,l+"frsb","clfrase-base"),d=0;d<a;d++){if(LIM.nozero(e[d])){var m=LIM.creardom("button",p,d+"frst"+l,"clfrase-im");m.style="background-image: url("+e[d]+");"}else(m=LIM.creardom("button",p,d+"frst"+l,"clfrase-txt")).innerHTML=t[d];if(1==i){var u=LIM.creardom("button",p,d+"frsin"+l,"clfrase-ver");u.innerHTML=t[d],u.setAttribute("readonly","readonly")}else u=LIM.crearinput({pai:p,name:d+"frsin"+l,cssclass:"clfrase-input",pholder:f.properties.pholder});c[d]=u,o[0]=0,LIM.nozero(r[d])&&(m.style.cursor="pointer",t[d]||(m.innerHTML="&#9654"),LIM.addEventSimple(m,"click",function(){var e=parseInt(this.id);r[e]&&LIM.sonar(r[e])}))}}}function galeriaimx(v){var g={textos:[],imaxgr:[],imaxes:[],imaxeAltText:[],sons:[],mensaben:"",mensamal:""},b=new Audio;b.preload="auto",g=LIM.qhtml(v.donde,g),this.crear=function(){function e(){var e=parseInt(this.id);document.getElementById("vista362892").style.display="block",document.getElementById("btvx").focus(),document.getElementById("vistatexto").innerHTML=a[e]||"";var t=LIM.tcontido(s[e]),r=document.getElementById("vistaimaxe");"s"==t?LIM.crearswf(r,"",s[e],"clgal-imgrande",0,0,360,300,""):"v"==t?(t=LIM.crearvid(r,"",s[e],"clgal-imgrande",0,0,360,300,"")).style.border="solid 1px #cccccc":r.innerHTML="i"==t?'<img src="'+s[e]+'" class="clgal-imgrande" title="">':s[e],LIM.nozero(l[e])&&(b.src=l[e],b.play())}v=LIM.prc(g,v);var t=LIM.crearbase(v);if(v.properties.etiquetas)for(var r=v.properties.etiquetas.length,n=Array(r),i=[],a=[],o=[],s=[],l=[],c=0;c<r;c++)i=v.properties.etiquetas[c].split("||"),o[c]=i[0],s[c]=i[1],l[c]=i[2],a[c]=i[3];else r=v.properties.imaxes.length,a=v.properties.textos||[],o=v.properties.imaxes||[],s=v.properties.imaxgr||[],l=v.properties.sons||[];c=0;var p="gal"+(i=v.paxina),d=null,m=!1;i=LIM.paxina(),null==v.donde&&LIM.comunes(t,v.txcabe,v.txpe,v.properties.ison,v.properties.autoson,v.properties.txliga,v.properties.paxliga);var u=document.createElement("div");for(u.setAttribute("class","clgal-b"),t.appendChild(u),t="",c=0;c<r;c++){m=!1;var f=LIM.creardom("button",u,c+p,"clgal-base",-1,-1);n[c]=f,d=LIM.creardom("div",f,"","clgal-cimax",-1,-1);var h=document.createElement("img");h.setAttribute("class","clgal-imaxe"),h.setAttribute("id",c+"gimx"+i),h.setAttribute("src",o[c]),t&&h.setAttribute("title",t),d.appendChild(h),null!=s[c]&&""!=s[c]||(s[c]=o[c]),m?LIM.addEventSimple(f,"click",function(){var e=parseInt(this.id);LIM.salto(a[e].split("|")[1])}):LIM.addEventSimple(f,"click",e),LIM.nozero(a[c])&&(d=LIM.creardom("div",f,"","clgal-texto",0,0),(t=a[c].split("|")[0])&&(d.innerHTML=t),null!=a[c].split("|")[1]&&(m=!0))}void 0!==document.getElementById("vista362892")&&((r=document.createElement("div")).setAttribute("class","clgal-big"),r.setAttribute("id","vista362892"),document.body.appendChild(r),LIM.creardom("div",r,"vistatexto","clgal-bigtx"),LIM.creardom("div",r,"vistaimaxe","clgal-bigim"),(r=LIM.creardom("button",r,"btvx","clgal-bigx")).innerHTML="X",r.setAttribute("title",LIM.td("Cerrar"))),LIM.addEventSimple(document.getElementById("btvx"),"click",function(){this.parentNode.style.display="none",document.getElementById("vistaimaxe").innerHTML="",b.pause(),b.currentTime=0})}}function galeriasons(f){var h={textos:[],imaxes:[],imaxeAltText:[],sons:[]};h=LIM.qhtml(f.donde,h),this.crear=function(){function t(e){p[parseInt(e.id)]&&(a.src=p[parseInt(e.id)],a.play())}f=LIM.prc(h,f);var e=LIM.crearbase(f),r=LIM.paxina(),n=0,i="gals"+r,a=null,o="";if(f.properties.etiquetas){var s=f.properties.etiquetas.length;o=[];var l=[],c=[],p=[];for(n=0;n<s;n++)o=f.properties.etiquetas[n].split("||"),p[n]=o[0],c[n]=o[1],l[n]=o[2]}else s=f.properties.sons.length,l=f.properties.textos||[],c=f.properties.imaxes||[],p=f.properties.sons||[];null==f.donde&&LIM.comunes(e,f.properties.txcabe,f.properties.txpe,f.properties.ison,f.properties.autoson,f.properties.txliga,f.properties.paxliga),(a=LIM.creardom("audio",e,"","clson-au")).src="",a.controls=!0,LIM.creardom("p",e,"","");var d=document.createElement("div");d.setAttribute("class","clgal-b"),e.appendChild(d);var m="";for(n=0;n<s;n++){if(o="",e=LIM.creardom("button",d,n+i,"clson-base0"),f.properties.modo<3){if(c[n]){var u=LIM.creardom("div",e,"","clgal-cimax",-1,-1);gobjix=document.createElement("img"),gobjix.setAttribute("class","clgal-imaxe"),gobjix.setAttribute("id",n+"simx"+r),gobjix.setAttribute("src",c[n]),m&&gobjix.setAttribute("title",m),u.appendChild(gobjix)}}else e.className="clson-base1",f.properties.imaxes[n]&&(u=LIM.creardom("div",e,"","clgal-cim",-1,-1),gobjix=document.createElement("img"),gobjix.setAttribute("class","clgal-imaxe"),gobjix.setAttribute("id",n+"simx"+r),gobjix.setAttribute("src",c[n]),m&&gobjix.setAttribute("title",m),u.appendChild(gobjix));l[n]&&(u=LIM.creardom("div",e,"","clgal-texto",-1,-1),(m=l[n].split("|")[0])&&(u.innerHTML=m),null!=l[n].split("|")[1]&&(o=l[n].split("|")[1])),""!=o?LIM.addEventSimple(e,"click",function(){t(this);var e=parseInt(this.id);LIM.salto(l[e].split("|")[1])}):LIM.addEventSimple(e,"click",function(){t(this)})}}}function identificarimx(y){var I={imaxes:[],alttext:[],textos:[],sons:[],color:""};I=LIM.qhtml(y.donde,I),this.crear=function(){function e(e){e=parseInt(this.id),LIM.sonar(h[e])}function t(e,t,r){for(var n=parseInt(e.id),i=u[n]=0;i<m;i++){var a=s[i];u[n]=0,LIM.ratosobre(e,a,t,r,!1)&&(a.style.height=e.offsetHeight+"px","3"==o?c[n]==f[i]&&(u[n]=1,i=m):e.innerHTML==f[i]&&(u[n]=1,i=m))}-1==u.toString().indexOf(0)&&LIM.poneravaliacion(d,y.properties.mensaben,!0,y.properties.ffinal,y.num)}var o=(y=LIM.prc(I,y)).properties.modo||"2",r=y.properties.pholder||"";if(y.properties.etiquetas)for(var n=y.properties.etiquetas.length,s=Array(n),i=[],a=[],l=[],c=[],p=0;p<n;p++)arretq=y.properties.etiquetas[p].split("||"),a[p]=arretq[0],c[p]=arretq[1],i[p]=arretq[2]||"",l[p]=arretq[3]||"";else i=y.properties.textos||[],c=y.properties.sons||[],a=y.properties.imaxes||[],l=y.properties.alttext||[];var d=LIM.crearbase(y),m="3"!=o?i.length:c.length;n=LIM.paxina();var u=Array(m);s=Array(m);var f=Array(m),h=Array(m),v=mh=p=0,g="";null==y.donde&&LIM.comunes(d,y.txcabe,y.txpe,y.properties.ison,y.properties.autoson,y.properties.txliga,y.properties.paxliga),LIM.addEventSimple(LIM.esactividad(d,!0),"click",function(){var e=!0;if("1"!=o)-1<u.toString().indexOf(0)&&(e=!1);else for(var t=0;t<s.length;t++)s[t].value.toLowerCase()!=f[t]&&(e=!1);return e?LIM.poneravaliacion(d,y.properties.mensaben,!0,y.properties.ffinal,y.num):LIM.poneravaliacion(d,y.properties.mensamal,!1,y.properties.ffinal,y.num),!0});var b=LIM.desordena(m),x="cliden-base";if("3"==o){for(p=0;p<m;p++){var M=LIM.creardom("div",d,p+"igal"+n,"cliden-destim",-1,-1);s[p]=M,c[p]&&(h[p]=c[p],LIM.addEventSimple(M,"click",e),M.style.cursor="pointer"),x="cliden-mov"}for(M=LIM.creardom("div",d,"",""),i=LIM.creardom("div",d,"","cliden-rmov"),p=0;p<m;p++){netq=b[p],M=LIM.creardom("div",i,netq+"igalm"+n,x,-1,-1),g=LIM.creardom("div",M,"","cliden-imaxe",-1,-1);var L=LIM.crearimaxe({pai:g,name:netq+"iimx"+n,cssclass:"",posx:1,posy:1,alttext:l});f[p]=c[p],a[netq]&&(LIM.cargaimaxe(L,a[netq],238,156,"",!0,!0),u[p]=0,LIM.drag(M,d,t))}}else{for(p=0;p<m;p++)netq=b[p],M=LIM.creardom("div",d,"","cliden-base",-1,-1),g=LIM.creardom("div",M,netq+"igal"+n,"cliden-imaxe",-1,-1),s[netq]=g,L=LIM.crearimaxe({pai:g,name:netq+"iimx"+n,cssclass:"",posx:1,posy:1,alttext:l}),a[netq]?LIM.cargaimaxe(L,a[netq],238,156,"",!0,!0):g.innerHTML="<span>?</span>",c[netq]&&(h[netq]=c[netq],LIM.addEventSimple(g,"click",e),L.style.cursor="pointer"),"2"==o?(g=LIM.creardom("div",M,netq+"txt"+n,"cliden-dest",-1,-1)).innerHTML="":"1"==o&&(g=LIM.crearinput({pai:M,cssclass:"cliden-in",pholder:r}),f[netq]=i[netq].toLowerCase()),s[netq]=g;if("2"==o){for(M=LIM.creardom("div",d,"","cliden-betiq",-1,-1),p=0;p<m;p++)a=LIM.creardom("div",M,p+"ietiq"+n,"cliden-etiq",-1,-1),g=i[p]||"","i"==LIM.tcontido(g)?(g='<img class="cladx-im" src="'+i[p]+'" />',v=152,a.style.height=150..toString()+"px"):g=i[p],a.innerHTML=g,netq=b[p],f[p]=a.innerHTML,LIM.drag(a,d,t),u[p]=0,mh=a.offsetHeight,mh>v&&(v=mh);for(M.style.display="none",p=0;p<m;p++)s[p].style.height=v+"px";M.style.display="block"}}}}function imaxetexto(i){var a={texto:"",cfondo:"",ctexto:""};a=LIM.qhtml(i.donde,a),this.crear=function(){i=LIM.prc(a,i);var e=LIM.crearbase(i);document.createElement("div");var t=e.getElementsByTagName("font"),r="100",n="100";e.getElementsByClassName("cltexto-tx")[0]&&(r=e.getElementsByClassName("cltexto-tx")[0].offsetHeight),e.getElementsByTagName("img")[0]&&e.getElementsByTagName("img")[0].addEventListener("load",function(){n=e.getElementsByTagName("img")[0].offsetHeight,e.style.minHeight=n<r?r+"px":n+"px"},!1),e.style.height=n<r?r+"px":n+"px",t&&LIM.cambiafont(t)}}function letras(w){var S={};this.crear=function(){function e(e,t,r){var n=parseInt(e.id);u[n]&&(u[n].innerHTML=" "),u[n]=200,e.style.visibility="hidden",t=document.elementFromPoint(t,r),parseInt(t.id),e.style.visibility="visible","clletras-letra"==t.className?(e.style.position="absolute",(u[n]=t).innerHTML=e.innerHTML,e.style.left=t.style.left,e.style.top=t.style.top):e.style.top="0px"}var t,r=(w=LIM.prc(S,w)).properties.palabras||[""],n=w.properties.imaxes||[],i=w.properties.altimaxes||[""],a=w.properties.sons||[""],o=w.properties.texto||"",s=w.properties.letras||"",l=LIM.crearbase(w),c=LIM.paxina(),p=20,d=20,m="ltr"+c,u=[],f=t="",h="",v=!1,g="",b=0;LIM.addEventSimple(LIM.esactividad(l,!0),"click",function(){for(var e="",t=y.querySelectorAll(".clletras-letra"),r=0;r<t.length;r++)e+=t[r].innerHTML;h==e?LIM.poneravaliacion(l,w.properties.mensaben,!0,w.properties.ffinal,w.num):LIM.poneravaliacion(l,w.properties.mensamal,!1,w.properties.ffinal,w.num)});var x=100;v=LIM.creardom("div",l,"","clletras-b");var M=r.length,L=0;if(""!=o){var y=LIM.creardom("div",v,"","clletras-txt");y.innerHTML=o,d+=10}for(y=LIM.creardom("div",v,"","clletras-base"),o=0;o<M;o++){if(p=20,f="",-1<(t=r[o]).indexOf("_")){for(v=!0,f=t.split("_"),p=1;p<f.length;p++)g+=f[p][0],f[p]=f[p].substring(1);f=f.join(" "),t=t.replace(RegExp("_","g"),""),r[o]=t}else v=!1,g+=t;h+=t;var I=document.createElement("div");I.setAttribute("class","clletras-cim"),I.setAttribute("id",o+"bltr"+c),n[o]&&((p=document.createElement("img")).setAttribute("src",n[o]),p.setAttribute("class","clletras-im"),p.setAttribute("alt",i[o]),I.appendChild(p)),y.appendChild(I),p=190,a[o]&&(LIM.addEventSimple(I,"click",function(){var e=parseInt(this.id);LIM.sonar(a[e])}),I.style.cursor="pointer"),I=t.length;for(var N=0;N<I;N++)(t=document.createElement("div")).setAttribute("id",L+m),t.setAttribute("class","clletras-letra"),y.appendChild(t),0==N&&(p=t.offsetWidth),b=190+p*N,v&&(t.innerHTML=f[N]," "!=f[N]&&t.setAttribute("class","clletras-letra clletras-fx")),t.style.left=b+"px",t.style.top=d+"px",L++;d+=130,x<(b=b+p+20)&&(x=b)}for(l.style.width=x+"px",m="ltrd"+c,v=LIM.creardom("span",y,"","clletras-mar"),r=g,s&&(r+=s),I=r.length,s=LIM.desordena(I),N=0;N<I;N++)(t=LIM.creardom("div",y,N+m,"clletras-drag")).innerHTML=r[s[N]],u[s[N]]=null,LIM.drag(t,l,e)}}function liga(f){this.crear=function(){function e(e,t){for(a=0;a<p;a++){var r=LIM.crearlink({pai:u,url:"javascript:LIM.salto('"+i[a]+"')",posx:o[a],posy:s[a],text:n[a],cssclass:t,alttext:n[a]});e&&(r.style.backgroundImage="url("+l+")")}}var n=f.properties.liga,i=f.properties.ir,o=f.properties.posx,s=f.properties.posy,t=f.properties.imaxe||"",r=f.properties.altimaxe||"",l=f.properties.forma||"",c=f.properties.modo||"0",p=i.length,d=LIM.crearbase(f),m=LIM.paxina(),u=LIM.creardom("div",d,"","clliga-base");if("$"==n[0])LIM.poncondicion(m,i[0].replace(/ /g,""));else if("1"==c)for(a=0;a<p;a++)LIM.crearlink({pai:u,url:"javascript:LIM.salto('"+i[a]+"')",text:n[a],cssclass:"clliga-boton",alttext:n[a]});else f.properties.texto&&(LIM.creardom("div",d,"","clliga-text",10,5).innerHTML=f.properties.texto),""!=t&&((c=document.createElement("IMG")).src=t,c.className="clliga-im",c.title=r,u.appendChild(c)),l?((t=new Image).src=l,t.onload=function(){e(1,"clliga-bti")}):e(0,"clliga-bt clliga-sty")}}function listas(p){var d={};d=LIM.qhtml(p.donde,d),this.crear=function(){function e(){for(var e=s.getElementsByClassName("cllist-sel"),t=[],r=0;r<e.length;r++)t.push(e[r].innerHTML);LIM.compara(a,t)?LIM.poneravaliacion(s,p.properties.mensaben,!0,p.properties.ffinal,p.num):LIM.poneravaliacion(s,p.properties.mensamal,!1,p.properties.ffinal,p.num)}var t=(p=LIM.prc(d,p)).properties.texto||"",r=p.properties.aspecto||"cllist-s",n=p.properties.etiquetas||[],i=null;if(n[0]){var a=n[0].split("|");i=[""],n[1]&&(i=n[1].split("|"));var o=a.length;n=a.concat(i);var s=LIM.crearbase(p);LIM.paxina(),LIM.addEventSimple(LIM.esactividad(s,!0),"click",e),""!=t&&(i=null,(i=12<t.length?LIM.creardom("div",s,"",r+" cllist-mdd"):LIM.creardom("div",s,"",r+" cllist-md")).innerHTML=t),t=LIM.desordena(n.length);for(var l=n.length,c=0;c<l;c++)(i=LIM.creardom("div",s,"",r+" cllist-gl")).innerHTML=n[t[c]],LIM.addEventSimple(i,"click",function(){this.classList.toggle("cllist-sel"),1==o&&e()})}}}function medidas(x){var M={};this.crear=function(){function e(e){var t=e.target;"clmed-c"!=t.className&&(t=e.target.parentNode),e=parseInt(t.id),(t=document.createElement("img")).className=c[e].toString()+" clmed-dr",t.src=d[e],t.title=m[e],t.valor=c[e],g.appendChild(t),LIM.drag(t,g.parentNode,r),h+=c[e],LIM.addEventSimple(t,"dblclick",n)}function r(e,t,r){t=Number(e.className.replace(/[^0-9.]/g,"")),LIM.estasobre(e,b)&&(h-=Number(t),e.parentNode.removeChild(e))}function n(e){e=e.target;var t=Number(e.className.replace(/[^0-9.]/g,""));h-=Number(t),e.parentNode.removeChild(e)}selecciona=LIM.prc(M,x);for(var t=x.properties.imaxe||"",i=x.properties.texto||"",a=x.properties.altimaxe||"",o=x.properties.etiquetas||[],s=Number((x.properties.valor||"5").replace(",",".")),l=[],c=[],p=[],d=[],m=[],u=o.length,f="",h=0,v=0;v<u;v++)f=(l=o[v].split("||"))[0]||"1",c[v]=Number(f.replace(",",".")),p[v]=l[1]||"",d[v]=l[2]||"",m[v]=l[3]||"";var g=LIM.crearbase(x);o=LIM.paxina(),LIM.addEventSimple(LIM.esactividad(g,!0),"click",function(){s==h?LIM.poneravaliacion(g,x.properties.mensaben,!0,x.properties.ffinal,x.num):LIM.poneravaliacion(g,x.properties.mensamal,!1,x.properties.ffinal,x.num)}),""!=i&&((l=LIM.creardom("span",g,"","clmed-s")).innerHTML=i),""!=t?((v=document.createElement("img")).className="clmed-b clmed-bi",v.src=t,v.title=a):(v=document.createElement("div")).className="clmed-b",g.appendChild(v);var b=LIM.creardom("div",g,"","clmed-m");for(v=0;v<u;v++)t=LIM.creardom("div",b,v.toString()+"med"+o.toString(),"clmed-c",0,0),(a=LIM.crearimaxe({pai:t,cssclass:"clmed-i",alttext:m[v]})).style.visibility="hidden",LIM.cargaimaxe(a,d[v],144,96,"",!0,!0),""!=p[v]&&((l=LIM.creardom("span",t,"","clmed-t")).innerHTML=p[v]),LIM.addEventSimple(t,"click",e);LIM.creardom("div",b,"","clmed-d")}}function memoria(m){this.crear=function(){function r(e){for(var t=0;t<25;t++)1==e&&1==c[t]&&(p[t].parentNode.className="clmem-cadro clmem-ben"),p[t].style.visibility="hidden"}var e=m.properties.imaxes||["",""],t=Number(m.properties.numero)||5,i=m.properties.forma||"0",n=m.properties.alea||"0",a=m.properties.altimaxe||"",o=e[0],s=LIM.crearbase(m),l=LIM.paxina();24<t&&(t=20),"1"==n&&(t=Math.floor(Math.random()*t+1)),(n=Array(t)).fill(e[0]),(t=Array(25-t)).fill(e[1]),imaxes=t.concat(n);var c=Array(25);c.fill(0);var p=Array(25);LIM.addEventSimple(LIM.esactividad(s,!0),"click",function(e){e=!0;for(var t=0;t<25;t++)1==c[t]?"clmem-tapa clmem-sel"!=p[t].className&&(e=!1):0==c[t]&&"clmem-tapa clmem-sel"==p[t].className&&(e=!1);e?(r(1),LIM.poneravaliacion(s,m.properties.mensaben,!0,m.properties.ffinal,m.num)):LIM.poneravaliacion(s,m.properties.mensamal,!1,m.properties.ffinal,m.num)});function d(e,t,r,n){return r=t+"mem"+r,(e=document.createElement("div")).className="clmem-cadro",e.id=r,s.appendChild(e),self=this,LIM.crearimaxe({pai:e,cssclass:"clmem-im",alttext:""}).src=n,(n=document.createElement("div")).className="clmem-tapa",e.appendChild(n),"1"==i&&(n.innerHTML=t.toString()),LIM.addEventSimple(n,"click",function(){this.className="clmem-tapa clmem-sel"==this.className?"clmem-tapa":"clmem-tapa clmem-sel"}),n}e=LIM.creardom("div",s,"","clmem-cadro clmem-mod"),a=LIM.crearimaxe({pai:e,alttext:a}),LIM.cargaimaxe(a,o,104,104,"",!0,!0),LIM.addEventSimple(a.parentNode,"mousedown",function(){r(0)}),LIM.addEventSimple(a.parentNode,"mouseleave",function(){for(var e=0;e<25;e++)p[e].style.visibility="visible",p[e].className="clmem-tapa"}),function(){for(var e,t=LIM.desordena(25),r=0;r<25;r++)e=t[r],imaxes[e]==o&&(c[r]=1),p[r]=new d(s,r+1,l,imaxes[e])}()}}function menu(s){var l={};l=LIM.qhtml(s.donde,l),this.crear=function(){var e=(s=LIM.prc(l,s)).properties.ctexto||"",t=s.properties.cfondo||"",r=LIM.crearbase(s),n=r.querySelector(".clmenu-base");if(n){var i=document.createElement("DIV");i.className="clmenu-tabcontent",n.appendChild(i);var a=r.querySelector(".clmenu-tab");n=a.querySelectorAll(".clmenu-bottab"),a.querySelectorAll(".clmenu-contenttab");var o=n[0];for(o.classList.add("clmenu-selected"),i.innerHTML=n[0].parentNode.querySelector(".clmenu-contenttab").innerHTML,a=0;a<n.length;a++)""!=e&&(n[a].style.color="#"+e),""!=t&&(n[a].style.backgroundColor="#"+t),n[a].addEventListener("click",function(e){i.innerHTML=this.parentNode.querySelector(".clmenu-contenttab").innerHTML,o.classList.remove("clmenu-selected"),this.classList.add("clmenu-selected"),o=this})}(e=r.getElementsByTagName("font"))&&LIM.cambiafont(e)}}function moverimx(b){var x={};x=LIM.qhtml(b.donde,x),this.crear=function(){function e(e,t,r){if(f++,e.style.zIndex=f,t=parseInt(e.id),"2"==b.properties.modo)for(r=0;r<p;r++)LIM.estasobre(e,u[r],!0)?(m[t]=1,r=p,-1==m.toString().indexOf(0)&&LIM.poneravaliacion(d,b.properties.mensaben,!0,b.properties.ffinal,b.num)):m[t]=a[t]==g?1:0;else LIM.estasobre(e,u[t],!0)?-(m[t]=1)==m.toString().indexOf(0)&&LIM.poneravaliacion(d,b.properties.mensaben,!0,b.properties.ffinal,b.num):m[t]=0}x=LIM.prc(x,b);for(var t=b.properties.modo||"1",r=b.properties.imaxe||"",n=[],i=[],a=[],o=[],s=[],l=b.properties.etiquetas.length,c=0;c<l;c++)n=b.properties.etiquetas[c].split("||"),i[c]=n[0]||"",a[c]=n[1]||0,o[c]=n[2]||0,s[c]=n[3]||"",o[c]=Number(o[c])+20;var p=i.length,d=LIM.crearbase(b);n=LIM.paxina();var m=Array(p),u=Array(p);c=0;var f=1100;if(""!=r){null==b.donde&&LIM.comunes(d,b.txcabe,b.txpe,b.properties.ison,b.properties.autoson,b.properties.txliga,b.properties.paxliga),"3"!=t&&LIM.addEventSimple(LIM.esactividad(d,!0),"click",function(){return-1<m.toString().indexOf(0)?LIM.poneravaliacion(d,b.properties.mensamal,!1,b.properties.ffinal,b.num):LIM.poneravaliacion(d,b.properties.mensaben,!0,b.properties.ffinal,b.num),!0}),t=LIM.desordena(p);var h=0,v=void 0;h=null;var g=630;for(l=LIM.creardom("div",d,"","clcol1"),(c=LIM.crearimaxe({pai:l,name:"imaxmove"+n,cssclass:"",posx:1,posy:1,alttext:b.properties.alttext})).src=r,c.style.top="20px",c.style.position="relative",r=LIM.creardom("div",d,"","clmovimx-marco"),c=0;c<p;c++)h=t[c],v=LIM.creardom("div",l,c+"punto"+n,"clmovimx-punto",Number(a[c]),Number(o[c])),u[c]=v,"1"!=b.properties.modo&&(v.style.opacity="0.0",v.style.filter="alpha(opacity=0)"),h=LIM.crearimaxe({pai:r,name:c+"imx"+n,cssclass:"",posy:50*h,alttext:s}),LIM.cargaimaxe(h,i[c],500,500,"",!1,!1),LIM.drag(h,d,e),m[c]=0,a[c]==g&&(m[c]=1)}}}function opbasica(S){var E={};E=LIM.qhtml(S.donde,E);var C=this;C.numf=0,this.crear=function(){function e(e,t,r,i,a,o,s,l,c,p){t="",s=null,c&&"l"!=c&&(e=c+" "+e);var d=e.length+1,m="";for(C.numf=r,LIM.creardom("div",g,"","clopera-s",-1,-1),(r=document.createElement("div")).setAttribute("class","clopera-l"),g.appendChild(r),c&&(r.style.borderBottomWidth="8px"),n=1;n<d;n++)m=e.substr(-n,1),a?("."!=m&&("1"==v?s="$"==m?LIM.creardom("div",r,"","clopera-cn clopera-n",-1,-1):LIM.crearinput({pai:r,cssclass:"clopera-cn clopera-i",pholder:" "}):(s=LIM.crearinput({pai:r,cssclass:"clopera-cn clopera-i",pholder:" "}),p&&m&&(s.style.borderColor="red")),"$"==m&&(m=""),s.addEventListener("click",function(){this.value=""})),u?s.setAttribute("maxlength",2):s.setAttribute("maxlength",1)):s=LIM.creardom("div",r,"","clopera-cn clopera-n",-1,-1),"oo"!=m&&(t="."==m?1==o?I:"":(1==l&&(s.dd=!0,s.let=m+t,s.cssstyleName="txop dest","1"==C.modo&&(s.onclick=function(){C.innerHTML=""}),"2"==C.modo&&(s.onPress=function(){})),1==a?(" "==m&&(m=""),h.push(m+t),f.push(s)):s.innerHTML=m+t,"x"!=m&&"+"!=m&&"-"!=m||(s.onPress=function(){})," "==m&&(m=""),""))," "==m&&(m=""),y[N]=m+t,N++;g.style.minWidth=g.offsetWidth+"px",g.style.Height=g.offsetHeight+"px"}function r(e){var t=parseInt(e);return String(t)}function i(e,t){for(var r="1",n=0;n<t;n++)r+="0";return r=Number(r),e==parseInt(e)?e/r:parseInt(e*r)/r}function a(e,t,r){var n=y.length,i=parseInt(e.id);for(e.style.top="380px",e.style.left=LIM.dom(i+"cadr").style.left,i=0;i<n;i++){var a=LIM.dom(i+"dst");if(LIM.ratosobre(e,a,t,r,!1)&&"txop dest"==a.cssstyleName){a.innerHTML=e.innerHTML;break}}}var u=!1,f=[],h=[];E=LIM.prc(E,S);var o=S.properties.forma||"+",s=S.properties.numeros||[""],l=S.properties.alea||"0",v=S.properties.estilo||"0",p=LIM.crearbase(S);LIM.paxina(),LIM.addEventSimple(LIM.esactividad(p,!0),"click",function(){for(var e=!0,t=f.length,r=0;r<t;r++)f[r].value!=h[r]?(f[r].value&&(f[r].style.backgroundColor="#cccccc"),e=!1):f[r].style.backgroundColor="#ffffff";e?LIM.poneravaliacion(p,S.properties.mensaben,!0,S.properties.ffinal,S.num):LIM.poneravaliacion(p,S.properties.mensamal,!1,S.properties.ffinal,S.num)});var d=LIM.creardom("div",p,"","clopera-base",-1,-1),g=LIM.creardom("div",d,"","clopera-marco",-1,-1);"1"==l&&(resalea=function(e,t){var r=0,n=[],i=0,a=0,o=Number(e[0]);10<o&&(o=10);var s=Number(e[1]);10<s&&(s=10);var l,c,p,d,m=Math.pow(10,o)-1,u=Math.pow(10,o-1);switch(m=(a=(r=Math.floor(Math.random()*(m-u+1))+u).toString()).length-1,n[0]=a,u="",t){case"0":for(i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;if(0==i&&(i=1),n[1]=i.toString(),e[2]){for(s=Number(e[2]),i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;0==i&&(i=1),n[2]=i.toString()}if(e[3]){for(s=Number(e[3]),i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;0==i&&(i=1),n[3]=i.toString()}u="+";break;case"1":for(i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;1==s&&0==i&&(i=1),i<r?n[1]=i.toString():(n[0]=i.toString(),n[1]=a),u="-";break;case"2":for(i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;n[1]=i.toString(),u="x";break;case"3":if(i=0,o!=s)for(m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;else for(;0==i;)i=Math.floor(9*Math.random())+1;a<i?(n[1]=a.toString(),n[0]=i.toString()):n[1]=i.toString(),u="/";break;case"4":for(s=m;-1<s;s--)i+=Math.pow(10,s)*(c=Number(a.charAt(m-s)),p=9,d=0,Math.floor(Math.random()*(p-c-d+1))+d);0==i&&(--r<(i=1)&&(r=8)),a=r.toString(),n[0]=a,n[1]=i.toString(),u="+";break;case"5":for(s=m;-1<s;s--)posn=m-s,i+=Math.pow(10,s)*(0==(l=Number(a.charAt(m-s)))?0:Math.floor(Math.random()*l));0==i&&(9<(r+=i=1)&&(r=9)),a=r.toString(),n[0]=a,n[1]=i.toString(),u="-";break;case"7":if(s<=o){for(r=i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==r;)r=Math.floor(Math.random()*(m-u+1))+u;if(o!=s)for(m=Math.pow(10,o-s)-1,u=Math.pow(10,o-s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;else for(a=(r*(i=Math.floor(9*Math.random())+1)).toString().length;s<a;)a=(r*--i).toString().length;n[0]=(r*i).toString(),n[1]=r.toString(),u="/"}break;case"8":if(i=0,o!=s)for(m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;else for(;0==i;)i=Math.floor(9*Math.random())+1;a<i?(n[1]=a.toString(),n[0]=i.toString()):n[1]=i.toString(),u="d";break;case"9":if(s<=o){for(r=i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==r;)r=Math.floor(Math.random()*(m-u+1))+u;if(o!=s)for(m=Math.pow(10,o-s)-1,u=Math.pow(10,o-s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;else for(a=(r*(i=Math.floor(9*Math.random())+1)).toString().length;s<a;)a=(r*--i).toString().length;n[0]=(r*i).toString(),n[1]=r.toString(),u="d"}break;case"6":for(i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;n[1]=i.toString(),"0"==n[1].slice(-1)&&(n[1]=(i+1).toString()),u="x"}return(r={}).nume=n,r.opera=u,r}(s,o),s=resalea.nume,o=resalea.opera);var m=0,b=0,x="",M=1;b=s.length;var L=380,y=[],I=".",N=0;for(l=0;l<b;l++)-1<(m=parseInt(Number(s[l])).toString()).indexOf(",")&&(s[l]=Number(m.replace(",",".")),I=",");switch(l="",o){case"x":l=s[0],b=s[1];var w=(Number(l)*Number(b)).toString().length;if(e(l,(L+=18*Number((l*b).toString().length))-42,1,0,C.tdocl,1,C.tdocl,C.tdocl,""),e(b,L-42,2,0,C.tdocl,1,C.tdocl,C.tdocl,"x"),1<b.length){for(c=0,sin="";c<l.length;)"."!=l.substr(c,1)&&(sin+=l.substr(c,1)),c++;for(c=0,sin2="";c<b.length;)"."!=b.substr(c,1)&&(sin2+=b.substr(c,1)),c++}else sin=l,sin2=b;if(tempnum=lnf=0,long=sin2.length,"0"==b.substr(0,1)){for(t=tnum=1;t<sin2.length;t++)"0"==sin2.substr(t,1)?tnum++:t=sin2.length;long-=tnum,1==long&&(long=0)}if(1==long)lnf++,m=Number(l)*Number(b),pasar=m.toString(),e(pasar,L-42*M,lnf+2,0,1,1,1,1,"");else for(t=1;t<long+1;t++){if(o=s="",lnf++,0==(m=Number(sin)*Number(sin2.substr(-t,1))))for(pasar="",m=0;m<l.length;m++)pasar+="0";else pasar=m.toString();for(m=1;m<t;m++)s+="$";if(pasar+=s,pasar.length<w)for(m=pasar.length;m<w;m++)o+="$";t==long?e(o+pasar,L-42*M,lnf+2,0,1,1,1,1,"l",!0):e(o+pasar,L-42*M,lnf+2,0,1,1,1,1,"",!0),M=M+x.length+1,x=""}if(lnf++,-1<(m=(Number(l)*Number(b)).toString()).indexOf(".")&&(u=!0),M=sin*sin2,x=m.indexOf("."),c=M.toString().length-m.length,-1!=x&&(c+=1),-1!=l.toString().indexOf(".")||-1!=b.toString().indexOf("."))for(-1==x&&(m+="."),t0=0;t0<c;t0++)m+="0";1<sin2.length&&e(m,L-42,lnf+2,0,1,1,1,1);break;case"/":if(Number(s[0])<Number(s[1])&&s[0].length<=s[1].length)for(t=1;t<=s[1].length;t++)s[0]+=".0";if(b=435+42*s[1].length,e(s[1],b,1,0,C.tdocl,1,C.tdocl,C.tdocl),numerosin="",c=l=0,L=152,m=M=x=0,-1<(x=s[1].indexOf("."))?(m=(w=s[1].split("."))[1].length,numerosin2=0==w[0]?r(w[1]):r(w[0])+r(w[1]),L+=42*(x=numerosin2.length-x),e(s[0],b-42*s[1].length-10,1,0,C.tdocl,1,C.tdocl,C.tdocl)):(numerosin2=s[1],e(s[0],b-42*(s[1].length+1)-10,1,0,C.tdocl,1,C.tdocl,C.tdocl)),L=382,l=-1<(l=s[0].indexOf("."))?(M=(w=s[0].split("."))[1].length,numerosin=0==w[0]?r(w[1]):r(w[0])+r(w[1]),numerosin.length-l):(numerosin=s[0],0),x=numerosin.length,s[2]=Number(s[0])/Number(s[1]),m<=M)l=M-m;else for(b=0;b<m-M;b++)numerosin+="0";for(s[2]=i(s[2],l),cocient=String(s[2]),l=cocient.length,s[2]!=parseInt(s[2])&&--l,l=436+42*l,e(cocient,l,2,0,1,1,1,1),l-=42*cocient.length,(M=LIM.creardom("div",g,"","",l,85)).style.width="160px",M.style.height="4px",M.style.backgroundColor="#000000",M.style.position="absolute",(M=LIM.creardom("div",g,"","",l,55)).style.width="4px",M.style.height="30px",M.style.backgroundColor="#000000",M.style.position="absolute",s[1]=numerosin2,s[2]=Number(numerosin)/Number(s[1]),cocient=s[2].toString(),-1<cocient.indexOf(".")&&(u=!0),l=s[1].length,divd=numerosin.substr(0,l),desc=0;Number(divd)<s[1];)l++,divd=numerosin.substr(0,l);for(cociente=parseInt(divd/s[1]),numres=Number(cocient.substr(0,1))*Number(s[1]),numress=numres.toString(),dvdv=numerosin.substr(0,numress.length),medio=Number(divd)-numres,(M=medio.toString().length)<=(m=numress.length)&&M<s[1].length?e("0"+medio.toString(),L-42*(x-divd.length),2,0,1,1,1,1):(e(medio.toString(),L-42*(x-divd.length),2,0,1,1,1,1),0),final=divd.length,ft=1,b=t=0;t<numerosin.length-l;)t++,ft++,numres=Number(cocient.substr(t,1))*Number(s[1]),dvdv=medio+numerosin.substr(final,1),medio=dvdv-numres,e(numerosin.substr(final,1),L-42*(x-final-1),ft,0,1,1,1,1),0!=Number(cocient.substr(t,1))?(b++,(M=medio.toString().length)<=(m=numres.toString().length)&&M<s[1].length?e("0"+medio.toString(),L-42*(x-final-1),ft+1,0,1,1,1,1):e(medio.toString(),L-42*(x-final-1),ft+1,0,1,1,1,1)):ft--,final++;break;case"d":if(L=150,Number(s[0])<Number(s[1])&&s[0].length<=s[1].length)for(t=1;t<=s[1].length;t++)s[0]+=".0";if(s[1]==parseInt(s[1])){for(e(s[0],L+42*s[0].length+25,2,0,C.tdocl,1,C.tdocl,C.tdocl),e(s[1],L,2,0,C.tdocl,1,C.tdocl,C.tdocl),numerosin="",c=l=0;c<s[0].length;)"."!=s[0].substr(c,1)?numerosin+=s[0].substr(c,1):l=c+1,c++;for(s[2]=Number(s[0])/Number(s[1]),s[2]=i(s[2],l),l=w,cocient=s[2].toString(),e(cocient,5+L+42*s[0].length+25,1,0,1,1,1,1),x=5+L+42*(s[0].length-1)+25,l=L+30,(M=LIM.creardom("div",g,"","",l,95)).style.width="200px",M.style.height="3px",M.style.backgroundColor="#000000",M.style.position="absolute",(M=LIM.creardom("div",g,"","",l,95)).style.width="3px",M.style.height="35px",M.style.backgroundColor="#000000",M.style.position="absolute",s[2]=Number(numerosin)/Number(s[1]),cocient=s[2].toString(),l=s[1].length,divd=numerosin.substr(0,l),desc=0;Number(divd)<s[1];)l++,divd=numerosin.substr(0,l);for(cociente=parseInt(divd/s[1]),numres=Number(cocient.substr(0,1))*Number(s[1]),numress=numres.toString(),dvdv=numerosin.substr(0,numress.length),medio=Number(divd)-numres,(M=medio.toString().length)<=(m=numress.length)&&M<s[1].length?e("0"+medio.toString(),x-42*(numerosin.length-divd.length-1),3,0,1,1,1,1):(e(medio.toString(),x-42*(numerosin.length-divd.length-1),3,0,1,1,1,1),0),final=divd.length,ft=2,t=0;t<numerosin.length-l;)t++,ft++,numres=Number(cocient.substr(t,1))*Number(s[1]),dvdv=medio+numerosin.substr(final,1),medio=dvdv-numres,e(numerosin.substr(final,1),x-42*(numerosin.length-final-2),ft,0,1,1,1,1),0!=Number(cocient.substr(t,1))?(M=medio.toString().length)<=(m=numres.toString().length)&&M<s[1].length?e("0"+medio.toString(),x-42*(numerosin.length-final-2),ft+1,0,1,1,1,1):e(medio.toString(),x-42*(numerosin.length-final-2),ft+1,0,1,1,1,1):ft--,final++}break;case"+":for(l=0,b=s.length,t=w=x=0;t<b;t++)s[t]=parseInt(Number(s[t])).toString(),-1!=(x=s[t].indexOf(".",0))&&(l<(w=s[t].length-x-1)&&(l=w));for(L-=50*l,x="",t=m=0;t<b;t++)lonc=0,-1!=s[t].indexOf(".")&&(lonc=s[t].length-s[t].indexOf(".")-1),t==b-1&&(x="+"),e(s[t],L+42*lonc,t+1,t,C.tdocl,1,C.tdocl,C.tdocl,x,!1),m+=Number(s[t]);if(M=m.toString(),pasar=m.toString(),0<l)for(lonc=l,-1==pasar.indexOf(".")?(pasar+=".",lonc=0):(lonc=pasar.length-(pasar.indexOf(".")+1),u=!0),t0=lonc;t0<l;t0++)pasar+="0";e(pasar,L+42*l,t+1,0,1,1,1,1,"",!1);break;case"-":for(l=0,b=s.length,t=w=x=0;t<b;t++)s[t]=parseInt(Number(s[t])).toString(),-1!=(x=s[t].indexOf(".",0))&&(l<(w=s[t].length-x-1)&&(l=w));for(x="",L-=50*l,t=m=0;t<b;t++)lonc=0,-1!=s[t].indexOf(".")&&(lonc=s[t].length-s[t].indexOf(".")-1),t==b-1&&(x="-"),e(s[t],L+42*lonc,t+1,t,C.tdocl,1,C.tdocl,C.tdocl,x,!1),m=Number(s[b-t-1]-m);if(M=m.toString(),pasar=m.toString(),0<l)for(lonc=l,-1==pasar.indexOf(".")?(pasar+=".",lonc=0):(lonc=pasar.length-(pasar.indexOf(".")+1),u=!0),t0=lonc;t0<l;t0++)pasar+="0";e(pasar,L+42*l,t+1,0,1,1,1,1,"",!1)}if(1==C.modo){for(trr=0;trr<12;trr++)switch(mover=LIM.creardom("div",g,trr+"cadr","tecla",40*trr+20,380),trr){case 10:mover.innerHTML=I;break;case 11:mover.innerHTML="-";break;default:mover.innerHTML=trr}for(trr=0;trr<12;trr++){switch(mover=LIM.creardom("div",g,trr+"cadrm","tecla teclam",40*trr+20,380),trr){case 10:mover.innerHTML=I;break;case 11:mover.innerHTML="-";break;default:mover.innerHTML=trr}LIM.drag(mover,p,a)}}d.style.height=g.offsetHeight+"px"}}function operacion(E){var C={};C=LIM.qhtml(E.donde,C);var k=this;k.numf=0,this.crear=function(){function e(e,t,r,i,a,o,s,l){i="",s=0;var c=null,p=e.length+1,d="";for(k.numf=r,n=1;n<p;n++)s++,d=e.substr(-n,1),a?((c=LIM.crearinput({pai:h,cssclass:"clopera-in",posx:t-s*g,posy:N+r*g+5,pholder:" "})).addEventListener("click",function(){this.value=""}),m?c.setAttribute("maxlength",2):c.setAttribute("maxlength",1)):c=LIM.creardom("div",h,"","clopera-b",t-s*g,N+r*g+5),null!=d&&(i="."==d?(s--,1==o?I:""):(1==l&&(c.dd=!0,c.let=d.toString()+i,c.cssstyleName="txop dest",L++,"1"==k.modo&&(c.onclick=function(){k.innerHTML=""}),"2"==k.modo&&(c.onPress=function(){})),1==a?(f.push(d.toString()+i),u.push(c)):c.innerHTML=d.toString()+i,"x"!=d&&"+"!=d&&"-"!=d||(c.onPress=function(){}),"")),y[w]=d.toString()+i,w++}function r(e){var t=parseInt(e);return String(t)}function i(e,t){for(var r="1",n=0;n<t;n++)r+="0";return r=Number(r),e==parseInt(e)?e/r:parseInt(e*r)/r}function a(e,t,r){var n=y.length,i=parseInt(e.id);for(e.style.top="380px",e.style.left=LIM.dom(i+"cadr").style.left,i=0;i<n;i++){var a=LIM.dom(i+"dst");if(LIM.ratosobre(e,a,t,r,!1)&&"txop dest"==a.cssstyleName){a.innerHTML=e.innerHTML;break}}}var m=!1,u=[],f=[];C=LIM.prc(C,E);var o=E.properties.forma||"+",s=E.properties.numeros||[""],l=E.properties.alea||"0",p=LIM.crearbase(E);LIM.paxina(),LIM.addEventSimple(LIM.esactividad(p,!0),"click",function(){for(var e=!0,t=u.length,r=0;r<t;r++)u[r].value!=f[r]?(u[r].value&&(u[r].style.backgroundColor="#cccccc"),e=!1):u[r].style.backgroundColor="#ffffff";e?LIM.poneravaliacion(p,E.properties.mensaben,!0,E.properties.ffinal,E.num):LIM.poneravaliacion(p,E.properties.mensamal,!1,E.properties.ffinal,E.num)});var d=LIM.creardom("div",p,"","clopera-base",-1,-1),h=LIM.creardom("div",d,"","clopera-marco",-1,-1),v=LIM.creardom("div",d,"","clopera-in",-1,-1),g=v.offsetHeight||60;g+=2,v.style.display="none",v.style.visibility="hidden",d.removeChild(v),"1"==l&&(resalea=function(e,t){var r=0,n=[],i=0,a=0,o=Number(e[0]);10<o&&(o=10);var s=Number(e[1]);10<s&&(s=10);var l,c,p,d,m=Math.pow(10,o)-1,u=Math.pow(10,o-1);switch(m=(a=(r=Math.floor(Math.random()*(m-u+1))+u).toString()).length-1,n[0]=a,u="",t){case"0":for(i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;if(0==i&&(i=1),n[1]=i.toString(),e[2]){for(s=Number(e[2]),i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;0==i&&(i=1),n[2]=i.toString()}if(e[3]){for(s=Number(e[3]),i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;0==i&&(i=1),n[3]=i.toString()}u="+";break;case"1":for(i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;1==s&&0==i&&(i=1),i<r?n[1]=i.toString():(n[0]=i.toString(),n[1]=a),u="-";break;case"2":for(i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;n[1]=i.toString(),u="x";break;case"3":if(i=0,o!=s)for(m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;else for(;0==i;)i=Math.floor(9*Math.random())+1;a<i?(n[1]=a.toString(),n[0]=i.toString()):n[1]=i.toString(),u="/";break;case"4":for(s=m;-1<s;s--)i+=Math.pow(10,s)*(c=Number(a.charAt(m-s)),p=9,d=0,Math.floor(Math.random()*(p-c-d+1))+d);0==i&&(--r<(i=1)&&(r=8)),a=r.toString(),n[0]=a,n[1]=i.toString(),u="+";break;case"5":for(s=m;-1<s;s--)posn=m-s,i+=Math.pow(10,s)*(0==(l=Number(a.charAt(m-s)))?0:Math.floor(Math.random()*l));0==i&&(9<(r+=i=1)&&(r=9)),a=r.toString(),n[0]=a,n[1]=i.toString(),u="-";break;case"7":if(s<=o){for(r=i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==r;)r=Math.floor(Math.random()*(m-u+1))+u;if(o!=s)for(m=Math.pow(10,o-s)-1,u=Math.pow(10,o-s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;else for(a=(r*(i=Math.floor(9*Math.random())+1)).toString().length;s<a;)a=(r*--i).toString().length;n[0]=(r*i).toString(),n[1]=r.toString(),u="/"}break;case"8":if(i=0,o!=s)for(m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;else for(;0==i;)i=Math.floor(9*Math.random())+1;a<i?(n[1]=a.toString(),n[0]=i.toString()):n[1]=i.toString(),u="d";break;case"9":if(s<=o){for(r=i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==r;)r=Math.floor(Math.random()*(m-u+1))+u;if(o!=s)for(m=Math.pow(10,o-s)-1,u=Math.pow(10,o-s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;else for(a=(r*(i=Math.floor(9*Math.random())+1)).toString().length;s<a;)a=(r*--i).toString().length;n[0]=(r*i).toString(),n[1]=r.toString(),u="d"}break;case"6":for(i=0,m=Math.pow(10,s)-1,u=Math.pow(10,s-1);0==i;)i=Math.floor(Math.random()*(m-u+1))+u;n[1]=i.toString(),"0"==n[1].slice(-1)&&(n[1]=(i+1).toString()),u="x"}return(r={}).nume=n,r.opera=u,r}(s,o),s=resalea.nume,o=resalea.opera);var b=0,x=0;v="";var M=1;x=s.length;var L=60;d=480;var y=[],I=".",N=-20,w=0;for(l=0;l<x;l++)-1<(b=s[l].toString()).indexOf(",")&&(s[l]=Number(b.replace(",",".")),I=",");switch(l="",o){case"x":l=s[0];var S=s[1];if(e(l,(d+=18*Number((l*S).toString().length))-g,1,10,k.tdocl,1,k.tdocl,k.tdocl),e("x  "+S,d-g,2,20,k.tdocl,1,k.tdocl,k.tdocl),1<S.length){for(c=0,sin="";c<l.length;)"."!=l.substr(c,1)&&(sin+=l.substr(c,1)),c++;for(c=0,sin2="";c<S.length;)"."!=S.substr(c,1)&&(sin2+=S.substr(c,1)),c++}else sin=l,sin2=S;if(tempnum=lnf=0,long=sin2.length,"0"==S.substr(0,1)){for(t=tnum=1;t<sin2.length;t++)"0"==sin2.substr(t,1)?tnum++:t=sin2.length;long-=tnum,1==long&&(long=0)}if(1==long)lnf++,b=Number(l)*Number(S),pasar=b.toString(),e(pasar,d-M*g,lnf+2,L,1,1,1,1);else for(t=1;t<long+1;t++)lnf++,0==(b=Number(sin)*Number(sin2.substr(-t,1)))?(v+="0",lnf--):(pasar=b.toString()+v,e(pasar.toString(),d-M*g,lnf+2,L,1,1,1,1),M=M+v.length+1,v="");if(lnf++,-1<(b=(Number(l)*Number(S)).toString()).indexOf(".")&&(m=!0),M=sin*sin2,v=b.indexOf("."),c=M.toString().length-b.length,-1!=v&&(c+=1),-1!=l.toString().indexOf(".")||-1!=S.toString().indexOf("."))for(-1==v&&(b+="."),t0=0;t0<c;t0++)b+="0";(o=LIM.creardom("div",h,"","",d-g-b.length*g,N+3*g)).style.width=b.length*g+"px",o.style.height="3px",o.style.backgroundColor="#000000",o.style.position="absolute",1<sin2.length&&((o=LIM.creardom("div",h,"","",d-g-b.toString().length*g-40,N+g*(lnf+2)+2)).style.width=60+b.toString().length*g+"px",o.style.height="3px",o.style.backgroundColor="#000000",o.style.position="absolute",e(b,d-g,lnf+2,L,1,1,1,1));break;case"/":if(Number(s[0])<Number(s[1])&&s[0].length<=s[1].length)for(t=1;t<=s[1].length;t++)s[0]+=".0";if(M=435+s[1].length*g,e(s[1],M,1,10,k.tdocl,1,k.tdocl,k.tdocl),numerosin="",c=l=0,d=152,v=o=S=0,-1<(S=s[1].indexOf("."))?(v=(b=s[1].split("."))[1].length,numerosin2=0==b[0]?r(b[1]):r(b[0])+r(b[1]),d+=42*(S=numerosin2.length-S),e(s[0],M-s[1].length*g-10,1,20,k.tdocl,1,k.tdocl,k.tdocl)):(numerosin2=s[1],e(s[0],M-(s[1].length+1)*g-10,1,20,k.tdocl,1,k.tdocl,k.tdocl)),d=368,l=-1<(l=s[0].indexOf("."))?(o=(b=s[0].split("."))[1].length,numerosin=0==b[0]?r(b[1]):r(b[0])+r(b[1]),numerosin.length-l):(numerosin=s[0],0),S=numerosin.length,s[2]=Number(s[0])/Number(s[1]),v<=o)l=o-v;else for(M=0;M<v-o;M++)numerosin+="0";for(s[2]=i(s[2],l),cocient=String(s[2]),l=cocient.length,s[2]!=parseInt(s[2])&&--l,l=436+l*g,e(cocient,l,2,L,1,1,1,1),l=l-cocient.length*g-10,(o=LIM.creardom("div",h,"","",l,N+2*g-10)).style.width=(s[1].toString().length+1)*g+"px",o.style.height="4px",o.style.backgroundColor="#000000",o.style.position="absolute",(o=LIM.creardom("div",h,"","",l,N+g+5)).style.width="4px",o.style.height=g-12+"px",o.style.backgroundColor="#000000",o.style.position="absolute",s[1]=numerosin2,s[2]=Number(numerosin)/Number(s[1]),cocient=s[2].toString(),-1<cocient.indexOf(".")&&(m=!0),l=s[1].length,divd=numerosin.substr(0,l),desc=0;Number(divd)<s[1];)l++,divd=numerosin.substr(0,l);for(cociente=parseInt(divd/s[1]),numres=Number(cocient.substr(0,1))*Number(s[1]),numress=numres.toString(),dvdv=numerosin.substr(0,numress.length),medio=Number(divd)-numres,(o=medio.toString().length)<=(v=numress.length)&&o<s[1].length?e("0"+medio.toString(),d-(S-divd.length)*g,2,L,1,1,1,1):(e(medio.toString(),d-(S-divd.length)*g,2,L,1,1,1,1),L++),L--,final=divd.length,ft=1,M=t=0;t<numerosin.length-l;)t++,ft++,numres=Number(cocient.substr(t,1))*Number(s[1]),dvdv=medio+numerosin.substr(final,1),medio=dvdv-numres,e(numerosin.substr(final,1),d-(S-final-1)*g,ft,L,1,1,1,1),0!=Number(cocient.substr(t,1))?(M++,(o=medio.toString().length)<=(v=numres.toString().length)&&o<s[1].length?e("0"+medio.toString(),d-(S-final-1)*g,ft+1,L,1,1,1,1):e(medio.toString(),d-(S-final-1)*g,ft+1,L,1,1,1,1)):ft--,final++;break;case"d":if(d=120,Number(s[0])<Number(s[1])&&s[0].length<=s[1].length)for(t=1;t<=s[1].length;t++)s[0]+=".0";if(s[1]==parseInt(s[1])){for(e(s[0],d+s[0].length*g+25,2,10,k.tdocl,1,k.tdocl,k.tdocl),e(s[1],d,2,20,k.tdocl,1,k.tdocl,k.tdocl),numerosin="",c=l=0;c<s[0].length;)"."!=s[0].substr(c,1)?numerosin+=s[0].substr(c,1):l=c+1,c++;for(s[2]=Number(s[0])/Number(s[1]),s[2]=i(s[2],l),l=S,cocient=s[2].toString(),e(cocient,5+d+s[0].length*g+25,1,L,1,1,1,1),S=5+d+(s[0].length-1)*g+25,l=d+22,(o=LIM.creardom("div",h,"","",l,N+2*g+4)).style.width=(s[1].toString().length+3)*g+"px",o.style.height="3px",o.style.backgroundColor="#000000",o.style.position="absolute",(o=LIM.creardom("div",h,"","",l,N+2*g+4)).style.width="3px",o.style.height=g-10+"px",o.style.backgroundColor="#000000",o.style.position="absolute",s[2]=Number(numerosin)/Number(s[1]),cocient=s[2].toString(),l=s[1].length,divd=numerosin.substr(0,l),desc=0;Number(divd)<s[1];)l++,divd=numerosin.substr(0,l);for(cociente=parseInt(divd/s[1]),numres=Number(cocient.substr(0,1))*Number(s[1]),numress=numres.toString(),dvdv=numerosin.substr(0,numress.length),medio=Number(divd)-numres,(o=medio.toString().length)<=(v=numress.length)&&o<s[1].length?e("0"+medio.toString(),S-(numerosin.length-divd.length-1)*g,3,L,1,1,1,1):(e(medio.toString(),S-(numerosin.length-divd.length-1)*g,3,L,1,1,1,1),L++),L--,final=divd.length,ft=2,t=0;t<numerosin.length-l;)t++,ft++,numres=Number(cocient.substr(t,1))*Number(s[1]),dvdv=medio+numerosin.substr(final,1),medio=dvdv-numres,e(numerosin.substr(final,1),S-(numerosin.length-final-2)*g,ft,L,1,1,1,1),0!=Number(cocient.substr(t,1))?(o=medio.toString().length)<=(v=numres.toString().length)&&o<s[1].length?e("0"+medio.toString(),S-(numerosin.length-final-2)*g,ft+1,L,1,1,1,1):e(medio.toString(),S-(numerosin.length-final-2)*g,ft+1,L,1,1,1,1):ft--,final++}break;case"+":for(l=0,x=s.length,t=S=0;t<x;t++)-1!=(S=s[t].indexOf(".",0))&&(l<(S=s[t].length-S-1)&&(l=S));for(d-=50*l,t=b=0;t<x;t++)lonc=0,-1!=s[t].indexOf(".")&&(lonc=s[t].length-s[t].indexOf(".")-1),e(s[t],d+lonc*g,t+1,10*(t+1),k.tdocl,1,k.tdocl,k.tdocl),b+=Number(s[t]);if(M=b.toString(),e("+",320-(b.toString().length-2)*g,t,10*(t+1),0,1,0,0),(o=LIM.creardom("div",h,"","",320-(b.toString().length-1)*g,N+3*g)).style.width=100+b.toString().length*g+"px",o.style.height="4px",o.style.backgroundColor="#000000",o.style.position="absolute",pasar=b.toString(),0<l)for(lonc=l,-1==pasar.indexOf(".")?(pasar+=".",lonc=0):(lonc=pasar.length-(pasar.indexOf(".")+1),m=!0),t0=lonc;t0<l;t0++)pasar+="0";e(pasar,d+l*g,t+1,L,1,1,1,1);break;case"-":for(l=0,x=s.length,t=S=0;t<x;t++)-1!=(S=s[t].indexOf(".",0))&&(l<(S=s[t].length-S-1)&&(l=S));for(d-=50*l,t=b=0;t<x;t++)lonc=0,-1!=s[t].indexOf(".")&&(lonc=s[t].length-s[t].indexOf(".")-1),e(s[t],d+lonc*g,t+1,10*(t+1),k.tdocl,1,k.tdocl,k.tdocl),b=Number(s[x-t-1]-b);if(M=b.toString(),e("-",320-(b.toString().length-2)*g,t,10*(t+1),0,1,0,0),(o=LIM.creardom("div",h,"","",320-(b.toString().length-1)*g,N+3*g)).style.width=100+b.toString().length*g+"px",o.style.height="4px",o.style.backgroundColor="#000000",o.style.position="absolute",pasar=b.toString(),0<l)for(lonc=l,-1==pasar.indexOf(".")?(pasar+=".",lonc=0):(lonc=pasar.length-(pasar.indexOf(".")+1),m=!0),t0=lonc;t0<l;t0++)pasar+="0";e(pasar,d+l*g,t+1,L,1,1,1,1)}if(1==k.modo){for(trr=0;trr<12;trr++)switch(mover=LIM.creardom("div",h,trr+"cadr","tecla",40*trr+20,380),trr){case 10:mover.innerHTML=I;break;case 11:mover.innerHTML="-";break;default:mover.innerHTML=trr}for(trr=0;trr<12;trr++){switch(mover=LIM.creardom("div",h,trr+"cadrm","tecla teclam",40*trr+20,380),trr){case 10:mover.innerHTML=I;break;case 11:mover.innerHTML="-";break;default:mover.innerHTML=trr}LIM.drag(mover,p,a)}}s=k.numf*g+g,h.style.minHeight=s.toString()+"px",p.style.minHeight=s.toString()+"px"}}function ordenar(g){var b={texto:"",imaxe:"",imaxeAltText:""};b=LIM.qhtml(g.donde,b),this.crear=function(){function e(e,t,r){var n=parseInt(e.id);if(e.style.visibility="hidden",t=document.elementFromPoint(t,r),e.style.visibility="visible",t.getClientRects(),e.style.position="absolute",c[n]=null,-1<t.className.indexOf("clordena-dest")){var i=parseInt(t.id);for(p[n]=t,n=(c[n]=e).innerHTML,t.style.width=e.offsetWidth+"px",e.style.left=f.offsetLeft+t.offsetLeft+"px",e.style.top=f.offsetTop-t.offsetTop+"px",e=0;e<o;e++)null!=c[e]&&(c[e].style.left=f.offsetLeft+p[e].offsetLeft+"px",c[e].style.top=f.offsetTop-h.offsetTop+p[e].offsetTop-1+"px");l[i]=a[i]==n?1:0}else l[i]=0}g=LIM.prc(b,g);var t=Number(g.properties.modo||"0"),n=Number(g.properties.forma||"0"),r=g.properties.texto||"",a=0<r.indexOf("|")?r.split("|"):'"'==r.charAt(0)?r.slice(1,-1).split(" "):r.split(""),o=a.length,i=LIM.crearbase(g),s=LIM.paxina(),l=Array(o),c=Array(o),p=Array(o),d=0,m="";if(null==g.donde&&LIM.comunes(i,g.txcabe,g.txpe,g.properties.ison,g.properties.autoson,g.properties.txliga,g.properties.paxliga),LIM.addEventSimple(LIM.esactividad(i,!0),"click",function(){var e=!0;if(0==n)for(var t=f.querySelectorAll(".clordena-dw"),r=0;r<t.length;r++)t[r].value.trim()!=a[r]?e=!1:(t[r].disabled=!0,t[r].className="clordena-dw clordena-dwfx");else 1==n&&-1<l.toString().indexOf(0)&&(e=!1);0==e?LIM.poneravaliacion(i,g.properties.mensamal,!1,g.properties.ffinal,g.num):LIM.poneravaliacion(i,g.properties.mensaben,!0,g.properties.ffinal,g.num)}),r=LIM.desordena(o),(d=document.createElement("div")).setAttribute("class","clordena-b"),i.appendChild(d),g.properties.imaxe){var u=document.createElement("div");u.setAttribute("class","clordena-im"),d.appendChild(u)}var f=document.createElement("div");f.setAttribute("class","clordena-base"),d.appendChild(f);var h=document.createElement("div");if(h.setAttribute("class","clordena-cadro"),d.appendChild(h),g.properties.imaxe&&(LIM.crearimaxe({pai:u,alttext:g.properties.alttext}).src=g.properties.imaxe),1==t&&(f.style.top="10px"),u="clordena-dest",2==t&&(u="clordena-dest clordena-v",h.style.marginTop="120px"),1==n){for(d=0;d<o;d++){l[d]="0";var v=LIM.creardom("span",f,d+"cdest"+s,u);p[d]=""}for(d=t=0;d<o;d++)m=(t=r[d])+"etq"+s,v=LIM.creardom("div",h,m,"clordena-etq",-1,-1),c[d]=null,v.innerHTML=a[t],LIM.drag(v,i,e),l[t]=" "!=a[t]?0:1}else if(2==n){for(s="",d=0;d<o;d++)s+="<input class='cltxts-in'  ></input>";for(f.innerHTML=s,c=f.querySelectorAll(".cltxts-in"),m=0;m<o;m++)1==n&&(v.style.display="block"),c[m].addEventListener("keypress",function(e){this.style.width=0,e=this.scrollWidth+14,this.scrollWidth>=this.clientWidth&&(e+=10),""!=this.value&&(this.style.width=e+"px")});t=0}else{for(s="",d='<option value="">...</option>',m=0;m<o;m++)d+='<option value="'+a[r[m]]+'">'+a[r[m]]+"</option>";if(2==t)for(m=0;m<o;m++)s="<select class='clordena-dw'>"+d+"</select>",l[m]="0",(v=LIM.creardom("span",f,"",u)).style.opacity="1",v.innerHTML=s;else{for(m=0;m<o;m++)s+="<select class='clordena-dw'>"+d+"</select>",l[m]="0";f.innerHTML=s}}}}function ordenarimx(h){var v={};v=LIM.qhtml(h.donde,v),this.crear=function(){function e(e,t,r){d++,e.style.zIndex=d;for(var n=parseInt(e.id),i=0;i<a;i++){if(LIM.ratosobre(e,c[i],t,r,!1)){l[n]=n==i?1:0;break}l[n]=0}}v=LIM.prc(v,h);for(var t=h.properties.modo||"0",r=[],n=[],i=[],a=h.properties.imaxes.length,o=0;o<a;o++)r=h.properties.imaxes[o].split("||"),n[o]=r[0],i[o]=r[3]||"";var s=LIM.crearbase(h);r=LIM.paxina();var l=Array(a),c=Array(a);o=0;var p="",d=1100;null==h.donde&&LIM.comunes(s,h.txcabe,h.txpe,h.properties.ison,h.properties.autoson,h.properties.txliga,h.properties.paxliga),"1"!=t&&LIM.addEventSimple(LIM.esactividad(s,!0),"click",function(){-1<l.toString().indexOf(0)?LIM.poneravaliacion(s,h.properties.mensamal,!1,h.properties.ffinal,h.num):LIM.poneravaliacion(s,h.properties.mensaben,!0,h.properties.ffinal,h.num)}),p="",t=LIM.desordena(a);var m=0,u=LIM.creardom("div",s,"","clordimx-base"),f=LIM.creardom("div",s,"","clordimx-base");for(o=0;o<a;o++)p=(m=t[o])+"etq"+r,p=LIM.creardom("div",u,p,"clordimx-dest",-1,-1),(m=LIM.creardom("div",p,"","clordimx-num",-1,-1)).innerHTML=(o+1).toString(),c[o]=p;for(o=0;o<a;o++)p=(m=t[o])+"etq"+r,p+="f",p=LIM.creardom("div",f,p,"clordimx-im",-1,-1),LIM.crearimaxe({pai:p,name:m+"imx"+r,cssclass:"clordimx-ix",alttext:i}).src=n[m],LIM.drag(p,s,e),l[m]=0}}function paneldeb(g){var b={etiquetas:[],imaxeAltText:[],imaxe:""};b=LIM.qhtml(g.donde,b),this.crear=function(){function t(e,t,r,n,i){this.x=t||0,this.y=r||0,this.w=n||1,this.h=i||1,this.rw=n||1,this.rh=i||1,this.imax=e||""}function e(e,t){if(e.width=parseInt(getComputedStyle(e).width)||e.clientWidth||800,e.height=parseInt(getComputedStyle(e).height)||e.clientHeight||500,this.canvas=e,this.width=e.width,this.height=e.height,this.ctx=e.getContext("2d"),""!=t){var r=this,n=new Image;n.onload=function(){r.imfon=n,r.fondo()},n.src=t}else this.imfon=null;document.defaultView&&document.defaultView.getComputedStyle&&(this.stylePaddingLeft=parseInt(document.defaultView.getComputedStyle(e,null).paddingLeft,10)||0,this.stylePaddingTop=parseInt(document.defaultView.getComputedStyle(e,null).paddingTop,10)||0,this.styleBorderLeft=parseInt(document.defaultView.getComputedStyle(e,null).borderLeftWidth,10)||0,this.styleBorderTop=parseInt(document.defaultView.getComputedStyle(e,null).borderTopWidth,10)||0);var i=document.body.parentNode;this.htmlTop=i.offsetTop,this.htmlLeft=i.offsetLeft,this.valid=!1,this.shapes=[],this.dragging=!1,this.selection=null,this.dragoffy=this.dragoffx=0,f=this,e.addEventListener("selectstart",function(e){return e.preventDefault(),!1},!1),e.addEventListener("mousedown",function(e){var t=f.getMouse(e);e=t.x,t=t.y;for(var r=f.shapes,n=r.length-1;0<=n;n--)if(r[n].contains(e,t)){var i=r[n];return r.splice(n,1),r.push(i),i=r[r.length-1],f.dragoffx=e-i.x,f.dragoffy=t-i.y,f.dragging=!0,f.selection=i,f.valid=!1,f.selection=i,f.dragging=!0,void f.draw()}f.selection&&(f.selection=null,f.valid=!1,f.draw())},!0),e.addEventListener("mousemove",function(e){f.dragging&&(e=f.getMouse(e),f.selection.x=e.x-f.dragoffx,f.selection.y=e.y-f.dragoffy,f.valid=!1,f.draw())},!0),e.addEventListener("mouseup",function(e){f.dragging=!1},!0),this.selectionColor="#CC0000",this.selectionWidth=2,this.interval=30,f.selection&&f.selection.draw(f.ctx)}function r(e){if(f.selection){switch(e){case"r":e=f.selection.h,10<f.selection.w&&10<e&&(f.selection.w-=5,f.selection.h-=5);break;case"a":f.selection.w+=5,f.selection.h+=5;break;case"d":for(e=f.shapes.length-1;0<=e;e--)f.selection==f.shapes[e]&&f.shapes.splice(e,1);f.selection=null}f.valid=!1,f.draw()}}function n(e,t,r,n,i){var a=document.createElement("button");a.setAttribute("class",t),a.setAttribute("title",n),a.innerHTML=r,LIM.addEventSimple(a,"click",i),e.appendChild(a)}g=LIM.prc(b,g);var i=LIM.crearbase(g);LIM.paxina();var a=null;a=g.properties.etiquetas;var o,s,l,c,p,d,m=g.properties.imaxeAltText,u=g.properties.imaxe||"",f=null;t.prototype.draw=function(e){e.drawImage(this.imax,this.x,this.y,this.w,this.h)},t.prototype.contains=function(e,t){return this.x<=e&&this.x+this.w>=e&&this.y<=t&&this.y+this.h>=t},e.prototype.addShape=function(e){this.shapes.push(e),this.valid=!1,e.draw(this.ctx)},e.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},e.prototype.toimx=function(){return this.canvas.toDataURL("image/png")},e.prototype.fondo=function(e){this.imfon&&this.ctx.drawImage(this.imfon,0,0)},e.prototype.draw=function(){if(this.clear(),this.fondo(),!this.valid){for(var e=this.ctx,t=this.shapes,r=t.length,n=0;n<r;n++){var i=t[n];i.x>this.width||i.y>this.height||i.x+i.w<0||i.y+i.h<0||t[n].draw(e)}null!=this.selection&&(this.selection.draw(e),e.strokeStyle=this.selectionColor,e.lineWidth=this.selectionWidth,e.setLineDash([5,4]),t=this.selection,e.strokeRect(t.x,t.y,t.w,t.h)),this.valid=!0}},e.prototype.getMouse=function(e){var t=this.canvas,r=0,n=0;if(void 0!==t.offsetParent)for(;r+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;);return r+=this.stylePaddingLeft+this.styleBorderLeft+this.htmlLeft,n+=this.stylePaddingTop+this.styleBorderTop+this.htmlTop,{x:e.pageX-r,y:e.pageY-n}};for(var h=LIM.creardom("div",i,"","clpan_colimx"),v=0;v<a.length;v++)o=h,s="clpan_cadro",l=a[v],c=m[v],p=function(){var e=this.childNodes[0];f.addShape(new t(e,40,40,e.naturalWidth,e.naturalHeight))},d=void 0,(d=document.createElement("div")).setAttribute("class",s),(s=document.createElement("img")).setAttribute("class","clpan_imx"),s.setAttribute("title",c||LIM.td("Imagen")),s.setAttribute("src",l),d.appendChild(s),LIM.addEventSimple(d,"click",p),o.appendChild(d);i=LIM.creardom("div",i,"","clpan_col2"),a=LIM.creardom("canvas",i,"","clpan_canvas"),n(h=LIM.creardom("div",i,"","clpan_botonera"),"clpan_boton","-",LIM.td("Botón para reducir"),function(){r("r")}),n(h,"clpan_boton","+",LIM.td("Botón para ampliar"),function(){r("a")}),n(h,"clpan_boton","x",LIM.td("Botón para eliminar elemento"),function(){r("d")}),n(h,"clpan_boton","G",LIM.td("Botón para guardar"),function(){f.selection=null,f.valid=!1,f.draw();var e=f.toimx();e.download="paneldeb.png",window.location=e}),new e(a,u)}}function parellas(F){this.crear=function(){function d(){T-=A,--w<0?(clearInterval(I),"none"!=E.parentNode.parentNode.style.display&&LIM.poneravaliacion(E,F.properties.mensamal,!1,F.properties.ffinal,F.num),S=!1):(k.innerHTML=w.toString(),k.style.width=T.toString()+"px")}var m="#ADFF2F #00FA9A #FFC0CB #FFA500 #B0E0E6 #FFDEAD #F4A460 #FFD700 #FA8258 #A5DF00 #088A85 #81F79F #81DAF5 #E6E6E6 #F78181".split(" "),e=F.properties.imaxes||[],t=F.properties.etiquetas||[],r=F.properties.textos||[],i=F.properties.sons||[],u=F.properties.modo||"0",n=F.properties.tempo||"50",f=F.properties.cfondo||"",h=F.properties.ctapa||"",a=[],o=e.length;if(0<e.length){for(var s=[],l=[],c=[],p=[],v=0;v<o;v++)s=e[v].split("||"),l[v]=s[0]||"",c[v]=s[1]||"",p[v]=s[2]||"";var g=[],b=[],x=[];if(0<t.length)for(v=0;v<o;v++)s=t[v].split("||"),g[v]=s[0]||"",b[v]=s[1]||"",x[v]=s[2]||"";var M=[],L=[]}if("2"==u&&0==o){for(u="3",o=i.length,p=[],x=[],v=0;v<o/2;v++)p[v]=i[v];for(x=[],v=o/2;v<o;v++)x[v-o/2]=i[v]}var y=[];t=0;var I,N=!1,w=Number(n),S=!0;if("0"==u){for(t=0;t<o;t++)M.push(l[t]),y.push(p[t]),a.push(t),M.push(l[t]),y.push(p[t]),a.push(t);t=M.length}else if("1"==u){for(t=s=0;t<e.length;t++)""==e[t]&&""==r[t]||s++;for(t=0;t<o;t++)M[t]=l[t],L[t]=c[t],y[t]=p[t],a[t]=t;for(t=e=0;t<o;t++)M[e=t+o]=g[t],y[e]=x[t],L[e]=b[t],a[e]=t;t=M.length}else if("3"==u){for(s=0,o=i.length/2,t=0;t<o;t++);for(t=0;t<o;t++)y[t]=p[t],a[t]=t;for(t=e=0;t<o;t++)y[e=t+o]=x[t],a[e]=t;t=y.length}var E=LIM.crearbase(F),C=LIM.paxina();LIM.esactividad(E,!1);var k=LIM.creardom("div",E,"","clpar-tem"),T=k.offsetWidth,A=T/w;k.innerHTML=n;var H=Array(t);H.fill(0)||H.join("0").split("").map(parseFloat);var q=1e3,O=null,z=!0,B="par"+C;LIM.desordena(t);function P(e,t,r,n,i,a,o){this.ver=function(){return this.num},a=t+B,(e=document.createElement("div")).className="clpar ",e.id=a,(a=document.createElement("figure")).className="clpar front";var s=document.createElement("figure");s.className="clpar back",e.appendChild(a),e.appendChild(s),E.appendChild(e);var l=parseInt(s.offsetWidth)-8||142,c=parseInt(s.offsetheight)-12||188;""!=f&&(a.style.backgroundColor="#"+f),self=this;var p=LIM.crearimaxe({pai:s,name:t+"imxf"+r,cssclass:"clpar-im",posx:1,posy:1,alttext:""});return p.style.visibility="hidden","3"!=u&&LIM.cargaimaxe(p,n,l,c,"",!0,!0),H[t]=0,(""!=n?LIM.creardom("div",s,t+"txt"+r,"clpar-texto"):LIM.creardom("div",s,t+"txt"+r,"clpar-txtg")).innerHTML=i,e.num=o,a.innerHTML="?",""!=h&&(a.style.backgroundColor="#"+h),a.style.cursor="pointer",void 0!==F.properties.fcolor&&(e.style.backgroundColor="#"+F.properties.fcolor),LIM.addEventSimple(e,"click",function(){N||(N=!0,I=setInterval(d,1e3));var e=parseInt(this.id);y[e]&&LIM.sonar(y[e]),z&&"clpar flipped"!=this.className&&(this.className="clpar flipped",function(e){var t=parseInt(e.id),r=O?parseInt(O.id):1e4;if(q<1e3){if(e.num==O.num)e.childNodes[1].style.backgroundColor=m[e.num],O.childNodes[1].style.backgroundColor=m[e.num],H[t]=1,-(H[r]=1)==H.toString().indexOf(0)&&(clearInterval(I),S&&LIM.poneravaliacion(E,F.properties.mensaben,!0,F.properties.ffinal,F.num));else{z=!1;var n=O;setTimeout(function(){e.classList.toggle("flipped"),n.classList.toggle("flipped"),z=!0},500)}O=null,q=1e3}else q=t,O=e}(this))}),e}!function(e){for(var t,r=LIM.desordena(e),n=0;n<e;n++)t=r[n],void 0===i[t]&&(i[t]=""),3==u?new P(E,t,C,"","",i[t],a[t]):1==u?new P(E,t,C,M[t],L[t],i[t],a[t]):new P(E,t,C,M[t],"","",a[t]),0}(t)}}function piramide(d){var m={texto:"",palabras:"",letras:""};this.crear=function(){var e=(d=LIM.prc(m,d)).properties.palabras||[""],t=d.properties.texto||"",r=e.length,n=LIM.crearbase(d),i=LIM.paxina(),a=[];null==d.donde&&LIM.comunes(n,d.txcabe,d.txpe,d.properties.ison,d.properties.autoson,d.properties.txliga,d.properties.paxliga),LIM.addEventSimple(LIM.esactividad(n,!0),"click",function(){for(var e="",t=0;t<a.length;t++)e+=a[t].value;e=e.toLowerCase(),p==e?LIM.poneravaliacion(n,d.properties.mensaben,!0,d.properties.ffinal,d.num):LIM.poneravaliacion(n,d.properties.mensamal,!1,d.properties.ffinal,d.num)});var o=document.createElement("div");if(o.setAttribute("class","clpi-col1"),n.appendChild(o),""!=t){var s=LIM.creardom("div",n,"","clpi-txt");s.innerHTML=t}for(var l=s=0;l<r;l++){(t=document.createElement("div")).setAttribute("class","clpi-let clpi-nu"),t.innerHTML=l+1,o.appendChild(t);for(var c=0;c<e[l].length;c++)(t=document.createElement("INPUT")).setAttribute("type","text"),t.setAttribute("maxlength","1"),t.setAttribute("class","clpi-let"),t.setAttribute("id",s+"pir"+i),o.appendChild(t),a[s]=t,s++;(t=document.createElement("div")).setAttribute("class","clpi-se"),o.appendChild(t)}for(c=0;c<a.length;c++)a[c].addEventListener("keyup",function(e){if(this.value.length==this.maxLength){var t=parseInt(this.id);t=8==e.keyCode?t-1:t+1,8!=e.keyCode&&a[t]&&a[t].focus()}},!1);var p=e.join("").toLowerCase()}}function plantilla(d){this.crear=function(){var e=d.properties.resp||"",t=d.properties.boton||"",r=LIM.crearbase(d),n=LIM.paxina(),i=null,a=r.getElementsByTagName("font");if(a&&LIM.cambiafont(a),""!=t)var o=(t=t.split("||"))[0],s=t[1]||"";var l=LIM.creardom("div",r,"","clplan");if(s&&LIM.crearlink({pai:l,url:"javascript:LIM.salto('"+s+"')",text:o,cssclass:"clplan-bt",alttext:o}),e){var c,p=(c=e.toLowerCase().split("|")).length;i=LIM.crearinput({pai:l,name:"input"+n,cssclass:"clplan-in",pholder:d.properties.pholder}),LIM.addEventSimple(LIM.esactividad(l,!0),"click",function(){for(var e=!1,t=i.value.toLowerCase(),r=0;r<p;r++)t==c[r]&&(e=!0);e?LIM.poneravaliacion(l,d.properties.mensaben,!0,d.properties.ffinal,d.num):LIM.poneravaliacion(l,d.properties.mensamal,!1,d.properties.ffinal,d.num)}),i.focus()}}}function preguntas(d){var m={media:"",preguntas:[],respuestas:[],altimaxe:"",color:""};m=LIM.qhtml(d.donde,m),this.crear=function(){var e=(d=LIM.prc(m,d)).properties.imaxe||"",t=d.properties.preguntas.length,r=LIM.crearbase(d),n=LIM.paxina();null==d.donde&&LIM.comunes(r,d.properties.txcabe,d.properties.txpe,d.properties.ison,d.properties.autoson,d.properties.txliga,d.properties.paxliga),LIM.addEventSimple(LIM.esactividad(r,!0),"click",function(){for(var e,t=0;t<i.length;t++)for(e=o[t]=0;e<a[t].length;)LIM.sspc(i[t].value.toLowerCase())==a[t][e]?(i[t].style.backgroundColor="#98FB98",o[t]=1,e=50):i[t].style.backgroundColor="#FFFFFF",e++;-1==o.toString().indexOf("0")?LIM.poneravaliacion(r,d.properties.mensaben,!0,d.properties.ffinal,d.num):LIM.poneravaliacion(r,d.properties.mensamal,!1,d.properties.ffinal,d.num)});var i=Array(t),a=Array(t),o=Array(t);LIM.desordena(t);var s="etq"+n;if(""!=e){var l=LIM.creardom("div",r,"cmed"+n,"clpreg-media",-1,-1),c=LIM.creardom("div",l,"","clpreg-bmed",-1,-1),p=LIM.tcontido(e);"s"==p?c=LIM.crearswf(c,"coswf"+n,e,"",0,0,360,300,""):"v"==p?(p="",(c=LIM.crearvid(c,"covid"+n,e,"",0,0,360,300,"")).style.border="solid 1px #cccccc"):"i"==p?(p=(p="")!=d.properties.altimaxe?"<img src='"+e+"' class='cladx-im' title='"+d.properties.altimaxe+"'>":"<img src='"+e+"' class='cladx-im' >",l.innerHTML=p):(c.style.width="380px",c.innerHTML=d.properties.media)}for(c="",e=LIM.creardom("div",r,"","clpreg-base",-1,-1),n=0;n<t;n++)l=n+s,(c=LIM.creardom("div",e,l,"clpreg-cadro",-1,-1)).innerHTML=d.properties.preguntas[n],l=LIM.crearinput({pai:c,name:l+s+"m",cssclass:"clpreg-input",posx:5,posy:60,dimw:"100%",dimh:25,pholder:d.properties.pholder}),i[n]=l,a[n]=[],c=LIM.sspc(d.properties.resp[n].toLowerCase()),a[n]=c.split("|"),o[n]=0}}function puzzle(T){function t(){function L(t,r,n){if(r=document.createElementNS("http://www.w3.org/2000/svg",r),n)for(var i in n)r.setAttribute(i,n[i]);return e=r,t.appendChild(e),e}function y(e,t){var r=.4*e,n=.05*e*(!!t^e<0?-1:1),i=n*(e<0!=n<0?-1:1);return["h"+.5*(e-r),"q"+i+",0 "+i+","+n,"t"+-i+","+n,-i+","+n,i+.5*r+","+n,i+.5*r+","+-n,-i+","+-n,-i+","+-n,i+","+-n,"h"+.5*(e-r)]}function I(e,t){var r=.4*e,n=.05*e*(!!t^e<0?-1:1),i=n*(e<0!=n<0?-1:1);return["v"+.5*(e-r),"q0,"+i+" "+n+","+i,"t"+n+","+-i,n+","+-i,n+","+(i+.5*r),-n+","+(i+.5*r),-n+","+-i,-n+","+-i,-n+","+i,"v"+.5*(e-r)]}function N(e){return{x:(e=e.getCTM()).e,y:e.f}}var w=null,S=null,E="",C="";this.comezar=function(h){(S=h.donde).getElementsByClassName("clpuzpezapz"),S.getElementsByClassName("clpuzcssdef");var v=800,g=500;h.dimx&&(v=Number(h.dimx)),h.dimy&&(g=Number(h.dimy));var b=h.im,x=new Image;x.src=b;var M=!1;x.onload=function(){if(!M){var e=x.width,t=x.height,r=h.pzh,n=h.pzv,i=v,a=g,o=h.imaxfondo,s=h.transfondo;if(S.style.minHeight=a+30,3*e<i&&2*t<a&&(t*=.5*i/e,e=.5*i),i<e&&(t*=i/e,e=i),a<t&&(e*=a/t,t=a),e={u:b,wd:e,ht:t,nh:r,nv:n},(t=S).innerHTML="",E=S.id+(new Date).valueOf()+"p",C=S.id+(new Date).valueOf()+"d",t.innerHTML='<div class="clpuzsvgf"></div><svg class="clpuzsvg"><defs class="cluzdef"  id="'+C+'"></defs><g id="'+E+'" class="clpezapz"></g></svg>',(t=S.getElementsByClassName("clpuzsvg")[0]).style.width=i+"px",t.style.height=a+"px",o&&((t=S.getElementsByClassName("clpuzsvgf")[0]).style.width=i+"px",t.style.height=a+"px",t.style.backgroundImage="url("+o+")",t.style.opacity=Number(s)/100),w=document,i=location.search)for(var l in i=i.slice(1).split("&"))o=i[l].indexOf("="),a=i[l].slice(0,o),o=unescape(i[l].slice(o+1)),e[a]=o;n=e.u,i=e.wd,a=e.ht,o=i/(l=e.nh),s=a/(e=e.nv),t=document.getElementById(C),r=document.getElementById(E),S.getElementsByTagName("svg")[0].getBoundingClientRect();var c=L(t,"symbol",{id:C+"im"});L(c,"image",{href:n,width:i,height:a}),n=[],c=[];for(var p=0;p<l;++p){n[p]=[];for(var m=0;m<e;++m){var u=String.fromCharCode(97+p)+String.fromCharCode(97+m),f=["M0,0"];0==m?f.push("h"+o):f=f.concat(y(o,(37*p^1009*m)%17&1)),p==l-1?f.push("v"+s):f=f.concat(I(s,(37*(p+1)^1009*m)%17&2)),m==e-1?f.push("h"+-o):f=f.concat(0,y(-o,(37*p^1009*(m+1))%17&1)),0==p?f.push("v"+-s):f=f.concat(0,I(-s,(37*p^1009*m)%17&2)),f.push("z"),d=f.join(" "),f=L(t,"pattern",{id:E+u,patternUnits:"userSpaceOnUse",patternContentUnits:"userSpaceOnUse",patternTransform:"translate("+-p*o+","+-m*s+")",x:0,y:0,width:i,height:a}),L(f,"use",{href:"#"+C+"im"}),f=L(r,"g",{id:E+u,transform:"translate("+Math.random()*(i-o)+","+Math.random()*(a-s)+")"}),L(f,"path",{d:d,fill:"url(#"+E+u+")"}),n[p][m]=f,c.push(f)}}for(p=0;p<l;++p)for(m=0;m<e;++m)i=n[p][m].adjs=[],0<p&&i.push({elt:n[p-1][m],dx:-o}),p+1<l&&i.push({elt:n[p+1][m],dx:o}),0<m&&i.push({elt:n[p][m-1],dy:-s}),m+1<e&&i.push({elt:n[p][m+1],dy:s});!function(c,e){function t(e){for(var t in e.preventDefault(),d=e.currentTarget.hunk,p=!0,o="touchstart"===e.type?(a=e.touches[0].clientX,e.touches[0].clientY):(a=e.clientX,e.clientY),d.elts){var r=(e=d.elts[t]).getCTM();e.startX=r.e,e.startY=r.f,e.parentNode.appendChild(e)}}function r(e){if(e.preventDefault(),p){for(e=0;e<d.elts.length;++e){var t,r=d.elts[e],n=N(r);for(t in r.adjs){var i=r.adjs[t];if(i.elt.hunk!=d){var a=N(i.elt);if(i.dx&&(a.x-=i.dx),i.dy&&(a.y-=i.dy),Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)<100){c.num+=1;var o=a.x-n.x;for(var s in n=a.y-n.y,d.elts){a=d.elts[s];var l=N(a);a.setAttribute("transform","translate("+(l.x+o)+","+(l.y+n)+")")}for(s in n=N(r),i=i.elt.hunk.elts,d.elts=d.elts.concat(i),i)i[s].hunk=d;if(c.num==c.total){document.getElementById(E).setAttribute("class","clpuzpezapzno"),LIM.poneravaliacion(S,T.properties.mensaben,!0,T.properties.ffinal,T.num);break}}}}}d=null,p=!1}}function n(e){if(e.preventDefault(),p){if("touchmove"===e.type)t=e.touches[0].clientX-a,e=e.touches[0].clientY-o;else{var t=e.clientX-a;e=e.clientY-o}for(var r in d.elts){var n=d.elts[r];n.setAttribute("transform","translate("+(n.startX+t)+","+(n.startY+e)+")")}}}c.getAttribute||(c=w.getElementById(c)),c.num=0,c.total=e.length-1;var i=[];for(l in e)i.push(e[l].hunk={i:l,elts:[e[l]]});var p=!1,d=null,a=null,o=null;for(var s in c.addEventListener("mousemove",n,!1),c.addEventListener("mouseup",r,!1),c.addEventListener("touchend",r,!1),c.addEventListener("touchmove",n,!1),i){var l=i[s];for(var m in l.elts){var u=l.elts[m];u.addEventListener("mousedown",t,!1),u.addEventListener("touchstart",t,!1)}}(i=S.getElementsByClassName("clpuzsvg")[0]).style.width="99%",i.style.heifht="99%"}(E,c),M=!0}}}}var r={imaxefondo:"",transfondo:100,imaxe:"",altimaxe:"",filas:"",columnas:""},A=1100;this.crear=function(){T.properties.minheight="430";var b=(T=LIM.prc(r,T)).properties.columnas||2,x=T.properties.filas||2,M=T.properties.imaxe||"",L=T.properties.imfondo||"",y=x*b,I=LIM.crearbase(T),N=LIM.paxina(),w=Array(y),S=Array(y),E=Array(y),C=Array(y),k=Array(y);if(null==T.donde&&LIM.comunes(I,T.txcabe,T.txpe,T.properties.ison,T.properties.autoson,T.properties.txliga,T.properties.paxliga),LIM.esactividad(I,!1),"1"==T.properties.forma)(new t).comezar({im:M,pzh:x,pzv:b,donde:I,imaxfondo:L,transfondo:T.properties.trans});else{if(""!=M){var e=new Image;LIM.cargaimaxe(e,T.properties.imaxe,0,0,function(r,e,t){function n(){for(var e=0;e<y;e++){var t=k[e];t.style.left=r+"px",t.style.top="0px",p[e]==e&&(w[e]=1)}return!0}function i(e,t,r){A++,e.style.zIndex=A;for(var n=parseInt(e.id),i=0;i<y;i++){if(LIM.ratosobre(e,C[i],t,r,!0)){n==i?-(w[n]=1)==w.toString().indexOf(0)&&(A++,(e=LIM.crearimaxe({pai:I,name:"imxfondo"+N,cssclass:"",posx:10,posy:0,alttext:T.properties.alttext})).style.border="solid 2px #8A0829",e.src=M,e.style.zIndex=A,LIM.poneravaliacion(I,T.properties.mensaben,!0,T.properties.ffinal,T.num)):w[n]=0;break}w[n]=0}return!0}if(I.style.minHeight=e+30,t){t=r/b,e/=x;var a=-1,o="etq"+N,s="dst"+N,l="",c="",p=LIM.desordena(y),d=0,m=0,u=0,f=1;"2"==T.properties.forma&&(f=50),""!=L&&((c=LIM.crearimaxe({pai:I,name:"imxfondo"+N,cssclass:"",posx:10,posy:0,alttext:T.properties.alttext})).border="1",c.src=L);for(var h=0;h<x;h++){for(var v=m=0;v<b;v++){d=p[++a],l=a+o,c=0-m+"px "+(0-u)+"px";var g=LIM.creardom("div",I,a+s,"",m+10,u);g.style.width=t+"px",g.style.height=e+"px",g.style.border="1px solid blue",g.style.position="absolute",g.style.zIndex=800+a,LIM.borde(g,f),g.style.backgroundColor="white",g.style.opacity=(100-T.properties.trans)/100,g.style.filter="alpha(opacity="+T.properties.trans+")",(l=LIM.creardom("div",I,l,"",m+10,u)).style.width=t+"px",l.style.height=e+"px",l.style.position="absolute",l.style.border="1px solid #333333",l.style.backgroundImage="url('"+M+"')",l.style.backgroundPosition=c,A++,l.style.zIndex=1100+d,LIM.drag(l,I,i),w[a]=0,C[a]=g,k[a]=l,S[a]=m+10+"px",E[a]=u+"px",m+=t,LIM.borde(l,f),"3"==T.properties.modo&&(l.style.font="14px Arial",l.style.textAlign="center",l.style.color="#00ff00",l.style.textShadow=" 1px 1px 0 #000000",l.innerHTML="   "+(a+1))}u+=e}"4"==T.properties.modo?setTimeout(n,2e3):("5"==T.properties.modo?function(){for(var e=0;e<y;e++){var t=k[e];t.style.left="670px",t.style.top="200px"}}:n)()}},!1,!1)}}}}function raiosx(x){var M={imaxe:"",imfondo:"",resposta:"",texto:"",imaxeAltText:[],posx:"",posy:"",tam:"",mensaben:"",mensamal:""};M=LIM.qhtml(x.donde,M),this.crear=function(){var t=(x=LIM.prc(M,x)).properties.imfondo||"",e=Number(x.properties.rdim||"60");if(""!=t){function r(e,t,r,n){function i(e){e.offsetX?(u=e.offsetX,curY=e.offsetY):e.layerX&&(u=e.layerX,curY=e.layerY),a(u,curY)}function a(e,t){c.globalCompositeOperation="source-over",c.clearRect(0,0,d,d),v?c.drawImage(b,0,0,d,m):(c.beginPath(),c.fillStyle="#333388",c.fillRect(0,0,d,d),c.fill(),c.stroke()),c.globalCompositeOperation="xor",c.strokeStyle="#000000",c.fillStyle="#ffffff",c.lineWidth=2,c.beginPath(),c.arc(e,t,p,0,2*Math.PI,!1),c.fill(),c.stroke(),c.strokeStyle="#FF000000",c.lineWidth=5,c.beginPath(),c.arc(e,t,p,0,2*Math.PI,!1),c.stroke()}var o=document.createElement("canvas");x.properties.imaxeAltText[0]&&o.setAttribute("title",x.properties.imaxeAltText[0]),o.width=d,o.height=m,o.className="clrx-b",e.appendChild(o),c=o.getContext("2d");var s=LIM.relposX(o),l=LIM.relposY(o)+80;a(f,h),o.style.backgroundImage="url('"+t+"')",o.style.backgroundRepeat="no-repeat",o.style.backgroundAttachament="fixed",o.style.backgroundPosition=r+"px "+n+"px",o.style.cursor="pointer",o.addEventListener("mouseup",function(e){o.removeEventListener("mousemove",i)}),o.addEventListener("mousedown",function(e){o.addEventListener("mousemove",i)}),o.addEventListener("touchmove",function(e){var t=event.targetTouches[0];a(t.pageX-s,t.pageY-l),e.preventDefault()})}var n=LIM.crearbase(x),i=LIM.paxina();null==x.donde&&LIM.comunes(n,x.txcabe,x.txpe,x.properties.ison,x.properties.autoson,x.properties.txliga,x.properties.paxliga),i="rx"+i;var c,p=e,d=650,m=426,u=0,f=p,h=p,v=!1;if(""!=x.properties.imaxe&&(v=!0),x.properties.texto){e=LIM.creardom("div",n,i+"ptx","clrx-pan");var a=document.createElement("a");e.appendChild(a);var o=LIM.creardom("div",a,i+"tx","clrx-text");o.innerHTML=x.properties.texto,LIM.crearlink({pai:e,url:"javascript:;",name:i+"bt",cssclass:"clrx-bt",alttext:LIM.td("Texto")}).onclick=function(){var e=this.parentNode;e.offsetHeight<15?(e.style.height="360px",o.style.visibility="visible"):(e.style.height="0px",o.style.visibility="hidden")}}if(x.properties.resp){x.properties.resp=x.properties.resp.toLowerCase();var s=x.properties.resp.split("|"),l=s.length;LIM.addEventSimple(LIM.esactividad(n,!0),"click",function(){for(var e=!1,t=g.value.toLowerCase(),r=0;r<l;r++)t==s[r]&&(e=!0);return e?(c.clearRect(0,0,d,m),c.globalAlpha=.2,LIM.poneravaliacion(n,x.properties.mensaben,!0,x.properties.ffinal,x.num)):LIM.poneravaliacion(n,x.properties.mensamal,!1,x.properties.ffinal,x.num),!0});var g=LIM.crearinput({pai:n,cssclass:"clinput clrx-in",name:i+"in",pholder:x.properties.pholder})}if(v){var b=new Image;b.src=x.properties.imaxe,b.onload=function(){d=b.width,m=b.height;var e=LIM.reduce(b.width,b.height,800,450);d=e.W,m=e.H,r(n,t,x.properties.posx,x.properties.posy)}}else r(n,t,x.properties.posx,x.properties.posy)}}}function relacionar(x){this.crear=function(){function e(e,t){var r="";if(""!=t)for(var n=t.split(","),i=0;i<n.length;i++)r+=e+"a"+n[i]+"|";return r}var t=x.properties.palabras||[],r=x.properties.etiquetas||[],n=t.length,i=r.length,o=LIM.crearbase(x),h=LIM.paxina();null==x.donde&&LIM.comunes(o,x.txcabe,x.txpe,x.properties.ison,x.properties.autoson,x.properties.txliga,x.properties.paxliga),LIM.addEventSimple(LIM.esactividad(o,!0),"click",function(){var e=!1,t=v.getElementsByClassName("clrela-lina").length;if(console.log(t+" - "+u),t==u){for(var r,n=d,i=v.getElementsByClassName("clrela-lina"),a=0;a<t;a++)r=i[a].id.split("l")[0]+"|",n.replace(r,""),-1<n.indexOf(r)&&(n=n.split(r).join(""));""==n&&(e=!0)}e?LIM.poneravaliacion(o,x.properties.mensaben,!0,x.properties.ffinal,x.num):LIM.poneravaliacion(o,x.properties.mensamal,!1,x.properties.ffinal,x.num)});var s=[],l=[],c=[],p=LIM.creardom("div",o,"","clrela-b",-1,-1),v=LIM.creardom("div",p,"","clrela-cl",-1,-1);for(a=0;a<n;a++)s=t[a].split("||"),l[a]=s[0],c[a]=s[1];var d="",g="#ADFF2F #00FA9A #FFC0CB #FFA500 #B0E0E6 #FFDEAD #F4A460 #FFD700 #FA8258 #A5DF00 #088A85 #81F79F #81DAF5 #E6E6E6 #F78181".split(" ");for(a=0;a<n;a++)d+=e(a+1,c[a]);var m,u=d.split("|").length-1;for(t="rela"+h,LIM.desordena(n),s="",a=0;a<n;a++){s=(a+1).toString()+t,etiq=LIM.creardom("button",p,s,"clrela-etq",20,83*a+20),etiq.innerHTML=l[a],etiq.style.backgroundColor=g[a];var b=etiq;LIM.addEventSimple(etiq,"click",function(){var e=(b=this).offsetHeight/2-f.offsetHeight/2+this.offsetTop;f.style.left=(this.offsetWidth+this.offsetLeft).toString()+"px",f.style.top=e.toString()+"px"}),0==a&&(m=etiq)}for(t="relb"+h,a=0;a<i;a++)s=(a+1).toString()+t,etiq=LIM.creardom("button",p,s,"clrela-etq",470,83*a+20),etiq.innerHTML=r[a],LIM.addEventSimple(etiq,"click",function(){if(b){var e=parseInt(b.id),t=parseInt(this.id),r=b.offsetLeft+b.offsetWidth-16,n=b.offsetTop+b.offsetHeight/2-15,i=this.offsetLeft+2,a=this.offsetTop+this.offsetHeight/2-16;t=e.toString()+"a"+t.toString()+"line"+h.toString();var o=document.getElementById(t);o?o.parentNode.removeChild(o):(s=v,l=t,c=r,p=n,d=i,m=a,u=g[e-1],f=Math.sqrt((c-d)*(c-d)+(p-m)*(p-m)),d="rotate("+180*Math.atan2(m-p,d-c)/Math.PI+"deg)",(m=document.createElement("div")).className="clrela-lina",m.id=l,m.style.position="absolute",m.style.transformOrigin=" left top",m.style.transform=d,m.style.width=f.toString()+"px",m.style.left=c.toString()+"px",m.style.top=p.toString()+"px",m.style.backgroundColor=u,s.appendChild(m),LIM.addEventSimple(m,"click",function(){this.parentNode.removeChild(this)}))}var s,l,c,p,d,m,u,f});var f=LIM.creardom("div",o,"","clrela-pnt");m.click(),r=80*n,n<i&&(r=80*i),v.style.height=r.toString()+"px"}}function reloxo(N){var w={};this.crear=function(){function e(){11<(f+=1)&&(f=0),LIM.xira(M,30*f)}function t(){--f<0&&(f+=12),LIM.xira(M,30*f)}function r(){59<(h+=1)&&(h=0,e()),LIM.xira(L,6*h),LIM.xira(M,30*f+h/2)}function n(){--h<0&&(h=59,t()),LIM.xira(L,6*h),LIM.xira(M,30*f+h/2)}w=LIM.prc(w,N);var i,a=N.properties.modo||"1",o=N.properties.forma||"1",s=N.properties.texto||"",l=N.properties.imaxe||"",c=N.properties.altimaxe||"",p=N.properties.hora||"",d=(N.properties.reloxo||"").split("|"),m=LIM.crearbase(N),u=LIM.paxina(),f=0,h=0;null==N.donde&&LIM.comunes(m,N.txcabe,N.txpe,N.properties.ison,N.properties.autoson,N.properties.txliga,N.properties.paxliga),"2"!=a?LIM.addEventSimple(LIM.esactividad(m,!0),"click",function(){if("0"==N.properties.modo){for(var e=!1,t=LIM.sspc(x.value).toUpperCase(),r=0;r<d.length;r++)if(t==LIM.sspc(d[r]).toUpperCase()){e=!0;break}}else"1"==a?(e=!0,f!=I&&f!=I-12&&(e=!1),h!=y&&(e=!1)):"4"==a&&(e=!0,t=x.value.split(":"),y=Number(t[1]),I=Number(t[0]),f!=I&&f!=I-12&&(e=!1),h!=y&&(e=!1));e?LIM.poneravaliacion(m,N.properties.mensaben,!0,N.properties.ffinal,N.num):LIM.poneravaliacion(m,N.properties.mensamal,!1,N.properties.ffinal,N.num)}):LIM.esactividad("",!1);var v=LIM.creardom("div",m,"crel"+u,"clrelo",20,10);if(""!=l)o=LIM.crearimaxe({pai:v,name:"imx"+u,cssclass:"",posx:0,posy:0,alttext:c}),LIM.cargaimaxe(o,l,360,360,"",!0,!0),""!=c&&(o.title=c);else{(l=LIM.creardom("canvas",v,"","clrelo-cv")).width=390,l.height=390;var g=l.getContext("2d"),b=180;g.translate(1.1*b,b),b*=.9,function(e){var n,t=g,r=b;function i(e,t,r){for(n.strokeStyle="black",n.lineWidth=r,r=0;r<e;r++)n.save(),n.beginPath(),n.translate(0,0),n.rotate(360*r/e*Math.PI/180),n.translate(0,-155),n.moveTo(0,0),n.lineTo(0,t),n.stroke(),n.closePath(),n.restore()}t.beginPath(),t.arc(0,0,r,0,2*Math.PI),t.fillStyle="white",t.fill(),t.lineWidth=.04*r,t.stroke(),t.beginPath(),t.arc(0,0,.1*r,0,2*Math.PI),t.fillStyle="#333",t.fill(),n=g,i(60,8,2),i(12,14,4),t=g,r=b;var a=[];switch(e){case 4:a="0 I II III IIII V VI VII VIII IX X XI XII".split(" ");break;case 3:a="0 1 2 3 4 5 6 7 8 9 10 11 12".split(" ");break;case 1:a=["0","3","6","9","12"];break;case 2:a=["0","III","VI","IX","XII"]}var o,s=a.length;for(t.fillStyle="#333",t.font=.15*r+"px arial",t.textBaseline="middle",t.textAlign="center",o=1;o<s;o++)e=o*Math.PI/((s-1)/2),t.rotate(e),t.translate(0,.75*-r),t.rotate(-e),t.fillText(a[o],0,0),t.rotate(e),t.translate(0,.75*r),t.rotate(-e)}(Number(o))}o=LIM.creardom("div",m,"","clcol1"),""!=N.properties.texto&&(LIM.creardom("div",o,"reltxt"+u,"clrelo-txt").innerHTML=s);var x=LIM.crearinput({pai:o,name:"relin"+u,cssclass:"clrelo-in",pholder:w.pholder}),M=LIM.creardom("div",v,"ah"+u,"clrelo-a hr"),L=LIM.creardom("div",v,"am"+u,"clrelo-a mr");s=[],s=p.split(":");var y=Number(s[1]),I=Number(s[0]);"1"==N.properties.modo||"4"==N.properties.modo?(p=LIM.creardom("div",v,"crelhh"+u,"clrelo-bt",30,360),LIM.addEventSimple(p,"mousedown",function(){e(),i=setInterval(e,400)}),p.innerHTML=LIM.td("H")+"+",p=LIM.creardom("div",v,"crelh"+u,"clrelo-bt",100,360),LIM.addEventSimple(p,"mousedown",function(){t(),i=setInterval(t,400)}),p.innerHTML=LIM.td("H")+"-",p=LIM.creardom("div",v,"crelmm"+u,"clrelo-bt",200,360),LIM.addEventSimple(p,"mousedown",function(){r(),i=setInterval(r,300)}),p.innerHTML=LIM.td("M")+"+",p=LIM.creardom("div",v,"crelm"+u,"clrelo-bt",270,360),LIM.addEventSimple(p,"mousedown",function(){n(),i=setInterval(n,300)}),LIM.addEventSimple(m,"mouseup",function(){clearInterval(i)}),p.innerHTML=LIM.td("M")+"-","1"==a?(x.readOnly="readonly",x.value=d):(v=(u=new Date).getHours(),h=u.getMinutes(),LIM.xira(L,6*h),f=v,LIM.xira(M,30*f+h/2))):"0"==a&&""!=p&&(f=I,h=y,LIM.xira(L,6*h),LIM.xira(M,30*f+h/2))}}function secreta(N){var w={texto:"",imaxe:"",altimaxe:"",palabras:"",letras:""};this.crear=function(){function e(e){if(x){parseInt(this.id);var t=this.innerHTML.toLowerCase();if(-1==this.className.indexOf("clsecre-tci")){var r=!1;for(this.className="clsecre-tcl clsecre-tci",e=0;e<m;e++)c[e]==t&&(y=LIM.lcambia(y,e,d[e]),I--,r=!0);r?(L.innerHTML=y,0==I&&("1"==n&&(M.style.display="block"),LIM.poneravaliacion(u,N.properties.mensaben,!0,N.properties.ffinal,N.num),x=!1)):(h[5- --s].parentNode.removeChild(h[5-s]),0==s&&(x=!1,LIM.poneravaliacion(u,N.properties.mensamal,!1,N.properties.ffinal,N.num),L.innerHTML=d))}}}var n=(N=LIM.prc(w,N)).properties.modo||"0",t=N.properties.forma||"0",r=N.properties.imaxe||"",i=N.properties.texto||"",a=N.properties.palabras||"",o=N.properties.imaxeAltText||"",s=6,l=N.properties.letras||LIM.letrascomun(),c=[];a=a.split("|");var p=LIM.desordena(a.length),d=a=LIM.ttrim(a[p[0]]);a=a.toLowerCase(),"1"!=t&&(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=(a=a.replace("á","a")).replace("à","a")).replace("â","a")).replace("é","e")).replace("è","e")).replace("ê","e")).replace("í","i")).replace("ì","i")).replace("î","i")).replace("ó","o")).replace("ò","o")).replace("ô","o")).replace("ú","u")).replace("ù","u")).replace("û","u")).replace("ü","u")),c=a.split(""),t=[],l=(t=l.split("")).length;var m=c.length,u=LIM.crearbase(N),f=LIM.paxina();p=Array(m);var h=Array(s),v=0;f="tecla"+f;var g="",b=0,x=!0;if(LIM.esactividad(u,!1),(v=document.createElement("div")).setAttribute("class","clsecre-base"),u.appendChild(v),""!=r){(g=LIM.creardom("div",v,g,"",20,5)).style.position="absolute";var M=document.createElement("div");M.setAttribute("class","clsecre-imx"),v.appendChild(M),(g=document.createElement("img")).title=o,g.className="clsecre-ix",g.src=r,M.appendChild(g),"1"==n&&(M.style.display="none")}""!=i&&((p=LIM.creardom("div",v,"","clsecre-cx",-1,-1)).innerHTML=i);var L=LIM.creardom("div",v,"","clsecre-in",-1,-1);for(85<a.length&&L.setAttribute("class","clsecre-in clsecre-min"),(i=document.createElement("div")).setAttribute("class","clsecre-pan"),v.appendChild(i),(r=document.createElement("div")).setAttribute("class","clsecre-bpnt"),i.appendChild(r),v=0;v<s;v++)(g=LIM.creardom("div",r,"","clsecre-pnt")).innerHTML=6-v,h[v]=g;for(r=LIM.creardom("div",i,"","clsecre-btcl",-1,-1),v=0;v<l;v++)g=v+f,(g=LIM.creardom("div",r,"","clsecre-tcl")).innerHTML=t[v],t[v]=t[v].toLowerCase(),p[v]=g,LIM.addEventSimple(g,"click",e),14==++b&&(b=0,0);var y="",I=0;for(r=0;r<m;r++)" "!=c[r]?","==c[r]?y+=",":"."==c[r]?y+=".":":"==c[r]?y+=":":";"==c[r]?y+=";":(y+="_",I++):y+=" ";L.innerHTML=y}}function seleccionar(N){var w={textos:[],imaxes:[],sons:[],correcta:[],imaxesAltText:[]};this.crear=function(){function e(e){e=parseInt(this.id),LIM.sonar(f[e])}function t(){for(var e=0;e<v;e++)L[e].checked?(M[e]=1,L[e].checked=!1):M[e]=0;if(M.toString()===I)for(LIM.poneravaliacion(x,N.properties.mensaben,!0,N.properties.ffinal,N.num),e=0;e<v;e++)L[e].style.visibility="hidden",0==M[e]&&LIM.transparencia(y[e],20);else LIM.poneravaliacion(x,N.properties.mensamal,!1,N.properties.ffinal,N.num)}selecciona=LIM.prc(w,N);for(var r,n,i,a,o=N.properties.imaxe||"",s=N.properties.altimaxe||"",l=N.properties.etiquetas||[],c=[],p=[],d=[],m=[],u=[],f=[],h=l.length,v=0,g=0,b=0;b<h;b++)r=(c=l[b].split("||"))[0]||"",n=c[1]||"",i=c[2]||"",a=c[3]||"",c=c[4]||"",(n||i||c)&&(v++,p.push(r),"1"==r&&g++,d.push(n),m.push(i),u.push(a),f.push(c));var x=LIM.crearbase(N);l=LIM.paxina();var M=Array(v),L=Array(v),y=Array(v);h=b=0,r=LIM.desordena(v);var I=p.toString();for(LIM.addEventSimple(LIM.esactividad(x,!0),"click",t),p="clselec-cadro",3==v&&(p+=" clselec-u3"),2==v&&(p+=" clselec-u2"),o&&((n=LIM.creardom("div",x,"","clselec-im",0,0)).src=o,n.title=s),(o=document.createElement("div")).className="clselec-base",x.appendChild(o),b=0;b<v;b++)s=r[b],(n=document.createElement("div")).className=p,o.appendChild(n),i=LIM.crearchk(n,s+"rep"+l,"clselec"),n=LIM.crearlabel(n,s+"rep"+l,s+"lrep"+l,"clselec-lab","","",""),1==g&&LIM.addEventSimple(i,"click",t),M[s]=0,L[s]=i,y[s]=n,""!=m[s]&&((i=document.createElement("img")).title=u[s],i.className="clselec-imx",n.appendChild(i),i.src=m[s]),""!=d[s]&&((i=LIM.creardom("div",n,s+"txt"+l,"clselec-text",0,0)).innerHTML=d[s]),""!=f[s]&&(s=LIM.crearlink({pai:n,name:s+"reps"+l,text:"",url:"javascript:;",cssclass:"clselec-son",alttext:LIM.td("Reproducir sonido")}),LIM.addEventSimple(s,"click",e),s.innerHTML="&#x25BA;"),2==b&&(h=-1),h++}}function serie(g){var b={};this.crear=function(){function e(e){e.preventDefault()}function t(e){var t=e.target;"clser-i"==e.target.className&&(t=e.target.parentNode),e.dataTransfer.setData("text/html",t.id)}function r(e){e.preventDefault();var t=e.dataTransfer.getData("text/html"),r=LIM.dom(t);r&&"clser-c"==r.className&&(parseInt(t),e.target.style.backgroundImage='url("'+r.childNodes[0].src+'")')}selecciona=LIM.prc(b,g);for(var n=g.properties.modo||"0",i=g.properties.etiquetas||[],a=[],o=[],s=[],l=i.length,c=0;c<l;c++)a=i[c].split("||"),o[c]=a[0]||"",s[c]=a[2]||"";var p=LIM.crearbase(g);i=LIM.paxina();var d=Array(12),m=Array(12),u=LIM.desordena(l),f=LIM.desordena(l);LIM.addEventSimple(LIM.esactividad(p,!0),"click",function(){for(var e,t=!0,r=0;r<12;r++)d[r]&&(""!=(e=d[r].style.backgroundImage)?(e=(e=(e=e.toLowerCase()).match(/[\w\.\$]+(?=png|jpg|gif)\w+/g)).toString())!=m[r]&&(d[r].style.backgroundImage="",t=!1):t=!1);t?LIM.poneravaliacion(p,g.properties.mensaben,!0,g.properties.ffinal,g.num):LIM.poneravaliacion(p,g.properties.mensamal,!1,g.properties.ffinal,g.num)});var h=LIM.creardom("div",p,"","clser-base");for(c=0;c<l;c++)(a=LIM.creardom("div",h,"","clser-cir",0,0)).setAttribute("draggable","false"),a.setAttribute("draggable","false"),a.style.backgroundImage="1"==n?'url("'+o[f[c]]+'") ':'url("'+o[c]+'")';var v=0;for(c=0;c<12;c++)a=LIM.creardom("div",h,"","clser-cir",0,0),d[c]=a,m[c]="1"==n?o[f[v]].toLowerCase().match(/[\w\.\$]+(?=png|jpg|gif)\w+/g):o[v].toLowerCase().match(/[\w\.\$]+(?=png|jpg|gif)\w+/g),++v==l&&(v=0),a.addEventListener("drop",r,!1),a.addEventListener("dragover",e,!1);for(h=LIM.creardom("div",p,"","clser-m"),c=0;c<l;c++)a=LIM.creardom("div",h,c.toString()+"med"+i.toString(),"clser-c",0,0),(n=LIM.crearimaxe({pai:a,cssclass:"clser-i",alttext:s[c]})).style.visibility="hidden",LIM.cargaimaxe(n,o[u[c]],130,90,"",!0,!0),a.setAttribute("draggable","true"),a.addEventListener("dragstart",t,!1)}}function sopa(z){var B={};this.crear=function(){function e(e){if(1==C){for(var r=!0;r;){var n=parseInt(Math.random()*d),i=parseInt(Math.random()*d),a=n+i*d;""==h[a].innerHTML&&(r=!1)}h[a].innerHTML=s[e]}else if(s[e].length<d)for(r=!0,e=s[e],npl=e.length;r;){n=parseInt(Math.random()*d),i=parseInt(Math.random()*d);var o=parseInt(Math.random()*x);switch(a=n+i*d,o){case 0:if(n+npl<d){for(benn=!0,t=0;t<npl;t++)n=a+t,""!=h[n].innerHTML&&h[n].innerHTML!=e[t]&&(benn=!1);if(benn)for(r=!1,t=0;t<npl;t++)n=a+t,h[n].innerHTML=e[t]}break;case 1:if(i+npl<d){for(benn=!0,t=0;t<npl;t++)n=a+d*t,""!=h[n].innerHTML&&h[n].innerHTML!=e[t]&&(benn=!1);if(benn)for(r=!1,t=0;t<npl;t++)n=a+d*t,h[n].innerHTML=e[t]}break;case 2:if(n+npl<d&&i+npl<d){for(benn=!0,t=0;t<npl;t++)n=a+d*t+t,""!=h[n].innerHTML&&h[n].innerHTML!=e[t]&&(benn=!1);if(benn)for(r=!1,t=0;t<npl;t++)n=a+d*t+t,h[n].innerHTML=e[t]}}}}function l(e){if(1==C){var t=[],r=c((e=(e=e||event).target||e.srcElement).innerHTML);-1!=r&&(t.push(h[e.id]),e.style.backgroundColor=M[r],f[r]=1,e.removeEventListener("click",l),1==N&&v[r]&&(v[r].style.backgroundColor=M[r]),p())}else{var n="";r=-1,t=[];var i=0;if("clsopa-marca"==(e=(e=e||event).target||e.srcElement).className&&(e=E.elementFromPoint),"clsopa-base"==e.className){if(-1!=w){if(h[w].style.backgroundColor=O,(i=(S=parseInt(e.id))<w?(r=S,w):(r=w,S))-r<d){for(e=r;e<i+1;e++)n+=h[e].innerHTML,t.push(h[e]);i=1}else if(0==(i-r)%d){for(var a=e=0;a<i;)n+=h[a=r+e*d].innerHTML,t.push(h[a]),e++;i=2}else{for(a=e=0;a<i;)n+=h[a=r+e*d+e].innerHTML,t.push(h[a]),e++;i=3}r=c(n),w=-1}else w=parseInt(e.id),e.style.backgroundColor="#00ff00";if(-1!=r){for(n=r,e=t.length,a=0;a<e;a++)t[a].style["font-weight"]=800;1==N&&v[n]&&(v[n].style.backgroundColor=M[n]),ipx=parseInt(t[0].style.left)-10,ipy=parseInt(t[0].style.top),LIM.getPosition(t[0]),fpx=parseInt(t[e-2].style.left)-ipx,fpy=20,parseInt(t[0].style.top),parseInt(t[e-1].style.top),parseInt(t[0].style.left),parseInt(t[e-1].style.left);var o=(a=parseInt(t[0].style.width))/2,s=document.createElement("DIV");s.className="clsopa-marca",q.appendChild(s),s.style.top=t[0].style.top,s.style.left=t[0].style.left,1==i?(s.style.width=e*a+2+"px",s.style.height=a+"px"):2==i?(s.style.height=e*a+3+"px",s.style.width=a-2+"px"):3==i&&(s.style.width=1.4*e*a+2+"px",s.style.height=a-5+"px",s.style.transform="rotate(45deg)",s.style.transformOrigin=o+"px "+o+"px "),s.style.backgroundColor=M[n],f[r]=1,p()}}}}function c(e){var t=-1;for(g=0;g<a;g++)if(s[g]==e){s[g]="",t=g;break}return t}function p(){-1==f.toString().indexOf(0)&&LIM.poneravaliacion(m,z.properties.mensaben,!0,z.properties.ffinal,z.num)}B=LIM.prc(B,z);var s=z.properties.palabras||[];if(":"==s[0][0]){var r=Number(s[0].replace(/:/gi,""));s.shift(),s=function(e,t){for(var r=e.length-1;0<r;r--){var n=Math.floor(Math.random()*(r+1)),i=e[r];e[r]=e[n],e[n]=i}return e.splice(0,t)}(s,r)}var n=z.properties.enunciados||s,i=z.properties.imaxesAltText||[],a=s.length,d=Number(z.properties.tam)||20,o=(r=(z.properties.letras||LIM.letrascomun()).split("")).length,m=LIM.crearbase(z),u=LIM.paxina(),f=Array(a),h=Array(d),v=Array(a),g=0,b=z.properties.cadro||"0",x=Number(z.properties.pospalabra||"3"),M="#ADFF2F #00FA9A #FFC0CB #FFA500 #B0E0E6 #FFDEAD #F4A460 #FFD700 #FA8258 #A5DF00 #088A85 #81F79F #81DAF5 #E6E6E6 #F78181".split(" ");LIM.esactividad(m,!1),g=0,LIM.desordena(a);var L=0,y=0,I=d*d,N=!1,w=-1,S=0,E=void 0,C=0;L=LIM.creardom("div",m,"","clsopa-marco clsopa-marco2",-1,-1);var k="2"==z.properties.modo?LIM.creardom("div",L,"","clsopa-col1",-1,-1):LIM.creardom("div",L,"","clsopa-colenun",-1,-1),T=LIM.creardom("div",L,"","clsopa-col2",-1,-1);if(1==s[0].length&&(C=1),"2"==z.properties.modo){N=!0;var A=n.length;if(4<A)var H=LIM.creardom("div",L,"","clsopa-col3",-1,-1);for(g=0;g<A;g++)E=LIM.creardom("div",k,g+"enun"+u,"clsopa-enunim",-1,-1),(L=document.createElement("img")).title=i[g],L.className="clsopa-imx",E.appendChild(L),v[g]=E,L.src=n[g],4==++y&&(y=L=0,k=H)}else if(y="clsopa-enun","1"==z.properties.enunciado)for(0==n.length&&(y="clsopa-enun clsopa-enun2",n=s),L.className="clsopa-marco",N=!0,A=n.length,g=0;g<A;g++)(E=LIM.creardom("div",k,g+"enun"+u,y,-1,-1)).innerHTML=n[g],v[g]=E,z.properties.txtam&&(E.style.fontSize=z.properties.txtam+"px");y=L=0,n=25,z.properties.tam<12&&7<z.properties.tam&&(n=45),z.properties.tam<8&&(n=85),LIM.creardom("div",T,"","clsopa-fondo",0,0).style.position="relative";var q=LIM.creardom("div",T,"fsopa"+u,"",0,0);q.style.position="relative",q.style.border="solid 1px",q.style.width=22+n*d+"px",q.style.height=22+n*d+"px",q.style.backgroundColor="#ffffff",(E=LIM.creardom("div",T,"fsopa"+u,"",0,0)).style.position="relative",E.style.border="solid 1px",E.style.width=22+n*d+"px",E.style.height=22+n*d+"px",E.zIndex=500,E.addEventListener("mouseout",function(e){}),1!=C&&(E.addEventListener("mousedown",function(e){l(e),e.preventDefault()},!1),E.addEventListener("mouseup",function(e){l(e)})),(T=document.createElement("span")).setAttribute("class","clsopa-base");var O=T.style.backgroundColor;if("0"!=b)for(g=0;g<I;g++)(b=LIM.creardom("div",q,"","clsopa-subbase",2+(n+1)*L,2+(n+1)*y)).style.width=n+"px",b.style.height=n+"px",b.style.lineHeight=n+"px",++L==d&&(L=0,y++);for(g=y=L=0;g<I;g++)etiqf=LIM.crearlink({pai:E,name:g+"sopa"+u,text:"",url:"javascript:;",cssclass:"clsopa-base",posx:2+(n+1)*L,posy:2+(n+1)*y}),z.properties.tam<10&&(etiqf.style.fontSize="36px"),etiqf.style.width=n+"px",etiqf.style.height=n+"px",etiqf.style.lineHeight=n+"px",h[g]=etiqf,LIM.addEventSimple(etiqf,"click",l),++L==d&&(L=0,y++);for(g=0;g<a;g++)e(g),f[g]=0,s[g].length>d-1&&(f[g]=1);for(g=0;g<I;g++)""==h[g].innerHTML&&(h[g].innerHTML=r[Math.floor(Math.random()*o)])}}function test(w){var S={texto:"",respuestas:[],feed:[],imaxe:"",altimaxe:""};this.crear=function(){function e(){I&&(N.innerHTML="");for(var e=0;e<l;e++)m[e].checked?(I=s[e],d[e]=1):d[e]=0;if(I&&(N.style.display="block",N.innerHTML=I),d.join("")==M)LIM.poneravaliacion(c,w.properties.mensaben,!0,w.properties.ffinal,w.num);else for(LIM.poneravaliacion(c,w.properties.mensamal,!1,w.properties.ffinal,w.num),e=0;e<l;e++)m[e].checked=!1}S=LIM.prc(S,w);var t,r=w.properties.respuestas||"",n=w.properties.imaxe||"",i=w.properties.altimaxe||"",a=w.properties.texto||"",o=w.properties.forma||"0",s=w.properties.feed||[],l=r.length,c=LIM.crearbase(w),p=LIM.paxina(),d=Array(l),m=Array(l),u="test",f=0,h=LIM.tcontido(n),v="",g="",b=[];u=0;var x=LIM.desordena(l);for("@"==(u=w.properties.corr||"000000").charAt(0)&&(u=LIM.decode(u)),t=0;t<l;t++)"1"==u[t]&&f++;var M=u.substring(0,l);if(LIM.addEventSimple(LIM.esactividad(c,!0),"click",e),""!=a){if("0"==o)var L=LIM.creardom("div",c,"texto"+p,"cltest-text",10,5);"1"==o&&(L=LIM.creardom("div",c,"texto"+p,"cltest-text cltest-textd",10,5)),L.innerHTML=a}if(""!=n?(t=LIM.creardom("div",c,"cmed"+p,"cltest-media",-1,-1),a=LIM.creardom("div",t,"","cltest-bmed",-1,-1),"s"==h?i=LIM.crearswf(a,"coswf"+p,n,"",0,0,360,300,""):"v"==h?(i=LIM.crearvid(a,"covid"+p,n,"",0,0,360,300,"")).style.border="solid 1px #cccccc":"i"==h?t.innerHTML=""!=i?"<img src='"+n+"' class='cladx-im' title='"+i+"'>":"<img src='"+n+"' class='cladx-im' >":(a.style.width="380px",a.innerHTML=n)):(L&&(L.className="cltest-text cltest-texts"),o="1"),"0"==o)var y=LIM.creardom("div",c,"","cltest-base");for("1"==o&&(y=LIM.creardom("div",c,"","cltest-based")),""==n&&"0"==o&&(y.style.marginLeft="120px"),t=0;t<l;t++)netq=x[t],u=t+1,v+='<input  id="'+(g=netq+"rep"+p)+'" type="Checkbox" class="cltest-ck" value=""><label for="'+g+'" class="cltest-lab"><span class="cltest-nm">'+u+'</span><div class="cltest-txt">'+r[netq]+"</div></label>",d[netq]=0,b[netq]=g;for(y.innerHTML=v,t=0;t<l;t++)m[t]=document.getElementById(b[t]),1==f&&LIM.addEventSimple(m[t],"click",e);if(""!=s){var I=s[1],N=LIM.creardom("div",c,"mtexto"+p,"cltest-feed");N.innerHTML=""}}}function texto(l){var n={};n=LIM.qhtml(l.donde,n),this.crear=function(){function e(e){for(var t=0;t<d.length;t++);for(s=d.join("").replace(/[ ]/g,""),(e=(u=c(e)).innerHTML).split(" "),t=0;t<d.length;t++)e=e.replace("[?]",d[t]);for(u.innerHTML=e,e=(e=(e=(e="   "+u.innerHTML+" ").replace(/<\/?span[^>]*>/g,"")).replace(/<br>/g,"</br>")).replace(/<\/br>/g," </br> "),e=(e=(e=(u.innerHTML=e).split(/\s+/).join("</span> <span>")).replace("</span>","")).substring(0,e.lastIndexOf("<span>")),u.innerHTML='<p class="cltxts-palabra">'+e+"</p>",e=u.getElementsByTagName("SPAN"),t=0;t<e.length;t++)e[t].addEventListener("click",function(){this.classList.toggle("cltxts-marca")},!1)}function c(e){e.innerHTML="";var t=document.createElement("DIV");return e.appendChild(t),t.innerHTML=r,t}function p(e){for(var t=Array(e),r=0;r<e;r++)t[r]=r;for(var n;e;)n=Math.floor(Math.random()*e--),r=t[e],t[e]=t[n],t[n]=r;return t}var r=(l=LIM.prc(n,l)).properties.texto,d=l.properties.palabras||"",i=Number(l.properties.modo)||0,t=l.properties.forma||"16";1==i&&(i=3);var a=LIM.crearbase(l),o=LIM.creardom("div",a,"","cltxts-base");o.style.fontSize=Number(t)+8+"px";var m=LIM.paxina();LIM.addEventSimple(LIM.esactividad(a,!0),"click",function(){var e=!1;switch(i){case 0:for(var t=o.querySelectorAll(".cltxts-marca"),r="",n=0;n<t.length;n++)r+=t[n].textContent;r==s&&(e=!0);break;case 1:for(e=!0,t=o.querySelectorAll(".cltxts-in"),r=0;r<t.length;r++)t[r].value.trim()!=d[r]?e=!1:(t[r].setAttribute("readonly","readonly"),t[r].classList.add("cltxts-infx"));break;case 2:u.textContent==f&&(e=!0);break;case 3:for(e=!0,t=o.querySelectorAll(".cltxts-dw"),r=0;r<t.length;r++)t[r].value.trim()!=d[r]?e=!1:(t[r].disabled=!0,t[r].classList.add("cltxts-dwfx"))}e?LIM.poneravaliacion(a,l.properties.mensaben,!0,l.properties.ffinal,l.num):LIM.poneravaliacion(a,l.properties.mensamal,!1,l.properties.ffinal,l.num)});var u,f="",s="";switch(""==d&&(t=function(e){for(var t=["<br>","</br>"],r=0;r<t.length;r++)e=e.split(t[r]).join(" "+t[r]+" ");var n=/(?:^|[ ])\*([a-zA-Z]+)/g;if(t=[],r={},-1<e.indexOf(" *"))for(n.exec(e),t=e.match(/\*\S+/g),n=0;n<t.length;)e=e.replace(t[n],"#"+t[n].substring(1)+"#"),n++;if(t=e.match(/#.*?#/g))for(r.palabras=t.map(function(e){return e.replace(/#/g,"")}),n=0;n<t.length;)e=e.replace(t[n],"[?]"),r.palabras[n]=r.palabras[n].replace(/  +/g," "),n++;else r.palabras=[];return r.texto=e,r}(r),r=t.texto,d=t.palabras),i){case 0:e(o);break;case 1:!function(e){u=c(e);var t=d;e=(e=u.innerHTML).split("[?]").join("<input class='cltxts-in'  ></input>"),u.innerHTML=e,e=u.querySelectorAll(".cltxts-in");for(var r=0;r<e.length;r++)e[r].addEventListener("keypress",function(e){this.style.width=0,e=this.scrollWidth+14,this.scrollWidth>=this.clientWidth&&(e+=10),""!=this.value&&(this.style.width=e+"px")});LIM.addEventSimple(LIM.esactividad(a,!0),"click",function(){compruebaes(u,t)})}(o);break;case 2:!function(e){function o(e,t,r){for(e.style.position="absolute",e.style.visibility="hidden",e=("cltxts-destino"==(t=document.elementFromPoint(t,r)).className?(e.style.visibility="visible",t.style.width=e.width,t.innerHTML=e.innerHTML,l[parseInt(e.id)]=t):(e.style.visibility="visible",t=parseInt(e.id),null!=l[t]&&(l[t].innerHTML=n,l[t]=null),s[t].style.top=e.parentNode.offsetTop-20+"px"),0);e<i.length;e++)null!=l[e]&&(s[e].style.top=l[e].offsetTop+"px",s[e].style.left=l[e].offsetLeft+"px")}var s=[],l=[];u=c(e);for(var n="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",t=u.textContent,i=d,r=0;r<i.length;r++)t=t.replace("[?]",i[r]);r=u.innerHTML;var a="<div class='cltxts-destino' >"+n+"</div>";r=r.split("[?]").join(a),u.innerHTML=r,f=t,function(e,t,r){document.getElementById(t+"-mov")?t=document.getElementById(t+"-mov"):((t=document.createElement("DIV")).className="cltxts-baseetiq",e.appendChild(t));for(var n,i=p(r.length),a=0;a<r.length;a++)(n=document.createElement("div")).className="cltxts-etiq cltxts-drag",n.id=a+"palas"+m,n.innerHTML=r[i[a]],s[a]=n,l[a]=null,t.appendChild(n),LIM.drag(n,e,o)}(e,e,i)}(o);break;case 3:!function(e){u=c(e);var t=d,r=p(t.length);e='<option value="?">?</option>';for(var n=0;n<t.length;n++)e+='<option value="'+t[r[n]]+'">'+t[r[n]]+"</option>";e="<select class='cltxts-dw'>"+e+"</select>",t=(t=u.innerHTML).split("[?]").join(e),u.innerHTML=t}(o);break;default:e(o)}}}function unir(b){this.crear=function(){function e(e,t,r){for(u++,e.style.zIndex=u,t=parseInt(e.id),e.id.substring(e.id.length-1),r=l[t]=0;r<a;r++){var n=c[r];if(LIM.estasobre(e,n,!1)){e.style.top=n.style.top,p[t]==n.innerHTML?-(l[t]=1)==l.toString().indexOf(0)&&LIM.poneravaliacion(o,b.properties.mensaben,!0,b.properties.ffinal,b.num):l[t]=0;break}l[t]=0}}var t,r=b.properties.unir||[],n=b.properties.textos||[],i=r.length,a=n.length,o=LIM.crearbase(b),s=LIM.paxina(),l=Array(i),c=Array(a),p=Array(a),d=0,m="",u=1100;LIM.addEventSimple(LIM.esactividad(o,!0),"click",function(){-1<l.toString().indexOf(0)?LIM.poneravaliacion(o,b.properties.mensamal,!1,b.properties.ffinal,b.num):LIM.poneravaliacion(o,b.properties.mensaben,!0,b.properties.ffinal,b.num)}),d=0,t="etq"+s,m="";var f=LIM.desordena(i),h=0,v=LIM.creardom("div",o,"","clunir-u1",-1,-1);for(d=0;d<i;d++){m=(h=f[d])+t;var g=LIM.creardom("div",v,d+"dstu"+s,"clunir-etq",20,70*d+20);g.innerHTML=n[d],p[h]=n[h],c[h]=g,m=LIM.creardom("div",v,m,"clunir-drg",470,70*d+20),50<r[h].length&&(m.style.fontSize="12px"),m.innerHTML=r[h],LIM.drag(m,o,e),l[h]=0}}}function unirimx(w){this.crear=function(){function e(e,t,r){v++,e.style.zIndex=v;var n=parseInt(e.id);e.id.substring(e.id.length-1);for(var i=0;i<p;i++){var a=o[i];if(LIM.estasobre(e,a,!1)||LIM.ratosobre(e,a,t,r,!1)){u[n]==o[i].val?-(m[n]=1)==m.toString().indexOf(0)&&LIM.poneravaliacion(d,w.properties.mensaben,!0,w.properties.ffinal,w.num):m[n]=0;break}m[n]=0}}if(w.properties.etiquetas)for(var t=w.properties.etiquetas.length,o=Array(t),r=[],n=[],i=[""],a=[],s=[],l=[],c=0;c<t;c++)arretq=w.properties.etiquetas[c].split("||"),r[c]=arretq[0],a[c]=arretq[1],n[c]=arretq[2],i[c]=arretq[3]||"",s[c]=arretq[4]||"",s[c]=arretq[5]||"";else r=w.properties.imaxd||[],n=w.properties.imaxes||[],i=w.properties.textos||[""],a=w.properties.sons||[],s=w.properties.imaxesAltText||[],l=w.properties.imaxesfAltText||[];var p=r.length;c=n.length;var d=LIM.crearbase(w);t=LIM.paxina();var m=Array(p);o=Array(c);var u=Array(c);c=0;var f,h="",v=1100;LIM.addEventSimple(LIM.esactividad(d,!0),"click",function(){-1<m.toString().indexOf(0)?LIM.poneravaliacion(d,w.properties.mensamal,!1,w.properties.ffinal,w.num):LIM.poneravaliacion(d,w.properties.mensaben,!0,w.properties.ffinal,w.num)}),c=0,f="etq"+t,h="";var g=LIM.desordena(p),b=0,x=LIM.creardom("div",d,"","clunirimx-u1",-1,-1),M=LIM.creardom("div",d,"","clunirimx-u1",-1,-1);for(c=0;c<p;c++){h=c+f;var L=(b=g[c])+f,y=LIM.creardom("div",x,"","clunirimx-pz",-1,-1),I=LIM.creardom("div",y,h,"clunirimx-fix",-1,-1),N=LIM.crearimaxe({pai:I,name:c+"imxf"+t,cssclass:"",posx:1,posy:1,alttext:s[c]});N.style.visibility="hidden",LIM.cargaimaxe(N,n[c],178,118,"",!0,!0),m[c]=0,i[c]&&(LIM.creardom("div",I,c+"txt"+t,"clunirimx-bandat",0,84).innerHTML=i[c]),""!=a[c]&&(I.style.cursor="pointer",LIM.addEventSimple(I,"click",function(){var e=parseInt(this.id);LIM.sonar(a[e])})),(I=LIM.creardom("div",y,"b"+h,"clunirimx-dest",-1,-1)).title=LIM.td("Suelta la imagen aquí"),o[c]=I,o[c].val=c,h=LIM.creardom("div",M,L+"m","clunirimx-mov",-1,-1),(L=LIM.crearimaxe({pai:h,name:c+"imxm"+t,cssclass:"",posx:1,posy:1,alttext:l[b]})).style.visibility="hidden",LIM.cargaimaxe(L,r[b],178,118,"",!0,!0),u[c]=c,LIM.drag(h,d,e)}}}window.LIM=new function(){function u(e){return void 0!==e&&null!=e}function f(e,t,r){void 0!==(e=P.querySelector(e))&&null!=e&&(null==e.getAttribute("title")&&e.setAttribute("title",M.td(r)),t&&"function"==typeof t&&e.addEventListener("click",function(e){e.preventDefault(),t()}))}function c(e){return parseInt(e)==e&&(e+="px"),e}function l(e){return e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null==(e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.href))?null:e[1]}function h(e,t,r,n){var i="",a="",o=t.split(",");if(o.length<1)i=o[0].substr(0,o[0].lastIndexOf("."))+".mp3",a=o[0].substr(0,o[0].lastIndexOf("."))+".ogg";else for(var s=0;s<o.length;s++)"mp3"==(t=o[s].substr(o[s].lastIndexOf(".")+1))&&(i=o[s]),"ogg"==t&&(a=o[s]);e.canPlayType("audio/mpeg;")&&""!=i?e.setAttribute("src",i):""!=a&&e.setAttribute("src",a),n&&(e.loop=!0),r&&(e.volume=Number(r)/100),e.play()}function d(e){""!=(e=e.target.value)&&(ue=e)}function p(e){var t="";return""!=e&&document.getElementById(e)&&(t=document.getElementById(e)),t}function m(e){function t(){var e=n(this.getAttribute("href"));for(var t in window.scrollTo(0,0),a)if(t==e){i[t].className=" selected",a[t].style.display="block";var r=e.replace(/^\D+/g,"");v(r),g(r)}else i[t].className="",a[t].style.display="none";return!1}function r(e,t){for(var r=0;r<e.childNodes.length;r++)if(e.childNodes[r].nodeName==t)return e.childNodes[r];return!0}function n(e){var t=e.lastIndexOf("#");return e.substring(t+1)}var i=[],a=[];e=document.getElementById(e).childNodes;for(var o=0;o<e.length;o++)if("LI"==e[o].nodeName){var s=r(e[o],"A"),l=n(s.getAttribute("href"));i[l]=s,a[l]=document.getElementById(l)}for(l in o=0,i)i[l].onclick=t,0==o&&(i[l].className=" selected"),o++;for(l in o=0,a)a[l].style.display=0==o&&"none"==a[l].style.display?"block":"none",o++}function v(e){return K=e,H&&1<te&&(H.innerHTML=e),1}function g(e){return""!=ae[e].cond&&M.condicional(ae[e].cond),X&&(X.style.width=((e+1)/te*100).toString()+"%"),lim_sc("paxina",e+1),j&&(e==te-1||pe[e]?(j.style.visibility="hidden",W=!0):!pe[e]&&W&&(j.style.visibility="visible",W=!1),G.parentNode.parentNode.getElementsByClassName("pclsuper")[0]&&0==e&&G.parentNode.parentNode.getElementsByClassName("pclsuper")[0].scrollIntoView()),D&&(0==e||de[e]?(D.style.visibility="hidden",me=!0):!de[e]&&me&&(D.style.visibility="visible",me=!1)),oe[e]?M.sonar(oe[e]):t.pause(),1}function b(e){try{var t=JSON.parse(e)}catch(e){throw new M.modal(document.getElementById("lim"),0,"clmodal-avalia").open(M.td('Error en los datos<p>Código 2</p><p style="font-size:12">'+M.td("La estructura de los datos no es correcta")+"</p>")),Error(M.td("Error en los datos"))}return t}var M=this;l("dbg")&&window.addEventListener("error",function(){var e=(M.nup+1).toString();console.log("error pax: "+e),alert(M.td("error pax: ")+e)});var L="./sclim/";"function"!=typeof lim_sc&&(window.lim_sc=function(){});var y,I,N="CORRECTO",w="INCORRECTO",S=L+"mal.mp3",E=L+"ben.mp3",C=L+"av.mp3",o=[],t=new Audio,k=new Audio;k.loop=!1,k.volume=.1;var s,T,A,H,q,O,z,a,B,P,F,_,W,j,D,R,X,Y=new Audio,V=new Audio,J=new Audio,n=[],U=0,G=null,Z=null,K=1,Q=0,ee=0,te=0,re=!1,ne=null,ie=null,ae=[],oe=[],se="",le="1",ce="",pe=[],de=[],me=!1,ue="",fe=0,he=1,ve="",ge=0,be=new Date,xe="abcdefghijklmnñopqrstuvwxyzç";document.addEventListener("beforeunload",function(){lim_sc("fin",2)}),M.letrascomun=function(){return xe},M.lim_dat=function(e,t){switch(e=e.toLowerCase()){case"nome_usuario":ue=t;break;case"id":ve=t;break;case"av":M.avanza();break;case"rt":M.retrocede();break;case"informe":M.amosainforme();break;case"get":var r="",n="";switch(t){case"nome_usuario":r="nome_usuario",n=ue;break;case"total_activ":r="total_activ",n=fe;break;case"tipo_paxina":r="tipo_paxina";break;case"total_ben":r="total_ben",n=ge.toString();break;case"total_mal":for(r="total_mal",n=_totalmal=0;n<te;n++)2==nota[n]&&_totalmal++;n=_totalmal.toString();break;case"nome_libro":r=t,n=_;break;case"total_paxinas":r=t,n=exer.toString();break;case"paxina_actual":r=t,n=nump+1;break;case"data":r=t,n=(n=new Date).getDate()+"/"+Number(n.getMonth()+1)+"/"+n.getFullYear();break;case"titulo":r=t,n=_;break;case"autor":r=t,n=void 0;break;case"id":r=t,n=ve;break;case"tempo_inicio":n=(n=new Date).getHours()+":"+n.getMinutes()+":"+n.getSeconds();break;case"tempo":r=(new Date).getTime()-be.getTime(),n=Math.round(r/1e3),r=t,n=n.toString();break;case"menu":r=t,n=datos_menu}if(""!=r)return null!=n&&""!=n||(n="-"),lim_sc(r,n),n}},M.dom=function(e){return document.getElementById(e)},M.addEventSimple=function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r)},M.removeEventSimple=function(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent&&e.detachEvent("on"+t,r)},M.td=function(e){return R[e]?R[e]:e},M.ocultar=function(e){},M.mostrar=function(e){},M.colors=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]="#"+Math.floor(16777215*Math.random()).toString(16);return t},M.preaudio=function(e,t){t=t.replace(/\.[^/.]+$/,""),e.canPlayType("audio/mpeg")?e.src=t+".mp3":e.src=t+".ogg",e.load()},M.preaudio(J,C),M.nup=0,M.numpax=0,document.onreadystatechange=function(){"interactive"===document.readyState&&0<document.getElementsByName("limpanel").length&&M.ini()},M.ini=function(){if("object"!=typeof lang&&(lang={}),R=lang.ESP||"",document.styleSheets)for(var e=document.styleSheets,t=e.length,r=0;r<t;r++)if(e[r].href&&-1<e[r].href.indexOf("lim.css")){var n=e[r].href.lastIndexOf("/");L=e[r].href.substr(0,n)+"/"}e=!1;try{e=window.self!==window.top}catch(e){}if(e)try{var a=parent.document.getElementsByTagName("iframe");for(r=0;r<a.length;r++)a[r].setAttribute("allowFullScreen","")}catch(e){}var o;if(0==(a=document.querySelectorAll(".pcllim")).length&&(a=document.getElementsByTagName("body"),Q=1),P=r=a[0],X=r.getElementsByClassName("pclavance")[0],e=null,r.getAttribute("data-limc")?e=r.getAttribute("data-limc"):(t=r.getElementsByClassName("data-limc")[0])&&(t.className="pcldata",e="textarea"==t.tagName.toLowerCase()?t.value:(e=(e=t.textContent).replace("\x3c!--","")).replace("<--","")),e&&("@"==e.substr(0,1)&&(e=M.decode(e.substr(1))),0!=(e=b(e))))if(_autor=e.autor||"",_licenza=e.licencia||"",_=e.titulo||"",ce=e.indentifica||"",_idiom=e.idioma||"ESP",he=Number(e.npax)||1,e.limdir&&(L=e.limdir),lang[_idiom]||(lang[_idiom]={}),R=lang[_idiom],N=M.td(N),w=M.td(w),ce==ce&&(ce='<a href="'+ce+'" target="_blank">'+ce+"</a>"),F=e.recursos||"",F+="/",I=e.sonben?M.addrecu(e.sonben):E,y=e.sonmal?M.addrecu(e.sonmal):S,M.preaudio(V,I),M.preaudio(Y,y),3==(Q=e.modo||0)&&(document.getElementsByClassName("pclbtbr")&&(document.getElementsByClassName("pclbtbr")[0].style.display="none"),document.getElementsByClassName("pclbarra")&&(document.getElementsByClassName("pclbarra")[0].style.display="none")),e.caracteres&&(xe=e.caracteres),e.corbanda&&((o=r.getElementsByClassName("pclsuper")[0])&&(o.style.backgroundColor="#"+e.corbanda),(o=r.getElementsByClassName("pclsub")[0])&&(o.style.backgroundColor="#"+e.corbanda)),e.corfondo&&(o=r.getElementsByClassName("pclfondo")[0])&&(o.style.backgroundColor="#"+e.corfondo),e.cortexto&&(r.style.color="#"+e.cortexto,o&&(o.style.backgroundColor="#"+e.corfondo)),e.cornavega&&(o=r.getElementsByClassName("pclbarra")[0])&&(o.style.backgroundColor="#"+e.cornavega),e.imaxefondo&&""!=e.imaxefondo.nome&&(o=r.getElementsByClassName("pclfondo")[0],e.imaxefondo.posx&&(t=(Number(e.imaxefondo.posx)+150).toString(),o.style.backgroundPositionX=t+"px"),e.imaxefondo.posy&&(t=(Number(e.imaxefondo.posy)+50).toString(),o.style.backgroundPositionY=t+"px"),e.imaxefondo.trans&&(o.style.opacity=e.imaxefondo.trans/100),"1"!=e.imaxefondo.repeat&&(o.style.backgroundRepeat="no-repeat"),o.style.backgroundImage="url('"+M.addrecu(e.imaxefondo.nome)+"')"),e.ben&&(N=e.ben),e.mal&&(w=e.mal),e.logo&&(o=r.getElementsByClassName("pclsuper")[0])&&(o.innerHTML=e.lnklogo?'<a href="'+e.lnklogo+'" title="['+e.lnklogo+"]."+M.td("Abre en nueva ventana")+'" target="_blank" > <img src="'+e.logo+'" class="pcllogo"></a>'+o.innerHTML:'<img src="'+e.logo+'" class="pcllogo">'+o.innerHTML),e.sonido&&(o=e.sonido.split("||"),h(k,o[0],o[1],o[2])),le=e.m_eva||le,null!=e.axuda?se=e.axuda||"":u(o=P.querySelector(".lbt-axd"))&&(o.style.display="none"),e.menu){for(t="<ul>",o=0;o<e.menu.length;o++)null==(n=e.menu[o].split("||"))[1]&&(n[1]=n[0]),M.nozero(n[0])&&(t+="<li><a href=\"javascript:LIM.salto('"+n[1]+"')\">"+n[0]+"</a></li>");"1"==e.modomenu?(u(o=P.querySelector(".lbt-menu"))&&(o.style.display="none"),(e=document.createElement("div")).className="pclHmenu",(o=r.getElementsByClassName("pclsub")[0])&&(o.appendChild(e),e.innerHTML=t+"</ul>")):((o=P.querySelector(".pclind"))&&""==o.innerHTML&&(o.innerHTML=t+"</ul>"),2==e.modomenu&&(o.setAttribute("class","pclind view"),r.getElementsByClassName("pclbase")[0].setAttribute("class","pclbase pclbase-cm")))}else u(o=P.querySelector(".lbt-menu"))&&(o.style.display="none");if(S=L+"mal.mp3",E=L+"ben.mp3",C=L+"av.mp3",0<(o=a.length)){for(e=0;e<o;e++)a[e].hasAttribute("id")||a[e].setAttribute("id","lim"+e);for(o=(a=document.getElementsByName("limpax")).length,e=0;e<o;e++)a[e].hasAttribute("id")||a[e].setAttribute("id",e+"paxina");for(o=(a=document.getElementsByName("limpanel")).length,e=0;e<o;e++){var s;a[e].hasAttribute("id")||a[e].setAttribute("id","activob"+e),parseInt(a[e].parentNode.id);var l=(n=a[t=e]).querySelectorAll("*"),c={properties:{}},p=l.length;if(c.menu=n.getAttribute("data-limmenu"),n.getAttribute("data-limc"))var d=n.getAttribute("data-limc");else(s=n.getElementsByClassName("data-limc")[0])&&(s.className="pcldata",d="textarea"==s.tagName.toLowerCase()?s.value:s.innerHTML);if(d&&("@"==d.substr(0,1)&&(d=M.decode(d.substr(1))),""!=d)){0!=(s=b(d))&&(c.properties=s.properties,c.folder=F,de[t]=!1,"1"==s.properties.ipasar&&(de[t]=!0),pe[t]=!1,"1"==s.properties.dpasar&&(pe[t]=!0),c.properties.type=void 0===s.properties.type?n.getAttribute("data-limt"):s.properties.type,n.hasAttribute("class")||n.setAttribute("class","pclactivof"),c.cssstyle=void 0!==s.cssstyle?s.cssstyle:n.getAttribute("class").split(" ")[0]),c.num=t;for(var m=0;m<p;m++)switch(s=l[m].getAttribute("name"),s){case"limact":l[m].setAttribute("id","limact"+t),c.donde="limact"+t,l[m].hasAttribute("class")||l[m].setAttribute("class","pclactiv");break;case"limtexto":c.properties.texto=l[m].innerHTML;break;case"limimaxe":c.properties.imaxe=l[m].getAttribute("src");break;case"liminfo":l[m].hasAttribute("class")||l[m].setAttribute("class","nwinfo"),l[m].setAttribute("id","liminfo"+t),c.properties.info="#"+l[m].id;break;case"limcabe":l[m].hasAttribute("class")||l[m].setAttribute("class","pclcabe"),l[m].setAttribute("id","limcabe"+t),c.dvcabe="#"+l[m].id;break;case"limpe":l[m].hasAttribute("class")||l[m].setAttribute("class","pclpe"),l[m].id="limpe"+t,c.dvpe="#"+l[m].id;break;case"limmas":l[m].hasAttribute("class")||l[m].setAttribute("class","pclbutton pclinfo"),l[m].setAttribute("id","btliga"+t),c.properties.txliga="#"+l[m].id,c.properties.paxliga=l[m].getAttribute("href");break;case"limson":l[m].hasAttribute("class")||l[m].setAttribute("class","pclbutton pclplay"),l[m].setAttribute("id","btplay"+t),l[m].setAttribute("onclick",'LIM.sonar("'+l[m].getAttribute("href")+'")'),c.properties.son=l[m].getAttribute("href"),c.properties.autoson=l[m].getAttribute("data-liauto"),l[m].setAttribute("href","javascript:;");break;case"limdat":c.texto=l[m].innerHTML}void 0===c.donde&&(M.creardom("div",n,"limact"+t,"pclactiv"),c.donde="limact"+t),M.loadp(c)}}O=document.getElementsByTagName("VIDEO"),z=document.getElementsByTagName("iframe")}if(d=void 0,e=(d=(d=window.location.search).replace(/^\?/,"&amp;").match(/&amp;npax=([^&amp;]*)/i))?d[1]:"",document.getElementsByClassName("pclpreload"))for(d=document.getElementsByClassName("pclpreload");d[0];)d[0].parentNode.removeChild(d[0]);!function(t){var r=t.getElementsByClassName("pclsuper")[0];if(u(r)&&parseInt(window.getComputedStyle(r).height),u(r=t.getElementsByClassName("pclsub")[0])&&parseInt(window.getComputedStyle(r).height),u(r=t.getElementsByClassName("pclbase")[0])&&window.addEventListener("resize",function(e){u(r=t.getElementsByClassName("pclbase")[0])}),q=t.getElementsByClassName("pclcont"),1!=Q)for(i=1;i<q.length;i++)q[i].style.display="none";te=q.length,H=t.getElementsByClassName("pclnum")[0],G=q[0];var e,n="botón para poner o quitar la pantalla completa;botón para mostrar el informe;botón para avanzar página;botón para retroceder página;botón para mostrar el menú del libro;botón para ocultar o mostrar la barra lateral;botón para mostrar documento de ayuda".split(";"),a=[{".lbt-full":function(){var e=document.documentElement;document.fullscreenElement&&null!==document.fullscreenElement||document.webkitFullscreenElement&&null!==document.webkitFullscreenElement||document.mozFullScreenElement&&null!==document.mozFullScreenElement||document.msFullscreenElement&&null!==document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},".lbt-infor":function(){M.amosainforme()},".lbt-frw":function(){M.avanza()},".lbt-bck":function(){M.retrocede()},".lbt-menu":function(){t.getElementsByClassName("pclind")[0]&&(t.querySelector(".pclind").classList.toggle("view"),t.querySelector(".pclbase").classList.toggle("pclbase-cm"))},".pclbtbr":function(){t.getElementsByClassName("pclbarra")[0]&&t.querySelector(".pclbarra").classList.toggle("noview")},".lbt-axd":function(){M.salto(se)}}],o=0;for(e in a)if(a.hasOwnProperty(e))for(var s in a[e])a[e].hasOwnProperty(s)&&f(s,a[e][s],n[o]),o++;j=P.getElementsByClassName("lbt-frw")[0],(D=P.getElementsByClassName("lbt-bck")[0])&&(D.style.visibility="hidden"),ie=0==le?new M.alert(t,0,"nwalert"):new M.modal(t,0,"clmodal-avalia"),ne=new M.modal(t,1,"clmodal-informe"),(q=t.querySelectorAll(".pclcont"))[0].style.display="block",u(r=t.querySelector(".pclnum"))}(P),d=window.location.pathname.split("/").pop()||"lim",lim_sc("inicio",d),lim_sc("totalp",te),lim_sc("numexer",fe),(o=r.getElementsByClassName("pcltotal")[0])&&(o.innerHTML=te),H&&1<te&&(H.innerHTML="1"),me=!0,""!=e?M.salto(e):M.salto(he)},M.alert=function(e,t,r){var n=this;this.target=e,this.isOpen||(this.clase=r,this.clasev=this.clase+" "+this.clase+"v",this.modalWindow=document.createElement("div"),this.target.appendChild(this.modalWindow),this.modalWindow.className=this.clase,this.open=function(e,t){this.isOpen||(this.isOpen=!0,window.clearTimeout(B),this.modalWindow.innerHTML=e,0<t&&(n=this,B=window.setTimeout(function(){n.close()},1e3*t)),this.modalWindow.className=this.clasev)},this.close=function(){this.modalWindow.className=this.clase,this.isOpen=!1})},M.modal=function(e,t,r){if(this.target=e,!this.isOpen){var n=this;this.clase=r,this.clasev=this.clase+" "+this.clase+"v",this.overlay=document.createElement("div"),this.overlay.className="clmodal-overlay",this.overlay.setAttribute("tabindex",-1),this.modalWindow=document.createElement("div"),this.modalWindow.className=r||"clmodal-avalia",this.modalWindow.setAttribute("role","dialog"),this.modalWindow.setAttribute("tabindex",0),this.modalWrapper=document.createElement("div"),this.modalWrapper.className="clmodal-wrapper",this.modalContent=document.createElement("div"),this.modalContent.className="clmodal-content",this.escapeHandler=function(e){27===e.keyCode&&n.close()},this.modalWindow.appendChild(this.modalWrapper),this.modalWrapper.appendChild(this.modalContent),this.overlay.onclick=function(){n.close()},1==t?(this.closeButton=document.createElement("button"),this.closeButton.className="clmodal-close",this.closeButton.innerHTML="X",this.closeButton.setAttribute("title",M.td("Cerrar")),this.closeButton.setAttribute("type","button"),this.modalContent.style="cursor:default;",this.closeButton.onclick=function(){n.close()},this.modalWindow.appendChild(this.closeButton)):this.modalWindow.onclick=function(){n.close()},this.trigger=null,this.isOpen=!1}return this.open=function(e,t,r){window.clearTimeout(a),this.isOpen||(e&&this.update(e),this.modalWindow.className=this.clase,this.target.appendChild(this.overlay),this.target.appendChild(this.modalWindow),window.addEventListener?(window.addEventListener("focus",this.focusHandler,!1),window.addEventListener("keyup",this.escapeHandler,!1)):(window.attachEvent("onfocus",this.focusHandler),window.attachEvent("onkeyup",this.escapeHandler)),this.trigger=document.activeElement,this.modalWindow.focus(),this.isOpen=!0,r&&r.call(this),0<t&&(n=this,a=window.setTimeout(function(){n.close()},1e3*t)),this.modalWindow.className=this.clasev)},this.update=function(e){this.modalContent.innerHTML=e},this.close=function(e){if(this.modalWindow.className=this.clase,this.isOpen){window.removeEventListener?(window.removeEventListener("focus",this.focusHandler,!1),window.removeEventListener("keyup",this.escapeHandler,!1)):(window.detachEvent("onfocus",this.focusHandler),window.detachEvent("onkeyup",this.escapeHandler)),this.target.removeChild(this.modalWindow),this.target.removeChild(this.overlay);for(var t=0,r=this.target.children.length;t<r;t++)this.target.children[t].removeAttribute("aria-hidden");this.trigger&&(this.trigger.focus(),this.trigger=null),this.isOpen=!1,e&&e.call(this)}},this.teardown=function(){this.isOpen&&this.close(),delete this.escapeHandler,delete this.focusHandler,delete this.closeButton,delete this.modalContent,delete this.modalWrapper,delete this.modalWindow,delete this.overlay,delete this.trigger,delete this.isOpen},this},M.getvar=function(e){if("total_activ"==e)return total_activ},M.inicio=function(e,t,r){Q=r,M.dom(e),ee=t,A=M.dom("activo"+t)},M.aspecto=function(e){M.nozero(e.titulo),M.nozero(e.musica)&&h(k,e.musica)},M.crearpaxina=function(e,t){M.numpax++,M.nozero(t)||(t="");var r=M.creardom("div",A,"paxina"+e,"clpaxina "+t,-1,-1);return 1!=Q&&0!=e&&(r.style.display="none"),G=r},M.crearbase=function(e){s=T=null,U++;var t=document.getElementById(e.donde),r=null;if(null!=e.properties.dvpe)"#"==e.properties.dvpe.substr(0,1)&&(T=M.dom(e.properties.dvpe.substr(1)));else{var n="";if(e.properties.txpe&&(n='<span class="pclpetext">'+e.properties.txpe+"</span>"),t.insertAdjacentHTML("afterend",'<div id="limpe'+U+'" class="pclpe"><div class="pclpebot"></div>'+n+"</div>"),n=(T=M.dom("limpe"+U)).getElementsByClassName("pclpebot")[0],e.properties.pxliga){var i=e.properties.pxliga.split("||");M.crearlink({pai:n,name:"btliga"+U,text:i[0],url:"javascript:LIM.salto('"+i[1]+"')",cssclass:"pclbutton pclinfo",posx:-1,posy:-1,alttext:"["+i[1]+"]."+M.td("Abre en nueva ventana")})}M.nozero(e.properties.txliga)&&M.crearlink({pai:n,name:"btliga"+U,text:e.properties.txliga,url:e.properties.paxliga,cssclass:"pclbutton pclinfo",posx:-1,posy:-1,target:"_blank",alttext:"("+e.properties.paxliga+")."+M.td("Abre en nueva ventana")}),M.nozero(e.properties.ison)&&M.crearlink({pai:n,name:"btson"+U,text:"",url:'javascript:LIM.sonar("'+M.addrecu(e.properties.ison)+'");',cssclass:"pclbutton pclplay",posx:-1,posy:-1,alttext:M.td("Escuchar")})}if(null!=e.donde?(n=(r=M.dom(e.donde)).parentNode,null!=e.properties.dvcabe?"#"==e.properties.dvcabe.substr(0,1)&&(s=M.dom(e.properties.dvcabe.substr(1))):(null==e.properties.txcabe&&(e.properties.txcabe=""),t.insertAdjacentHTML("beforebegin",'<div  name="limcabe" id="limcabe'+U+'" class="pclcabe">'+e.properties.txcabe+"</div>"),s=M.dom("limcabe"+U)),M.nozero(e.properties.cssstyle)&&(n.className=n.className+" "+e.properties.cssstyle)):(M.nozero(e.width)||(e.width="100%"),M.nozero(e.height)||(e.height="100%"),e.properties.hidden&&(e.properties.cssstyle="hidden"),t='<div id="limcabe'+U+'" class="clcabe"></div>',r.innerHTML=t,t=M.creardom("div",r,"activob"+U,"pclactiv",0,0),t='<div id="limpe'+U+'"  class="pclpe"><div class="pclpebot"></div><span class="pclpetext"></span></div></div>',r.innerHTML+=t+"</div>",s=M.dom("limcabe"+U),T=M.dom("limpe"+U),M.dom("limpetext"+U),t=M.dom("activob"+U)),null!=e.properties.info&&s&&"#"==e.properties.info.substr(0,1)){var a=M.dom(e.properties.info.substr(1));M.crearlink({pai:s,url:"javascript:;",name:U+"btin",cssclass:"claxd",alttext:M.td("Saber más")}).onclick=function(){a.className="nwinfo nwinfov"==a.className?"nwinfo ":"nwinfo nwinfov"}}return e.properties.height?t.style.minHeight=e.properties.height+"px":e.properties.minheight&&(t.style.minHeight=e.properties.minheight+"px"),e.properties.estilo&&((n=t.parentNode).className=n.className?n.className+" "+e.properties.estilo:e.properties.estilo),o.push(r),t},M.comunes=function(e,t,r,n,i,a,o){a&&(e=a.split("||"),M.crearlink({pai:T.parentNode,name:"btliga"+U,text:e[0],url:e[1],cssclass:"pclbutton pclinfo",posx:-1,posy:-1,alttext:o+" ."+M.td("Abre en nueva ventana")})),null!=t&&(s.innerHTML=t),null!=r&&(T.innerHTML=r),null!=n&&""!=n&&(btson=M.crearlink({pai:T.parentNode,name:"btplay"+U,url:"javascript:;",cssclass:"pclbutton pclplay",posx:-1,posy:-1,alttext:M.td("Reproducir sonido")}),btson.style.visibility="visible",M.addEventSimple(btson,"click",function(){M.sonar(n)}))},document.addEventListener("keypress",function(e){27==e.keyCode&&document.getElementById("vista")&&(document.getElementById("vista").style.display="none")}),document.addEventListener("keydown",function(e){if(e.altKey)switch(e.code){case"F11":M.salto("imprimir");break;case"F10":M.verhtml();break;case"F9":M.amosainforme();break;case"F8":case"Enter":M.comprobar();break;case"ArrowRight":M.avanza();break;case"ArrowLeft":M.retrocede()}}),M.esactividad=function(e,t){if(T)r=T.getElementsByClassName("pclpebot")[0];else{T=M.creardom("div",e.parentNode,"limpe"+U,"pclpe",-1,-1),tpe="",data.properties.txpe&&(tpe='<span class="pclpetext">'+data.properties.txpe+"</span>"),e.insertAdjacentHTML("afterend",'<div id="limpe'+U+'" class="pclpe"><div class="pclpebot"></div>'+tpe+"</div>");var r=(T=M.dom("limpe"+U)).getElementsByClassName("pclpebot")[0]}var n=null;return ae[U-1].res=3,fe++,t&&((n=document.createElement("a")).setAttribute("id","btcomproba"+U),n.setAttribute("class","pclbutton pclcomproba"),n.setAttribute("alttext",M.td("Comprobar el resultado")),r.appendChild(n),n.style.visibility="visible"),n},M.verinforme=function(){},M.amosa=function(e){e.style.display="block"==e.style.display?"none":"block"},M.amosatodo=function(){if(re){re=!1;var e="none"}else re=!0,e="block";for(var t=document.getElementsByClassName("clpaxina"),r=0;r<t.length;r++)"block"==t[r].style.display&&"block"==e&&(Z=t[r]),t[r].style.display=e;null==Z&&(vismane=Z=t[0]),"none"==e&&(Z.style.display="block")},M.sonar=function(e){e?h(t,e):t.pause()},M.amosainforme=function(){var e="",t=ae.length,r=M.td("Panel");M.td("Página"),e=M.td("Intentos");var n=M.td("Resultado"),i=M.td("Descripción"),a=M.td("Autoría"),o="",s=0,l=0,c=new Date;for(c='<p class="clinf-titulo">'+_+" ("+c.getDate()+"-"+(c.getMonth()+1)+"-"+c.getFullYear()+"  "+c.getHours()+":"+c.getMinutes()+")</p>",c=""==ue?c+'<input type="text" class="clinf-user"></input>':c+'<p type="text" class="clinf-user" >'+ue+"</p>",c+='<div  class="clinf-o" >',r='<table class="clinf-tb" ><tr><td>'+r+"</td><td>"+i+"</td><td>"+n+"</td><td>"+e+"</td></tr>",n=0;n<t;n++)o="",s=n+1,e="clinf-c",3==ae[n].res?(o="&#9899",e+=" clinf-n"):1==ae[n].res?(o="X",e+=" clinf-m",0):2==ae[n].res?(o="&#10004",e+=" clinf-b",l++):0==ae[n].res&&(o="-"),r+="<tr><td>"+s+'</td><td style="font-weight: 100;">'+ae[n].nome+"</td><td>"+o+"</td><td>"+ae[n].intos+"</td></tr>",c+='<p class="'+e+'">'+s+"</p>";r+="</table>",0<l?(t=100*l/fe,parseInt(t)!=t&&(t=t.toFixed(1))):t=0,c=(c+='<div class="clinf-nt"><span class="clinf-cn clinf-b">'+l.toString()+' &#10004 </span><span class="clinf-cn"> '+fe.toString()+' </span><span class="clinf-cn"> '+t.toString()+"%</span></div>")+"</div>"+r,""!=_autor&&(c+='<p class="clinf-aut">'+a+": "+_autor+"</p>"),c+='<p class="clinf-aut">'+ce+"</p>",c+='<p class="clinf-aut">'+_licenza+"</p>";var p=c+='<p class="clinf-aut">LIM 5.5</p>';c+='<button  class="clinf-imprin" >'+M.td("Imprimir")+"</button>",ne.open(c),(a=ne.modalContent).getElementsByClassName("clinf-imprin")[0].onclick=function(){M.imprimirdv(p,0)},a.getElementsByClassName("clinf-user")[0].onchange=d},M.pechainforme=function(){ne.close()},M.tcontido=function(e){var t="";return e=e.split(".").pop().toLowerCase(),-1<"webm mp4 ogv".indexOf(e)?t="v":-1<"swf".indexOf(e)?t="s":-1<"jpg,png,gif".indexOf(e)&&(t="i"),t},M.hasClass=function(e,t){return e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$o)"))},M.desordenam=function(e){for(var t=[],r=0;r<e;r++)t.push(r);return t=t.sort(function(){return Math.random()-.5}),finarr},M.desordena=function(e){for(var t=[],r=0;r<e;r++)t.push(r);e=t.length;for(var n;0!==e;)n=Math.floor(Math.random()*e),r=t[--e],t[e]=t[n],t[n]=r;return t},M.revolve=function(e){return e.sort(function(){return Math.random()-.5})},M.estasobre=function(e,t,r){var n=!1;if(t){var i=t.offsetLeft,a=t.offsetTop,o=i+t.offsetWidth,s=a+t.offsetHeight,l=e.offsetLeft,c=e.offsetTop,p=l+e.offsetWidth,d=c+e.offsetHeight,m=c+e.offsetHeight,u=l+e.offsetWidth,f=l-10,h=c+e.offsetHeight/2;l<o+5&&i-5<l&&a-10<c&&c<s+5||p<o&&i<p&&a<d&&d<s||l<o&&i<l&&a<m&&m<s||u<o&&i<u&&a<c&&c<s?(n=!0,J.play()):f<o&&i<f&&a<h&&h<s&&(n=!0,J.play()),n&&r&&(e.style.left=t.style.left,e.style.top=t.style.top)}return n},M.ratosobre=function(e,t,r,n,i){var a=!1;if(t){var o=t.style.zIndex,s=t.offsetLeft,l=t.offsetTop;t.style.zIndex="5000",t==document.elementFromPoint(r,n)&&(a=!0,J.play(),i&&(e.style.left=s+1+"px",e.style.top=l+1+"px"))}return t.style.zIndex=o,a},M.getPosition=function(e){e="string"==typeof e||e instanceof String?document.getElementById(e):e;for(var t=0,r=0;t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;);return{x:t,y:r}},M.poneravaliacion=function(e,t,r,n,i){var a=Number(i)+1;if(null==n&&(n=""),"_"!=n.substr(0,1))if(r)2!=ae[i].res&&ae[i].intos++,ae[i].res=2,M.nozero(t)?ie.open(t,2):ie.open(N,2),lim_sc("avben",i+1),ge++,V.play(),M.creardom("div",e.parentNode,"","pclben"),pe[i]=!1,de[i]=!1,j&&(i==te-1||pe[i]?(j.style.visibility="hidden",W=!0):!pe[i]&&W&&(j.style.visibility="visible",W=!1)),D&&(0==i||de[i]?(D.style.visibility="hidden",me=!0):!de[i]&&me&&(D.style.visibility="visible",me=!1));else{var o=e.parentNode.getElementsByClassName("pclben")[0];o&&e.parentNode.removeChild(o),2!=ae[i].res&&(ae[i].intos++,ae[i].res=1),M.nozero(t)?ie.open(t,2):ie.open(w,2),lim_sc("avmal",i+1),Y.play()}""!=n&&window[n](r,a)},M.crearlink=function(e){var t=p(e.name);if(""==t){if(t=document.createElement("a"),M.nozero(e.name)&&(t.id=e.name),M.nozero(e.alttext)&&(t.title=e.alttext),M.nozero(e.cssclass)&&(t.className=e.cssclass),-1!=e.posy&&(t.style.top=e.posy+"px"),-1!=e.posx&&(t.style.left=e.posx+"px"),M.nozero(e.dimx)&&(t.style.width=c(e.dimx)),M.nozero(e.dimy)&&(t.style.height=c(e.dimy)),M.nozero(e.target)&&t.setAttribute("target",e.parent),M.nozero(e.url)&&(t.href=e.url),M.nozero(e.text)){var r=document.createTextNode(e.text);t.appendChild(r)}e.pai.appendChild(t)}return t},M.creardom=function(e,t,r,n,i,a,o,s){var l=p(r);return""==l&&(l=document.createElement(e),M.nozero(r)&&(l.id=r),M.nozero(n)&&(l.className=n),a&&-1!=a&&(l.style.top=a+"px"),i&&-1!=i&&(l.style.left=i+"px"),M.nozero(o)&&(l.style.width=c(o)),M.nozero(s)&&(l.style.height=c(s)),t.appendChild(l)),l},M.crearspan=function(e,t,r,n,i){var a=p(t);return""==a&&((a=document.createElement("span")).id=t,""!=r&&(a.className=r),a.style.top=i+"px",a.style.left=n+"px",e.appendChild(a)),a},M.crearlabel=function(e,t,r,n,i,a,o){return""==(r=p(r))&&((r=document.createElement("label")).setAttribute("for",t),r.appendChild(document.createTextNode(o)),""!=n&&(r.className=n),r.style.top=a+"px",r.style.left=i+"px",e.appendChild(r)),r},M.crearchk=function(e,t,r,n,i){var a=p(t);return""==a&&((a=document.createElement("input")).setAttribute("type","checkbox"),a.id=t,""!=r&&(a.className=r),a.style.top=i+"px",a.style.left=n+"px",e.appendChild(a)),a},M.crearimaxe=function(e){var t=p(e.name);return""==t&&(t=document.createElement("img"),e.name&&(t.id=e.name),M.nozero(e.cssclass)?t.className=e.cssclass:t.style.position="absolute",M.nozero(e.alttext)&&(t.title=e.alttext),t.style.left=c(e.posx),t.style.top=c(e.posy),e.pai.appendChild(t)),t},M.crearswf=function(e,t,r,n,i,a,o,s,l){return""==(l=p(t))&&(l=document.createElement("object"),""!=t&&(l.id=t),""!=n&&(l.className=n),l.style.position="absolute",l.style.left=i+"px",l.style.top=a+"px",l.data=r,l.height=s,l.width=o,e.appendChild(l)),l},M.crearvid=function(e,t,r,n,i,a,o,s,l){return""==(l=p(t))&&(l=document.createElement("video"),""!=t&&(l.id=t),""!=n?l.className=n:l.style.position="absolute",""!=i&&(l.style.left=i+"px"),""!=a&&(l.style.top=a+"px"),l.src=r,""!=s&&(l.height=s),""!=o&&(l.width=o),l.controls="controls",e.appendChild(l)),l},M.crearinput=function(e){var t=p(e.name);if(""==t){var r=document.createElement("a");t=document.createElement("input"),e.name&&(t.id=e.name),t.type="text",M.nozero(e.cssclass)&&(t.className=e.cssclass),M.nozero(e.cssclass)||(t.style.position="absolute"),t.style.left=c(e.posx),t.style.top=c(e.posy),t.style.width=c(e.dimw),t.style.height=c(e.dimh),M.nozero(e.pholder)||(e.pholder=M.td("Tu respuesta")),t.title=e.pholder,t.placeholder=e.pholder,t.value="",r.appendChild(t),e.pai.appendChild(r)}return t},M.crearsonido=function(e,t,r){var n=p(t);return""==n&&(n=document.createElement("audio"),""!=t&&(n.id=t),n.preload=r,e.appendChild(n)),n},M.crearselect=function(e,t,r,n,i,a){var o=p(t);if(""==o){for(o=document.createElement("select"),""!=t&&(o.id=t),""!=r?o.className=r:o.style.position="absolute",t=0;t<a.length;++t)o[o.length]=new Option(a[t],a[t]);-1!=n&&(-50!=n&&(o.style.top=i+"px"),-50!=i&&(o.style.left=n+"px")),e.appendChild(o)}return o},M.crearselectimx=function(e,t,r,n,i,a,o,s){var l=p(t);if(""==l){for(l=document.createElement("select"),""!=t&&(l.id=t),""!=r?l.className=r:l.style.position="absolute",l.style.backgroundImage="url("+s[0]+")",t=0;t<s.length;++t)l[t]=new Option("",s[t]),l[t].style.width=a+"px",l[t].style.height=o+"px",l[t].style.backgroundImage="url("+s[t]+")",l[t].style.backgroundRepeat="no-repeat",l[t].style.backgroundSize=" 90px auto";-50!=n&&(l.style.top=i+"px"),-50!=i&&(l.style.left=n+"px"),l.onchange=function(){this.style.backgroundImage="url("+this.value+")",this.style.backgroundRepeat="no-repeat",this.style.backgroundSize=" 90px auto"},e.appendChild(l)}return l},M.transparencia=function(e,t){""!=t&&(e.style.opacity=t/100,e.style.filter="alpha(opacity="+t+")")},M.cargaimaxe=function(s,e,l,c,p,d,m){M.addEventSimple(s,"load",function e(){var t=M.reduce(s.width,s.height,l,c);s.width=t.W,s.height=t.H,m&&(s.style.left=1+(l-t.W)/2+"px",s.style.top=1+(c-t.H)/2+"px");var r=s.width,n=s.height;if(0<l){var i=s.naturalWidth,a=s.naturalHeight;if(l<i){var o=parseInt(l/i*100);a=n=o*a/100,i=r=l}c<a&&(r=(o=(n=c)/a*100)*i/100),s.width=r,s.height=n,m&&(s.style.left=1+(l-r)/2+"px",s.style.top=1+(c-n)/2+"px")}d&&(s.parentNode.style.backgroundImage=""),M.removeEventSimple(s,"load",e),s.style.visibility="visible",""!=p&&p(t.W,t.H,!0)}),M.addEventSimple(s,"error",function(){return"b"}),d&&(s.parentNode.style.backgroundImage="url("+L+"'pre.gif')",s.parentNode.style.backgroundRepeat="no-repeat"),s.style.visibility="hidden",s.src=e},M.ttrim=function(e){var t="";return""!=e&&(t=e.replace(/^\s\s*/,"").replace(/\s\s*$o/,"")),t},M.borde=function(e,t){return""!=t&&(e.style.borderRadius=t+"px",e.style.MozBorderRadius=t+"px",e.style.MsBorderRadius=t+"px",e.style.webkitBorderRadius=t+"px",e.style.khtmlBorderRadius=t+"px"),!0},M.comprobar=function(){G.querySelectorAll(".pclcomproba")[0].click()},M.funcomprobar=function(e){if(""!=e){var t=M.dom("btcomproba");t.style.visibility="visible",M.addEventSimple(t,"click",e)}return!0},M.sleep=function(e){for(var t=(new Date).getTime();t+e>=(new Date).getTime(););},M.salto=function(e){var t=O;if(t)for(var r=0;r<t.length;r++)t[r].pause();if(z)for(r=0;r<z.length;r++)z[r].src=z[r].src;switch(e){case"ver":M.imprimirdv(G.innerHTML,0);break;case"imprimir":M.imprimirdv(G.innerHTML,1);break;case"comprobar":M.comprobar();break;default:G.style.display="block",isNaN(e)?"LIM:"==(t=e.replace(/\s/g,"")).substr(0,4)?(t=t.split(":")[1],M.salto(n.indexOf(t)+1)):"-"==e.substr(0,1)?window.open(e.substr(1),"_self"):open(e):e<=te&&0<e&&(v(e),--e,0==Q?(G.style.display="none",(G=q[e]).style.display="block"):(M.dom("paxina"+e).style.display="block",M.dom("paxina"+e)&&("none"==M.dom("paxina"+e).style.display&&(M.amosatodo(),M.dom("paxina"+e).style.display="block"),M.getPosition("paxina"+e))),g(e))}},M.lcambia=function(e,t,r){return e.substr(0,t)+r+e.substr(t+r.length)},M.enche=function(e,t){for(var r="",n=0;n<t;n++)r+=e;return r},M.limparHTML=function(e){return e.replace(/<[^>]+>/g,"")},M.sspc=function(e){return e.replace(/ /g,"")},M.xira=function(e,t){e.style.webkitTransform="rotate("+t+"deg)",e.style.msTransform="rotate("+t+"deg)",e.style.MozTransform="rotate("+t+"deg)",e.style.OTransform="rotate("+t+"deg)",e.style.transform="rotate("+t+"deg)"},M.reduce=function(e,t,r,n){var i={};return i.W=e,i.H=t,0<r&&(r<e&&(e=parseInt(r/e*100),i.W=r,i.H=e*t/100,t=i.H,e=i.W),n<t&&(i.H=n,i.W=n/t*100*e/100)),i},M.nozero=function(e){return null!=e&&""!=e&&"undefined"!=e},M.valorcss=function(e,t){if(document.styleSheets)for(var r=document.styleSheets.length-1;0<=r;r--)for(var n=document.styleSheets[r].cssRules||document.styleSheets[r].rules||[],i=0;i<n.length;i++)if(n[i].selectorText===e)return n[i].style[t];return null},M.cambiafont=function(e){if(0<e.length)for(var t=e.length-1;-1<t;t--){var r=e[t].getAttribute("color"),n=e[t].getAttribute("size"),i=e[t].getAttribute("face"),a=document.createElement("span");a.setAttribute("style","color:"+r+";font-size:"+n+"px;face:"+i+";"),a.innerHTML=e[t].innerHTML,e[t].parentNode.insertBefore(a,e[t]),e[t].parentNode.removeChild(e[t])}},M.addrecu=function(e){return e},M.qhtml=function(e,t){if(M.dom(e))for(var r,n,i,a,o=M.dom(e).querySelectorAll("*"),s=o.length,l=0;l<s;l++)for(var c in r=o[l].getAttribute("name"),a=o[l].tagName,t)r=="lim"+c&&(n=t[c],"IMG"==a?(i=o[l].getAttribute("src"),"undefined"!=o[l].getAttribute("title")?t.imaxeAltText.push(o[l].getAttribute("title")):t.imaxeAltText.push(""),[].filter.call(o[l].attributes,function(e){return/^data-/.test(e.name)})):i=o[l].innerHTML,n instanceof Array?n.push(i):n=i);return t},M.prc=function(e,t){var r,n={width:600,height:450,cssstyle:""},i={ison:"",autoson:0,txliga:"",paxliga:"",mensamal:"",mensaben:"",txcabe:"",txpe:"",modo:0,forma:0};for(r in i)null==t.properties[r]&&(t.properties[r]=i[r]);for(r in n)null==t[r]&&(t[r]=n[r]);for(r in e)null==t.properties[r]&&(t.properties[r]=e[r]);for(r in e)""!=e[r]&&(t.properties[r]=e[r]);return t},M.newpanel=function(e,t){"function"==typeof window[e]&&new window[e](t).crear()},M.loadp=function(e){e.paxina=M.nup+1;var t=M.nup;ae[t]={nome:"",tip:0,pax:0,cid:"",intos:0,res:0,cond:"",av:!0,ret:!0,auto:!1},M.nup++,"function"==typeof window[e.properties.type]&&(new window[e.properties.type](e).crear(),e.properties.cid&&(ae[t].cid=e.properties.cid,n[t]=e.properties.cid.replace(/\s/g,"")),M.nozero(e.properties.name)?ae[t].nome=e.properties.name:M.nozero(e.properties.txcabe)?ae[t].nome=e.properties.txcabe:ae[t].nome="",ae[t].pax=1,ae[t].intos=0,"1"==e.properties.autoson&&"undefined"!=oe[t]&&(oe[t]=e.properties.ison))},M.load=function(e){e=M.dom(e).value;var t=!0;try{var r=JSON.parse(e)}catch(e){t=!1,A.innerHTML="",alert(M.td("Error en el archivo de datos"))}if(t){te=t=(e=r).paxinas.length;var n=0;M.aspecto({titulo:e.titulo,subtitulo:e.subtitulo,musica:e.musica}),r='<ul id="limtabul'+ee+'">';var i='<ul id="limnumul'+ee+'">';for(x=0;x<t;x++){var a=e.paxina[x].paxina[0];M.crearpaxina(x,a.cssstyle);var o=a.panels.length;for(M.nozero(a.menu)&&(r+='<li><a href="#paxina'+x+'">'+a.menu+"</a></li>"),i+='<li><a href="#paxina'+x+'">'+(x+1)+"</a></li>",xx=0;xx<o;xx++)if(a=e.paxinas[x].paxina[0].panels[xx],"function"==typeof window[a.panel.properties.type]){a.panel.num=n,M.nozero(a.panel.properties.menu)&&(r+='<li><a href="#paxina'+x+'">'+a.panel.properties.menu+"</a></li>"),new window[a.panel.properties.type](a.panel).crear(),ae[n]={nome:"",tip:0,pax:0,intos:0,res:0,cond:"",av:!0,ret:!0,auto:!1},M.nozero(a.panel.properties.name)?ae[n].nome=a.panel.properties.name:ae[n].nome="",ae[n].pax=x+1,ae[n].intos=0;var s=a.panel.properties.autoson;M.nozero(s)&&"1"==s&&"undefined"!=oe[x]&&(oe[x]=a.panel.properties.son),n++}}r+=" </ul>",i+=" </ul>",M.dom("limtab"+ee).style.display="none",M.dom("latmenu"+ee).innerHTML=r,m("limtabul"+ee),M.dom("limtab"+ee).innerHTML=i,m("limnumul"+ee),G=M.dom("paxina"+ee),0==Q&&(M.dom("latmenu"+ee).style.display="none",v(1)),null!=(e=l("npax"))?M.salto(Number(e)):2==Q&&(M.dom("limtab"+ee).innerHTML=r)}},M.drag=function(n,e,i){(e=new Draggabilly(n,{containment:e})).on("dragStart",function(e,t,r){this.zprof=n.style.zIndex||2999,n.style.zIndex="3000"}),e.on("dragEnd",function(e,t,r){this.zprof&&(n.style.zIndex=this.zprof),""!=i&&i(n,r.clientX,r.clientY)})},M.paxina=function(){return U},M.decode=function(e){var l={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decode:function(e){var t="",r=0;for(e=e.replace(/[^A-Za-z0-9\+\/=]/g,"");r<e.length;){var n=this._keyStr.indexOf(e.charAt(r++)),i=this._keyStr.indexOf(e.charAt(r++)),a=this._keyStr.indexOf(e.charAt(r++)),o=this._keyStr.indexOf(e.charAt(r++));n=n<<2|i>>4,i=(15&i)<<4|a>>2;var s=(3&a)<<6|o;t+=String.fromCharCode(n),64!=a&&(t+=String.fromCharCode(i)),64!=o&&(t+=String.fromCharCode(s))}return l._utf8_decode(t)},_utf8_decode:function(e){var t="",r=0;for(c1=c2=0;r<e.length;){var n=e.charCodeAt(r);n<128?(t+=String.fromCharCode(n),r++):191<n&&n<224?(c2=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&c2),r+=2):(c2=e.charCodeAt(r+1),c3=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),r+=3)}return t}};return l.decode(e)},M.imprimirdv=function(e,t){var r='<html><head><meta charset="UTF-8"/><title></title>   <link rel="stylesheet" href="./sclim/lim.css" type="text/css" /></head><body class="pclimprin">'+e+"</body></html>",n=window.open("","Print","height=800,width=1000");return n.document.write(r),n.document.close(),n.focus(),1==t&&n.print(),!0},M.autoSizeText=function(e){var t;if(!(e.length<0)){var r=[],n=0;for(t=e.length;n<t;n++){var i=e[n];r.push(function(e){var t,r;for(t=[];e.scrollHeight>e.offsetHeight;)t.push((r=parseInt($(e).css("font-size").slice(0,-2))-1+"px",$(e).css("font-size",r)));return t}(i))}return r}},M.relposX=function(e){for(var t=0;isNaN(e.offsetLeft)||(t+=e.offsetLeft),e=e.offsetParent;);return t},M.relposY=function(e){for(var t=0;isNaN(e.offsetTop)||(t+=e.offsetTop),e=e.offsetParent;);return t},M.absPos=function(e){var t,r;for(r=t=0;null!=e;e=e.offsetParent)t+=e.offsetLeft,r+=e.offsetTop;return{x:t,y:r}},M.poncondicion=function(e,t){ae[Number(e)-1].cond=t},M.condicional=function(e){if(-1<e.indexOf("|")){var t=(e=e.split("|"))[0];if(0<t.indexOf("<"))var r=t.split("<"),n="<";else 0<t.indexOf(">")?(r=t.split(">"),n=">"):0<t.indexOf("=")?(r=t.split("="),n="="):0<t.indexOf("<>")&&(r=t.split("<>"),n="<>");if(null!=r[1]){var i=r[1];t=e[1];var a=ge;switch("totalben"==r[0]&&(a=ge),r=Number(e[2]),n){case"<":a<i&&(r=Number(t));break;case">":i<a&&(r=Number(t));break;case"=":a==i&&(r=Number(t));break;case"<>":a!=i&&(r=Number(t))}i=r}}else i=e;return K=i,M.salto(i),!0},M.avanza=function(){return K<te&&(K++,M.salto(K)),!0},M.retrocede=function(){return 1<K&&(K--,M.salto(K)),!0},M.compara=function(e,t){if(e.length!=t.length)return!1;for(var r=e.join(","),n=0;n<t.length;n++)-1<r.indexOf(t[n])&&(r=r.split(t[n]).join(""));return!(0<(r=r.replace(/,/g,"")).length)}},function(e){function t(e,t){(r(e,t)?i:n)(e,t)}var r,n,i;i="classList"in document.documentElement?(r=function(e,t){return e.classList.contains(t)},n=function(e,t){e.classList.add(t)},function(e,t){e.classList.remove(t)}):(r=function(e,t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)").test(e.className)},n=function(e,t){r(e,t)||(e.className=e.className+" "+t)},function(e,t){e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ")});var a={hasClass:r,addClass:n,removeClass:i,toggleClass:t,has:r,add:n,remove:i,toggle:t};"function"==typeof define&&define.amd?define("classie/classie",a):e.classie=a}(window),function(){function e(){}function a(e,t){for(var r=e.length;r--;)if(e[r].listener===t)return r;return-1}function t(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype;r.getListeners=function(e){var t,r=this._getEvents();if("object"==typeof e){var n={};for(t in r)r.hasOwnProperty(t)&&e.test(t)&&(n[t]=r[t])}else n=r[e]||(r[e]=[]);return n},r.flattenListeners=function(e){var t,r=[];for(t=0;t<e.length;t+=1)r.push(e[t].listener);return r},r.getListenersAsObject=function(e){var t,r=this.getListeners(e);return r instanceof Array&&((t={})[e]=r),t||r},r.addListener=function(e,t){var r,n=this.getListenersAsObject(e),i="object"==typeof t;for(r in n)n.hasOwnProperty(r)&&-1===a(n[r],t)&&n[r].push(i?t:{listener:t,once:!1});return this},r.on=t("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=t("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var r,n,i=this.getListenersAsObject(e);for(n in i)i.hasOwnProperty(n)&&(-1!==(r=a(i[n],t))&&i[n].splice(r,1));return this},r.off=t("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,r){var n,i,a=e?this.removeListener:this.addListener;if(e=e?this.removeListeners:this.addListeners,"object"!=typeof t||t instanceof RegExp)for(n=r.length;n--;)a.call(this,t,r[n]);else for(n in t)t.hasOwnProperty(n)&&(i=t[n])&&("function"==typeof i?a.call(this,n,i):e.call(this,n,i));return this},r.removeEvent=function(e){var t,r=typeof e,n=this._getEvents();if("string"==r)delete n[e];else if("object"==r)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},r.emitEvent=function(e,t){var r,n,i=this.getListenersAsObject(e);for(n in i)if(i.hasOwnProperty(n))for(r=i[n].length;r--;){var a=i[n][r];a.listener.apply(this,t||[])!==this._getOnceReturnValue()&&!0!==a.once||this.removeListener(e,a.listener)}return this},r.trigger=t("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}.call(this),function(n){var e=document.documentElement,t=function(){};e.addEventListener?t=function(e,t,r){e.addEventListener(t,r,!1)}:e.attachEvent&&(t=function(t,e,r){t[e+r]=r.handleEvent?function(){var e=n.event;e.target=e.target||e.srcElement,r.handleEvent.call(r,e)}:function(){var e=n.event;e.target=e.target||e.srcElement,r.call(t,e)},t.attachEvent("on"+e,t[e+r])});var r=function(){};e.removeEventListener?r=function(e,t,r){e.removeEventListener(t,r,!1)}:e.detachEvent&&(r=function(t,r,n){t.detachEvent("on"+r,t[r+n]);try{delete t[r+n]}catch(e){t[r+n]=void 0}}),e={bind:t,unbind:r},"function"==typeof define&&define.amd?define("eventie/eventie",e):n.eventie=e}(this),function(e){function t(e){if(e){if("string"==typeof a[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,r=0,n=i.length;r<n;r++)if("string"==typeof a[t=i[r]+e])return t}}var i=["Webkit","Moz","ms","Ms","O"],a=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):e.getStyleProperty=t}(window),function(e){function m(e){var t=parseFloat(e);return-1===e.indexOf("%")&&!isNaN(t)&&t}function t(e){var p,d=e("boxSizing");return function(){if(d){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[d]="border-box";var t=document.body||document.documentElement;t.appendChild(e);var r=u(e);p=200===m(r.width),t.removeChild(e)}}(),function(e){if("string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var t=u(e);if("none"===t.display){var r={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(t=0,e=f.length;t<e;t++)r[f[t]]=0;return r}(r={}).width=e.offsetWidth,r.height=e.offsetHeight,e=r.isBorderBox=!(!d||!t[d]||"border-box"!==t[d]);for(var n=0,i=f.length;n<i;n++){var a=f[n],o=parseFloat(t[a]);r[a]=isNaN(o)?0:o}n=r.paddingLeft+r.paddingRight,i=r.paddingTop+r.paddingBottom,a=r.marginLeft+r.marginRight,o=r.marginTop+r.marginBottom;var s=r.borderLeftWidth+r.borderRightWidth,l=r.borderTopWidth+r.borderBottomWidth;e=e&&p;var c=m(t.width);return!1!==c&&(r.width=c+(e?0:n+s)),!1!==(t=m(t.height))&&(r.height=t+(e?0:i+l)),r.innerWidth=r.width-(n+s),r.innerHeight=r.height-(i+l),r.outerWidth=r.width+a,r.outerHeight=r.height+o,r}}}var r=document.defaultView,u=r&&r.getComputedStyle?function(e){return r.getComputedStyle(e,null)}:function(e){return e.currentStyle},f="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],t):e.getSize=t(e.getStyleProperty)}(window),function(u){function f(e,t){for(var r in t)e[r]=t[r];return e}function h(){}function e(r,e,n,t,i){function a(e,t){this.element="string"==typeof e?v.querySelector(e):e,this.options=f({},this.options),f(this.options,t),this._create()}function o(){return!1}function s(e,t){e.x=void 0!==t.pageX?t.pageX:t.clientX,e.y=void 0!==t.pageY?t.pageY:t.clientY}function l(e,t,r){return r=r||"round",t?Math[r](e/t)*t:e}var c=t("transform");t=!!t("perspective"),f(a.prototype,e.prototype),a.prototype.options={},a.prototype._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=f({},this.position);var e=g(this.element);"relative"!==e.position&&"absolute"!==e.position&&(this.element.style.position="relative"),this.enable(),this.setHandles()},a.prototype.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles(!0)},a.prototype.bindHandles=function(e){var t=u.navigator.pointerEnabled?this.bindPointer:u.navigator.msPointerEnabled?this.bindMSPointer:this.bindMouseTouch;e=void 0===e||!!e;for(var r=0,n=this.handles.length;r<n;r++)t.call(this,this.handles[r],e)},a.prototype.bindPointer=function(e,t){n[t?"bind":"unbind"](e,"pointerdown",this),e.style.touchAction=t?"none":""},a.prototype.bindMSPointer=function(e,t){n[t?"bind":"unbind"](e,"MSPointerDown",this),e.style.msTouchAction=t?"none":""},a.prototype.bindMouseTouch=function(e,t){var r=t?"bind":"unbind";n[r](e,"mousedown",this),n[r](e,"touchstart",this),t&&p(e)};var p="attachEvent"in v.documentElement?function(e){"IMG"===e.nodeName&&(e.ondragstart=o);for(var t=0,r=(e=e.querySelectorAll("img")).length;t<r;t++)e[t].ondragstart=o}:h;a.prototype._getPosition=function(){var e=g(this.element),t=parseInt(e.left,10),r=parseInt(e.top,10);this.position.x=isNaN(t)?0:t,this.position.y=isNaN(r)?0:r,this._addTransformPosition(e)},a.prototype._addTransformPosition=function(e){if(c){var t=e[c];if(0===t.indexOf("matrix")){e=t.split(",");var r=0===t.indexOf("matrix3d")?12:4;t=parseInt(e[r],10),e=parseInt(e[1+r],10),this.position.x+=t,this.position.y+=e}}},a.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},a.prototype.getTouch=function(e){for(var t=0,r=e.length;t<r;t++){var n=e[t];if(n.identifier===this.pointerIdentifier)return n}},a.prototype.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this.dragStart(e,e)},a.prototype.ontouchstart=function(e){this.isDragging||this.dragStart(e,e.changedTouches[0])},a.prototype.onMSPointerDown=a.prototype.onpointerdown=function(e){this.isDragging||this.dragStart(e,e)};var d={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]};a.prototype.dragStart=function(e,t){this.isEnabled&&(e.preventDefault?e.preventDefault():e.returnValue=!1,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this._getPosition(),this.measureContainment(),s(this.startPoint,t),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this._bindEvents({events:d[e.type],node:e.preventDefault?u:v}),r.add(this.element,"is-dragging"),this.isDragging=!0,this.emitEvent("dragStart",[this,e,t]),this.animate())},a.prototype._bindEvents=function(e){for(var t=0,r=e.events.length;t<r;t++)n.bind(e.node,e.events[t],this);this._boundEvents=e},a.prototype._unbindEvents=function(){var e=this._boundEvents;if(e&&e.events){for(var t=0,r=e.events.length;t<r;t++)n.unbind(e.node,e.events[t],this);delete this._boundEvents}},a.prototype.measureContainment=function(){var e=this.options.containment;if(e){this.size=i(this.element);var t=this.element.getBoundingClientRect();e=b(e)?e:"string"==typeof e?v.querySelector(e):this.element.parentNode,this.containerSize=i(e),e=e.getBoundingClientRect(),this.relativeStartPosition={x:t.left-e.left,y:t.top-e.top}}},a.prototype.onmousemove=function(e){this.dragMove(e,e)},a.prototype.onMSPointerMove=a.prototype.onpointermove=function(e){e.pointerId===this.pointerIdentifier&&this.dragMove(e,e)},a.prototype.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this.dragMove(e,t)},a.prototype.dragMove=function(e,t){s(this.dragPoint,t);var r=this.dragPoint.x-this.startPoint.x,n=this.dragPoint.y-this.startPoint.y,i=this.options.grid,a=i&&i[0];i=i&&i[1],r=l(r,a),n=l(n,i),r=this.containDrag("x",r,a),n=this.containDrag("y",n,i),r="y"===this.options.axis?0:r,n="x"===this.options.axis?0:n,this.position.x=this.startPosition.x+r,this.position.y=this.startPosition.y+n,this.dragPoint.x=r,this.dragPoint.y=n,this.emitEvent("dragMove",[this,e,t])},a.prototype.containDrag=function(e,t,r){if(!this.options.containment)return t;var n="x"===e?"width":"height",i=this.relativeStartPosition[e];return e=l(-i,r,"ceil"),n=l(n=this.containerSize[n]-i-this.size[n],r,"floor"),Math.min(n,Math.max(e,t))},a.prototype.onmouseup=function(e){this.dragEnd(e,e)},a.prototype.onMSPointerUp=a.prototype.onpointerup=function(e){e.pointerId===this.pointerIdentifier&&this.dragEnd(e,e)},a.prototype.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this.dragEnd(e,t)},a.prototype.dragEnd=function(e,t){this.isDragging=!1,delete this.pointerIdentifier,c&&(this.element.style[c]="",this.setLeftTop()),this._unbindEvents(),r.remove(this.element,"is-dragging"),this.emitEvent("dragEnd",[this,e,t])},a.prototype.onMSPointerCancel=a.prototype.onpointercancel=function(e){e.pointerId===this.pointerIdentifier&&this.dragEnd(e,e)},a.prototype.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);this.dragEnd(e,t)},a.prototype.animate=function(){if(this.isDragging){this.positionDrag();var e=this;x(function(){e.animate()})}};var m=t?function(e,t){return"translate3d( "+e+"px, "+t+"px, 0)"}:function(e,t){return"translate( "+e+"px, "+t+"px)"};return a.prototype.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},a.prototype.positionDrag=c?function(){this.element.style[c]=m(this.dragPoint.x,this.dragPoint.y)}:a.prototype.setLeftTop,a.prototype.enable=function(){this.isEnabled=!0},a.prototype.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},a.prototype.destroy=function(){this.disable(),c&&(this.element.style[c]=""),this.element.style.left="",this.element.style.top="",this.element.style.position="",this.bindHandles(!1)},a}for(var t,v=u.document,r=v.defaultView,g=r&&r.getComputedStyle?function(e){return r.getComputedStyle(e,null)}:function(e){return e.currentStyle},b="object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},i=0,n=["webkit","moz","ms","o"],x=u.requestAnimationFrame,a=u.cancelAnimationFrame,o=0;o<n.length&&(!x||!a);o++)t=n[o],x=x||u[t+"RequestAnimationFrame"],a=a||u[t+"CancelAnimationFrame"]||u[t+"CancelRequestAnimationFrame"];x&&a||(x=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),n=u.setTimeout(function(){e(t+r)},r);return i=t+r,n},a=function(e){u.clearTimeout(e)}),"function"==typeof define&&define.amd?define(["classie/classie","eventEmitter/EventEmitter","eventie/eventie","get-style-property/get-style-property","get-size/get-size"],e):"object"==typeof exports?module.exports=e(require("desandro-classie"),require("wolfy87-eventemitter"),require("eventie"),require("desandro-get-style-property"),require("get-size")):u.Draggabilly=e(u.classie,u.EventEmitter,u.eventie,u.getStyleProperty,u.getSize)}(window),"object"!=typeof JSON&&(JSON={}),function(){function b(e){return e<10?"0"+e:e}function H(e){return p.lastIndex=0,p.test(e)?'"'+e.replace(p,function(e){var t=k[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function C(e,t){var r,n=h,i=t[e];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(e)),"function"==typeof B&&(i=B.call(t,e,i)),typeof i){case"string":return H(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";h+=z;var a=[];if("[object Array]"===Object.prototype.toString.apply(i)){var o=i.length;for(r=0;r<o;r+=1)a[r]=C(r,i)||"null";var s=0===a.length?"[]":h?"[\n"+h+a.join(",\n"+h)+"\n"+n+"]":"["+a.join(",")+"]";return h=n,s}if(B&&"object"==typeof B){for(o=B.length,r=0;r<o;r+=1)if("string"==typeof B[r]){var l=B[r];(s=C(l,i))&&a.push(H(l)+(h?": ":":")+s)}}else for(l in i)Object.prototype.hasOwnProperty.call(i,l)&&(s=C(l,i))&&a.push(H(l)+(h?": ":":")+s);return s=0===a.length?"{}":h?"{\n"+h+a.join(",\n"+h)+"\n"+n+"}":"{"+a.join(",")+"}",h=n,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var u=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,p=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,z,k={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},B;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var n;if(z=h="","number"==typeof r)for(n=0;n<r;n+=1)z+=" ";else"string"==typeof r&&(z=r);if((B=t)&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return C("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(b,h){function k(e,t){var r,n=e[t];if(n&&"object"==typeof n)for(r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=k(n,r);void 0!==i?n[r]=i:delete n[r]}return h.call(e,t,n)}if(b=String(b),u.lastIndex=0,u.test(b)&&(b=b.replace(u,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){var f=eval("("+b+")");return"function"==typeof h?k({"":f},""):f}throw new SyntaxError("JSON.parse")})}();